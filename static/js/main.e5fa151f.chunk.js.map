{"version":3,"sources":["Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Enums/ChatStepTypes.ts","Components/Generic/Header/HeaderTitle/HeaderTitle.tsx","Components/Generic/Header/HeaderMenu/MenuLink/MenuLink.tsx","Components/Generic/Header/HeaderMenu/NavLinks.ts","Components/Generic/Header/HeaderMenu/HeaderMenu.tsx","Components/Generic/Header/Header.tsx","Components/HomeComponents/HomeDetail/HomeDetail.tsx","Pages/HomePage.tsx","Pages/AboutPage.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/services/ChatbotCommunicator.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Custom/Widgets/OptionSelector/OptionSelector.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Custom/Widgets/InfoMessagesWidget/InfoMessagesWidget.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Custom/Widgets/RearChildrenOptionSelector/RearChildrenOptionSelector.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Custom/Widgets/UndividedEstateWidget/UndividedEstateWidget.tsx","Components/InheritanceCalculatorComponents/OtherComponent/ChatHeader/ChatHeader.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Enums/ParentChildSelector.ts","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Classes/NodeEntity.ts","Components/InheritanceCalculatorComponents/ChatbotComponent/Generics.ts","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Enums/ValidationType.ts","Components/InheritanceCalculatorComponents/ChatbotComponent/Config.js","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Enums/BinaryAnswerTypes.ts","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Methods/ChatbotValidation.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/MessageParser.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Custom/Widgets/ShowInfoWidget/ShowInfoWidget.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Methods/QuestionConstants.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Methods/InheritanceConstants.ts","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Classes/Person.ts","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Classes/Family.ts","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Methods/HandleCurrency.tsx","Components/InheritanceCalculatorComponents/Reports/ReportUtils.ts","Components/InheritanceCalculatorComponents/Reports/InheritanceCalculation.ts","Components/InheritanceCalculatorComponents/Reports/PDF/styles.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/text-styles/Bold.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/text-styles/Italic.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/pdf_utils.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/genealogy/Genealogy.utils.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/genealogy/GenealogyPlikt.utils.tsx","Components/InheritanceCalculatorComponents/OtherComponent/FamilyChart/ProcessDataForChart.tsx","Components/InheritanceCalculatorComponents/OtherComponent/FamilyChart/CustomNode.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/genealogy/Genealogy.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/introSection/IntroductionPlikt.utils.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/introSection/IntroductionPage.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/introSection/Introduction.utils.ts","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/react-pdf-table/Table.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/summary/Summary.utils.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/summary/SummaryPlikt.utils.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/summary/Summary.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/survivingPartner/SurvivingPartner.utils.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/survivingPartner/SurvivingPartnerPlikt.utils.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/survivingPartner/SurvivingPartner.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/firstSection/FirstSection.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/secondSection/UndividedEstateCalculation/UndividedEstateCalculation.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/secondSection/SecondSection.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/thirdSection/ThirdSection.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/fourthSection/generalReservations/GeneralReservationsUtils.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/fourthSection/generalReservations/GeneralReservations.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/fourthSection/nationalInsurance/NationalInsurance.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/fourthSection/FourthSection.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/Footer.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/Header.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/fifthSection/fifthSection.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/FinalDocument.tsx","Components/InheritanceCalculatorComponents/Reports/PliktdelsarvCalculation.ts","Components/InheritanceCalculatorComponents/ChatbotComponent/ActionProvider.tsx","store/chartSelector.js","Components/InheritanceCalculatorComponents/OtherComponent/FamilyChart/Classes/ChartNode.ts","Components/InheritanceCalculatorComponents/OtherComponent/FamilyChart/Classes/ChartConnector.ts","Components/InheritanceCalculatorComponents/OtherComponent/FamilyChart/Classes/Bubble.ts","Components/InheritanceCalculatorComponents/ChatbotComponent/services/ComponentCommunicatorService.tsx","Components/InheritanceCalculatorComponents/OtherComponent/FamilyChart/ChartComponent.tsx","assets/images/chat_button_logo.svg","Pages/InheritanceCalculatorPage.js","Components/Generic/Footer/Footer.tsx","Pages/ResourcesPage.tsx","store/genericReducer.js","store/store.js","App.tsx","index.tsx"],"names":["ChatStepTypes","QuestionType","undividedOwnershipType","useStyles","makeStyles","root","fontFamily","color","HeaderTitle","classes","Typography","variant","className","noWrap","fontSize","padding","textDecoration","textAlign","backgroundColor","fontWeight","rootActive","MenuLink","props","to","href","exact","activeClassName","name","navLinks","id","title","path","HeaderMenu","Grid","container","direction","justifyContent","alignItems","NavLinks","map","item","header","height","paddingLeft","drawerContainer","menuIconRoot","Header","useState","mobileView","drawerOpen","state","setState","useEffect","setResponsiveness","window","innerWidth","prevState","addEventListener","AppBar","Toolbar","IconButton","edge","onClick","size","Drawer","anchor","open","onClose","Link","component","RouterLink","style","key","MenuItem","sm","highLightText","HomeDetail","Box","align","typeSpeed","strings","HomePage","AboutPage","inSubject","Subject","outSubject","internalSubscriptionList","Array","externalSubscriptionList","previousStates","messageService","message","next","asObservable","subscription","push","data","stateCopy","_","cloneDeep","filter","previousState","Object","entries","length","pop","reverseCount","forEach","unsubscribe","handleOptions","option","actionProvider","hideWarning","curStep","stepID","yesNoClickedFlag","testatorStep","handleUndividedEstateChoice","undividedEstateStep","successor_flag","part2","handleChildAliveOption","parent_flag","handleParentAliveOption","part3","handleSecondParentExists","underAgeStep","handleUnderAge","spouseChoice","handleSpouseChoice","cohabitantChoice","handleCohabitantChoice","successorStep","parentsStep","marriedParentsStep","handleMarriedParents","grandParentStep","finalStep","handleFinalQuestion","console","log","warningDiv","document","getElementById","display","OptionSelector","setOption","e","InfoMessagesWidget","PropTypes","string","label","sx","RearChildrenOptionSelector","a","rearChildren","handleRearChildrenOptionWidget","UndividedEstateWidget","handleOwnershipResponse","onClickHandler","thisButton","target","currentParent","parentElement","hasChildNodes","values","childNodes","childEl","pointerEvents","disabled","background","ChatHeader","setOpen","handleCloseNo","restartBot","resetChatbot","flexGrow","position","Button","RestartAlt","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","ParentChildSelector","NodeEntity","level","_id","_level","_path","_parents","_children","_spouse","_cohabitant","_undividedEstateSpouse","_relationshipMap","_childCount","_processChildNodePos","_getRelationshipMap","Map","add_child","child","add_for_both","children_array","child_id","find","obj","getLevel","add_parent","parent","parents_array","parent_id","grandParent","getLatestPathKey","Error","x","setPathforPartner","partnerSelector","partner","has_surviving_spouse","has_surviving_cohabitant","this","prevPath","nodeMap","currId","currNode","getNode","includes","parentCount","i","node","get","undefined","ValidationType","DefaultWarningMessage","ChatbotState","initalStep","person","testator","caseName","netWealth","initialQuestion","temp_person","temp_child","temp_parent","personsMap","undividedSpouseId","deceasedParentsArray","grandParent_flag","rearChildrenResponse","undividedEstate","undividedEstateChoice","undivided_flag","totalEstateValue","undividedEstateSeparateWealth","temp_first","temp_last","ownershipType","none","tempMessages","successorProcessArray","isUndividedParent","InitialChatbotState","messages","cache","createIntlCache","value","createIntl","locale","Norsk","formatMessage","config","botName","lang","customStyles","botMessageBox","chatButton","initialMessages","createChatBotMessage","customComponents","widgets","widgetName","widgetFunc","BinaryAnswerTypeYes","BinaryAnswerTypeNo","ChatbotValidation","chatbotState","validate","validationTypes","warningMessage","validationType","getDefaultWarningMessage","validationResult","emptyValue","validateEmpty","invalidAmount","validateAmount","onlyDigit","validateDigit","incorrectValueForBoolean","validateValueForBoolean","error","showWarning","messageCopy","handleValidation","test","innerHTML","emptyValueMessage","MessageParser","chatbotValidator","disableButtons","buttonElements","getElementsByClassName","currentElement","setRevertListeners","subscribe","revertState","lastState","flagSwitch","curState","part1","handleSuccessorInput","handleSuccessorCount","trim","handleTestator","toLowerCase","alert","handleTotalEstateValueResponse","handleDelvisFirstResponse","part4","handleDelvisSecondResponse","part5","handleFulltSaereieResponse","part6","handleParentsInput","handleUndividedEstateSpouse","handleNetWealth","netWealthStep","spouseStep","handleSpouseInput","cohabitantStep","handleCohabitantInput","theme","popover","paper","useTheme","spacing","ShowInfoWidget","anchorEl","setAnchorEl","containerRef","useRef","handlePopoverClose","Boolean","ref","onMouseEnter","event","currentTarget","onMouseLeave","Popover","anchorOrigin","vertical","horizontal","transformOrigin","disableRestoreFocus","current","text","QuestionConstants","TestatorQuestion","UndividedEstateQuestion","YesNoWidgetOptions","widget","withAvatar","loading","terminateLoading","UndividedEstateResultText","selectedOption","undividedEstateResultText","NetWealthQuestion","NetWealthWarning","UnderAgeQuestion","UnderAgeResultText","underAgeResultText","SpouseChoiceQuestion","SpouseQuestion","CohabitantChoiceQuestion","CohabitantQuestion","addSuccessorQuestion1","person_id","person_ID","addSuccessorQuestion2","child_id_string","children_IDs","AliveQuestion","child_ID","AliveResultText","aliveResultText","addParentsQuestion1","askSecondParentChoiceQuestion","addParentsQuestion2","parent_id_string","parents_IDs","MarriedParents1","first_parent_id","second_parent_id","parent1_ID","parent2_ID","MarriedParents2","addGrandParentsQuestion1","addGrandParentsQuestion2","grandparent_id_string","grandParents_IDs","FinalQuestion","EmptyQuestion","DefaultText","TotalEstateNetValueQuestion","TotalEstateNetValueWarning","OwnershipTypeQuestion","OwnershipQuestionWidgetOptions","OwnershipTypeWarning","DelvisFirstQuestion","DelvisSecondQuestion","FulltSaereieQuestion","UndividedEstateSpouseQuestion","TextBeforeSucsrUndvdSpouse","addSuccessorCount","addSuccessorOfParentCount","existing_child_id","existing_child_ID","InheritanceConstants","DESC_COHABITANT_WITHOUT_COMMON_CHILD","DESC_NO_SPOUSE_OR_COHABITANT","DESC_COHABITANT_NO_CLOSE_RELATIVES_2","DESC_COHABITANT_NO_CLOSE_RELATIVES","DESC_SPOUSE_NO_CLOSE_RELATIVES_2","DESC_SPOUSE_NO_CLOSE_RELATIVES","G","MINIMUM_INHERITANCE_SPOUSE_VS_CHILDREN","FRACTION_INHERITANCE_SPOUSE_VS_CHILDREN","MINIMUM_INHERITANCE_SPOUSE_VS_PARENTS","FRACTION_INHERITANCE_SPOUSE_VS_PARENTS","MINIMUM_INHERITANCE_COHABITANT_VS_CHILDREN","FRACTION_INHERITANCE_COHABITANT_VS_CHILDREN","MINIMUM_INHERITANCE_COHABITANT_VS_PARENTS","FRACTION_INHERITANCE_COHABITANT_VS_PARENTS","FRACTION_PLIKTDEL","LINE_MAXIMUM_PLIKTDEL","LAW_LINKS","CODE_PARAGRAPHS","Person","personid","_personName","_deceased","_childrenRearing","_underAge","set_spouse","spouse","hasSurvivingSpouse","set_cohabitant","cohabitant","getPerson","personMap","Family","_person_dict","personID","keys","ParseCurrencyStringForOutput","unformattedCurrency","Intl","NumberFormat","currency","currencyDisplay","minimumFractionDigits","maximumFractionDigits","format","Number","replace","concat","CurrencyOutput","inputCurrency","initialCurrencyValue","beginningValue","endValue","matchesStart","match","matchStartResult","substring","matchesEnd","matchEndResult","removeTextFromCurrencyString","digitsBeforeSeparatorValue","separatorCount","checkSeparatorCount","digitsBeforeSymbol","checkDigitsBeforeSeparatorValue","ReportUtils","ActionProvider","combine_duplicates","inheritance_fraction_list","combinedDuplicates_inheritance_fraction_list","inheritance_fraction_person_set","Set","inheritance_fraction","add","frac_sum","chain_array","has","frac","chains","splits_initial","split_evenly_between_lines","person_list","maximum_distance","allow_parents","split_fraction_list","split_frac","personDetail","personNode","get_class_and_distance_closest_surviving_relative","temp_list","level_sum","interm_temp_list","temp_split_fraction_list","temp_fraction_list","isEqual","compute_default_genealogy_splits_with_chains","personObject","class_closest","firstParentSpouse","grandParent_splits","parentNode","intl","InheritanceCalculation","inheritanceConstants","will","survivor","survivor_type","distance_closest","old_surviving_reference_paragraphs","surviving_reference_paragraphs","minimum_surviving_inheritance","surviving_fraction","descriptive_text","survivor_inheritance_sum","genealogy_inheritance_sum","splits_with_chains","genealogy_inheritance","genealogy_splits","reportUtils","computeInheritance","closest_class","firstParentNode","grandparent_splits","tempArray","num","split","resultList","computeGenealogyInheritance","Math","min","max","genealogy_split","styles","StyleSheet","create","page","flexDirection","paddingRight","section","margin","marginBottom","heading","subheading","paragraphHeading","paragraph","pageNumber","bottom","left","right","boldValue","italicValue","fontStyle","urlStyle","tableHeaderRow","borderWidth","tableDataRow","marginTop","redText","image","marginVertical","marginHorizontal","Bold","children","Italic","currencyFormatNO","currencyValue","useGrouping","add_legal_references","code_paragraphs","code_paragraph","add_legal_reference","lovdataLink","addLovdataLink","code_paragraph_code","hyperlinkText","add_hyperlink","url_text","src","getGenealogyText","legalReference1","legalReference2","getParagraph","genealogy_inheritance_text","helpText","legalReferenceText","finalGenealogyInheritanceText","tempVar","unravel_chains_to_string","enumerate","it","resultArray","index","element","chains_unraveled","chain","unraveled_chains","s","ind","link","unravel_chain_to_string","n","unraveled_chain","GenealogyUtils","genealogyText","genealogyInheritanceSum","legal_reference_text","genealogyInheritanceText","xDiff","yDiff","partnerBubbleLevelMap","HandleType","GenealogyPliktUtils","Genealogy","inheritanceMode","useContext","UserContext","inheritanceCalculation","genealogyParagraph","break","pliktdelsarvCalculation","genealogyPliktParagraph","getPliktIntroString","person_name","net_wealth_NOK","available_for_will","IntroductionPage","calculatedValues","currencyFormatted","testatorName","IntroductionUtils","pliktIntroText","IntroductionPliktUtils","TableElement","summaryVal","summaryValue","getContent","r","survivorName","survivorType","belopAmount","getSummaryValues","survivor_name","gen_inherit","summaryCell","Summary","summaryTable","summaryValues","SummaryUtils","summaryPliktTable","SummaryPliktUtils","getInheritanceDescriptiveText","inheritance_constants","SurvivingPartnerUtils","inheritanceDescriptiveText","SurvivingPartnerPliktUtils","SurvivingPartner","survivingPartnerParagraph","FirstSection","UndividedEstateCalculation","undividedResult","add_undivided_estate_relatives","add_undivided_estate_summary","SecondSection","undividedStateElement","ThirdSection","getUskifteText","getTestamentText","getavkortingText","lovdata_link","getBarnText","generalReservationsUtils","uskifteText","testamentText","avkortingText","barnText","GeneralReservations","generalReservationsText","NationalInsurance","NationalInsuranceText","getNationalInsuranceString","FourthSection","Footer","render","totalPages","fixed","FifthSection","url","setUrl","querySelector","domtoimage","toJpeg","classList","contains","then","dataUrl","catch","createContext","FinalDocument","Provider","inputData","PliktdelsarvCalculation","setStateFunc","createClientMessage","stateRef","QuestionConsts","family","checkstate","isStarted","glb_state","GRANDCHILDREN_PATH_LIMIT","revertCount","localStorage","getItem","parseInt","setItem","toString","returnState","testatorResponse","undividedEstateQuestion","createTestator","addMessageToBotState","undividedEstateChoiceResponse","totalEstateNetValueQuestion","netWealthQuestion","totalEstateValueResponse","totalEstateValueQuestion","currencyIntResponse","currencyStringResponse","currencyJSX","ownershipTypeQuestion","currencyCustom","totalEstateWarning","ownershipResponse","felleseie","undividedEstateSpouseQuestion","underAgeQuestion","askFinalQuestion","delvisFirstQuestion","fulltSaereieQuestion","ownershipTypeWarning","delvisFirstResponse","delvisSecondQuestion","netWealthWarning","delvisSecondResponse","fulltSaereieResponse","undividedEstateSpouseResponse","undividedSpouseID","newUndividedSpouse","createNewPerson","undividedSpouse","newUndividedSpouseDetail","textBeforeSucsrUndvdSpouse","newSuccessorQuestion","spouseChoiceQuestion","cohabitantChoiceQuestion","spouseQuestion","spouseResponse","spouseID","newSpouse","rearChildrenStep","cohabitantChoiceResponse","cohabitantQuestion","cohabitantResponse","cohabitantID","newCohabitant","successorResponse","child_name","childID","getChildUnprocessedNode","personId","aliveQuestion","alive","childDetail","getGenerationCount","handleNoSuccessorCase","childItrPos","allChildrenID","getParentChildrenIDStrings","currentParentID","isCurrentParentID","currentId","getParentId","currentParentDetail","handleClosingStep","secondParentChoice","allParentsID","temp_person_detail","newParentQuestion","closestSurvivingRelativeParents","closestSurvivingRelativeGrandParents","parentResponse","predecessor_id","predecessor","temp_parent_detail","grandParentFirst","testatorNode","askForNextGrandParent","marriedParentsResponse","finalOption","pdfDownloadLink","fileName","blob","pdfLink","handleRearChildrenResult","closestSurvivingRelativeChildren","testatorDetail","temp_class_testator","temp_class_undivided_spouse","collection","join","finalQuestion","isTwoParent","personName","secondParentChoiceQuestion","temp_class","eitherParentsDeceased","p_id","parent1Detail","parent2Detail","marriedParentsQn","isArray","handleDefault","newPerson","generateNextID","set","newNode","createEmptyNode","firstSpouse_id","secondSpouse_id","surviving_successor_distance","possible_distances","temp","distance","alternatives","sort","b","closest_alternative_class","closest_alternative_distance","check","self","setInterval","detail","clearInterval","chartSelector","delay","Promise","resolve","setTimeout","currencyResponse","successorCount","parentID","questionType","itr_id","t","ChartNode","type","xLevel","draggable","connectable","NodeData","showDialog","pos","ChartConnector","source","sourceHandle","targetHandle","animated","Bubble","elements","maxLevel","minLevel","xLevelArray","chartNodeMap","connectorArray","nodeSize","setxLevel","levelMap","processedNodes","currentLevelChartNodes","currentNode","avgXlevel","parentsCurrentNode","partnerNodeId","partnerChartNode","getChartNode","partnerBubbleArray","connector","newConnector","currentNodePath","j","sourceNode","targetNode","top","getLevelMap","nodeDetails","nodeLabel","y","setNodePosition","ypos","sortedLevelChartNode","bubbles","createLevelBubble","processBubbles","xleft","xgap","previousXRight","bubble","parentChartNode","relativeXleft","relativeXRight","eleID","chartNodes","partnerBubble","isPartnerProcessed","chartNode","partnerParent","isExistingBubble","partnerNode","existingBubbles","existingBubble","getChartNodeConnectorArray","finalArray","setxLevelForMaxLevel","nodeArray","xlevelDefault","customHandleData","Position","Right","Bottom","Left","Top","partnerNodeStyles","width","borderRadius","borderColor","borderStyle","letterSpacing","lineHeight","deceasedFormatter","personString","CustomNode","totalData","isConnectable","handles","v","k","labelString","mode","forceSingleModeWidth","Popper","chatBotDataSubject","chatbotMessageSubscriptionList","componentCommunicatorService","flowStyles","isHandleChange","OrgChartTree","result","setResult","chartContent","setChartContent","componentWillUnmount","updateNodeInternals","useUpdateNodeInternals","chartData","maxLevelData","processData","fitView","useZoomPanHelper","nodeTypes","specialNode","paddingTop","nodesConnectable","paneMoveable","selectNodesOnDrag","elementsSelectable","nodesDraggable","BackgroundVariant","Dots","gap","setWarningDiv","chatParentElement","newDiv","createElement","prepend","addListenerToChatInputField","InheritanceCalculatorPage","prev","Config","messageParser","divChatBot","botIcon","Copyright","Date","getFullYear","footer","description","Paper","gutterBottom","ResourcesPage","initialState","genericReducer","action","payload","store","createStore","createTheme","rootPaper","minHeight","opacity","menuItems","App","langMessages","StyledEngineProvider","injectFirst","ThemeProvider","role"],"mappings":"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","file":"static/js/main.e5fa151f.chunk.js","sourcesContent":["export enum ChatStepTypes {\r\n  initalStep = \"\",\r\n  testatorStep = \"testatorStep\",\r\n  undividedEstateStep = \"undividedEstateStep\",\r\n  netWealthStep = \"netWealthStep\",\r\n  underAgeStep = \"underAgeStep\",\r\n  spouseChoice = \"spouseChoice\",\r\n  spouseStep = \"spouseStep\",\r\n  cohabitantChoice = \"cohabitantChoice\",\r\n  cohabitantStep = \"cohabitantStep\",\r\n  successorStep = \"successorStep\",\r\n  parentsStep = \"parentsStep\",\r\n  rearChildrenStep = \"rearChildrenStep\",\r\n  marriedParentsStep = \"marriedParentsStep\",\r\n  grandParentStep = \"grandParentStep\",\r\n  finalStep = \"finalStep\",\r\n  secondParentChoice = \"secondParentChoice\",\r\n}\r\n\r\nexport enum QuestionType {\r\n  part1 = \"part1\",\r\n  part2 = \"part2\",\r\n  part3 = \"part3\",\r\n  part4 = \"part4\",\r\n  part5 = \"part5\",\r\n  part6 = \"part6\",\r\n  initialQuestion = \"none\",\r\n}\r\n\r\nexport enum undividedOwnershipType {\r\n  felleseie = \"FELLESEIE\",\r\n  delvis = \"DELVIS SÆREIE\",\r\n  fullt = \"FULLT SÆREIE\",\r\n  none = \"\",\r\n}\r\n","import { ReactElement } from \"react\";\r\nimport { Typography } from \"@mui/material\";\r\nimport makeStyles from '@mui/styles/makeStyles';\r\n\r\nconst root = {\r\n  fontFamily: '\"Abril Fatface\", serif',\r\n  color: \"#016196\",\r\n};\r\n\r\nconst useStyles = makeStyles({ root });\r\nconst HeaderTitle = (): ReactElement => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Typography variant=\"h2\" className={classes.root} noWrap>\r\n      ARVEBOT\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default HeaderTitle;\r\n","// import classes from \"./MenuLink.module.css\";\r\nimport { ReactElement } from \"react\";\r\nimport makeStyles from '@mui/styles/makeStyles';\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\ninterface propsTypes {\r\n  href: string;\r\n  name: ReactElement;\r\n}\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    fontFamily: '\"Work Sans\", sans-serif',\r\n    // fontWeight: \"300\",\r\n    fontSize: \"1.3rem\",\r\n    color: \"#4151C9\",\r\n    padding: \"0 20px\",\r\n    textDecoration: \"none\",\r\n    textAlign: \"center\",\r\n    \"&:hover\": {\r\n      color: \"#FFF5EE\",\r\n      backgroundColor: \"#87AFC7\",\r\n      fontWeight: \"bold\",\r\n    },\r\n  },\r\n  rootActive: {\r\n    backgroundColor: \"#FFCBA4\",\r\n    color: \"#2B3856\",\r\n    \"&:hover\": {\r\n      backgroundColor: \"#FCCABD\",\r\n      color: \"#2B3856\",\r\n    },\r\n  },\r\n});\r\n\r\nconst MenuLink = (props: propsTypes): ReactElement => {\r\n  const classes = useStyles(props);\r\n  return (\r\n    <NavLink\r\n      to={props.href}\r\n      className={classes.root}\r\n      exact\r\n      activeClassName={classes.rootActive}\r\n    >\r\n      {props.name}\r\n    </NavLink>\r\n  );\r\n};\r\n\r\nexport default MenuLink;\r\n","const navLinks = [\r\n  {\r\n    id: 0,\r\n    title: \"Menu.Home\",\r\n    path: \"/\",\r\n  },\r\n  {\r\n    id: 1,\r\n    title: \"Menu.Calculator\",\r\n    path: \"/calculator\",\r\n  },\r\n  {\r\n    id: 2,\r\n    title: \"Menu.About\",\r\n    path: \"/about\",\r\n  },\r\n  {\r\n    id: 3,\r\n    title: \"Menu.Resources\",\r\n    path: \"/resources\",\r\n  },\r\n];\r\n\r\nexport default navLinks;\r\n","import { Grid } from \"@mui/material\";\r\nimport MenuLink from \"./MenuLink/MenuLink\";\r\nimport NavLinks from \"./NavLinks\";\r\nimport { FormattedMessage } from \"react-intl\";\r\nimport { ReactElement } from \"react\";\r\n\r\nconst HeaderMenu = (): ReactElement => {\r\n  return (\r\n    <Grid\r\n      container\r\n      direction=\"row\"\r\n      justifyContent=\"space-evenly\"\r\n      alignItems=\"center\"\r\n    >\r\n      {NavLinks.map(({ id, title, path }) => {\r\n        return (\r\n          <Grid item key={id}>\r\n            <MenuLink name={<FormattedMessage id={`${title}`} />} href={path} />\r\n          </Grid>\r\n        );\r\n      })}\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default HeaderMenu;\r\n","import { useState, useEffect, ReactElement } from \"react\";\r\nimport makeStyles from '@mui/styles/makeStyles';\r\nimport {\r\n  AppBar,\r\n  Toolbar,\r\n  Grid,\r\n  IconButton,\r\n  Drawer,\r\n  Link,\r\n  MenuItem,\r\n} from \"@mui/material\";\r\nimport MenuIcon from \"@mui/icons-material/Menu\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport HeaderTitle from \"./HeaderTitle/HeaderTitle\";\r\nimport HeaderMenu from \"./HeaderMenu/HeaderMenu\";\r\nimport NavLinks from \"../../Generic/Header/HeaderMenu/NavLinks\";\r\n\r\nconst useStyles = makeStyles({\r\n  header: {\r\n    backgroundColor: \"white\",\r\n    height: \"5rem\",\r\n  },\r\n  \"@media (max-width: 900px)\": {\r\n    paddingLeft: 0,\r\n  },\r\n  drawerContainer: {\r\n    padding: \"20px 30px\",\r\n  },\r\n  menuIconRoot: {\r\n    color: \"#4151C9\",\r\n  },\r\n});\r\n\r\nconst getDrawerChoices = () => {\r\n  return NavLinks.map(({ id, title, path }) => {\r\n    return (\r\n      <Link\r\n        {...{\r\n          component: RouterLink,\r\n          to: path,\r\n          color: \"inherit\",\r\n          style: { textDecoration: \"none\" },\r\n          key: id,\r\n        }}\r\n      >\r\n        <MenuItem>{title}</MenuItem>\r\n      </Link>\r\n    );\r\n  });\r\n};\r\nconst displayDesktop = () => {\r\n  return (\r\n    <Toolbar>\r\n      <Grid\r\n        container\r\n        direction=\"row\"\r\n        justifyContent=\"flex-start\"\r\n        alignItems=\"flex-end\"\r\n      >\r\n        <Grid item sm={6}>\r\n          <HeaderTitle />\r\n        </Grid>\r\n        <Grid item sm={6}>\r\n          <HeaderMenu />\r\n        </Grid>\r\n      </Grid>\r\n    </Toolbar>\r\n  );\r\n};\r\n\r\nconst Header = (): ReactElement => {\r\n  const [state, setState] = useState({\r\n    mobileView: false,\r\n    drawerOpen: false,\r\n  });\r\n  const { mobileView, drawerOpen } = state;\r\n  useEffect(() => {\r\n    const setResponsiveness = () => {\r\n      return window.innerWidth < 900\r\n        ? setState((prevState) => ({ ...prevState, mobileView: true }))\r\n        : setState((prevState) => ({ ...prevState, mobileView: false }));\r\n    };\r\n    setResponsiveness();\r\n    window.addEventListener(\"resize\", () => setResponsiveness());\r\n  }, []);\r\n\r\n  const classes = useStyles();\r\n\r\n  const displayMobile = () => {\r\n    const handleDrawerOpen = () =>\r\n      setState((prevState) => ({ ...prevState, drawerOpen: true }));\r\n    const handleDrawerClose = () =>\r\n      setState((prevState) => ({ ...prevState, drawerOpen: false }));\r\n\r\n    return (\r\n      <Toolbar>\r\n        <MenuIcon className={classes.menuIconRoot} />\r\n        <IconButton edge=\"start\" color=\"inherit\" onClick={handleDrawerOpen} size=\"large\" />\r\n        <Drawer anchor=\"left\" open={drawerOpen} onClose={handleDrawerClose}>\r\n          <div className={classes.drawerContainer}>{getDrawerChoices()}</div>\r\n        </Drawer>\r\n        <HeaderTitle />\r\n      </Toolbar>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <AppBar className={classes.header}>\r\n      {mobileView ? displayMobile() : displayDesktop()}\r\n    </AppBar>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import { ReactElement } from \"react\";\r\nimport makeStyles from '@mui/styles/makeStyles';\r\nimport { Box, Typography } from \"@mui/material\";\r\nimport Typed from 'react-typed';\r\n// import Typed from \"typed.js\";\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    padding: \"10rem 20rem\",\r\n    color: \"white\",\r\n    fontFamily: '\"Work Sans\", sans-serif',\r\n  },\r\n  highLightText: {\r\n    fontFamily: '\"Abril Fatface\", serif',\r\n    fontSize: \"4rem\",\r\n    color: \"yellow\",\r\n  },\r\n});\r\n\r\nconst HomeDetail = (): ReactElement => {\r\n  const classes = useStyles();\r\n  const textLines = [\"hjelper deg å finne løsningen og relevant rettsgrunnlag.\"]\r\n  return (\r\n    <Box>\r\n      <Typography variant=\"h4\" align=\"center\" className={classes.root}>\r\n        Lurer du på hvem som arver Peder Ås når han dør? <br />\r\n        Hvor mye får kona og barna? Hva med stesønnen? <br />\r\n        Og hvor mye kan han testamentere til Lilleviks fuglekikkerforening?{\" \"}\r\n        <br /> <br />\r\n        <span className={classes.highLightText}>BeregnArv</span> <Typed typeSpeed={50} strings={textLines}></Typed>\r\n      </Typography>\r\n    </Box >\r\n  );\r\n};\r\n\r\nexport default HomeDetail;\r\n","import { ReactElement } from \"react\";\r\nimport HomeDetail from \"../Components/HomeComponents/HomeDetail/HomeDetail\";\r\n\r\nconst HomePage = (): ReactElement => {\r\n  return (\r\n    // <Typography variant=\"h2\" align=\"center\">\r\n    //   HomePage\r\n    // </Typography>\r\n    <HomeDetail />\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n","import { Typography } from \"@mui/material\";\r\nimport { ReactElement } from \"react\";\r\nconst AboutPage = (): ReactElement => {\r\n  return (\r\n    <div>\r\n      <Typography variant=\"h2\" align=\"center\">\r\n        About Page\r\n      </Typography>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AboutPage;\r\n","import { Subject, Subscription } from 'rxjs';\r\nimport _ from \"lodash\";\r\n\r\nconst inSubject = new Subject();\r\nconst outSubject = new Subject();\r\nconst internalSubscriptionList = new Array<Subscription>()\r\nconst externalSubscriptionList = new Array<Subscription>()\r\nconst previousStates = new Array<any>();\r\nexport const messageService = {\r\n\r\n    sendMessageToChatbot: (message: any) => inSubject.next(message),\r\n\r\n    sendMessageFromChatbot: (message: any) => outSubject.next(message),\r\n\r\n    getMessageInChatbot: () => inSubject.asObservable(),\r\n\r\n    getMessageOutChatbot: () => outSubject.asObservable(),\r\n\r\n    addInternalSubscription: (subscription: Subscription) => internalSubscriptionList.push(subscription),\r\n\r\n    addExternalSubscription: (subscription: Subscription) => externalSubscriptionList.push(subscription),\r\n\r\n    addPreviousState: (data: any) => {\r\n        const stateCopy = _.cloneDeep(data)\r\n        if (previousStates.filter(previousState => Object.entries(previousState) == Object.entries(stateCopy)).length === 0) {\r\n            previousStates.push(stateCopy)\r\n        }\r\n    },\r\n\r\n    removePreviousState: () => {\r\n        if (previousStates.length === 0) {\r\n            return null;\r\n        }\r\n        return previousStates.pop()\r\n    },\r\n\r\n    getPreviousStates: () => previousStates,\r\n\r\n    getPreviousState: (reverseCount: number) => {\r\n        if (previousStates.length === 0) return null;\r\n        return previousStates[previousStates.length - 1 - reverseCount]\r\n    },\r\n\r\n    clearAllInternalSubscription: () => {\r\n        internalSubscriptionList.forEach((subscription: Subscription) => {\r\n            subscription.unsubscribe();\r\n        })\r\n    },\r\n\r\n    clearAllExternalSubscription: () => {\r\n        externalSubscriptionList.forEach((subscription: Subscription) => {\r\n            subscription.unsubscribe();\r\n        })\r\n    }\r\n};\r\n","import \"./OptionSelector.scss\";\r\nimport { FormattedMessage } from \"react-intl\";\r\nimport { ReactElement } from \"react\";\r\nimport { ChatbotInterface } from \"../../../Generics\";\r\nimport { ChatStepTypes, QuestionType } from \"../../../Helper/Enums/ChatStepTypes\";\r\nimport { messageService } from \"../../../services/ChatbotCommunicator\";\r\n\r\n\r\nconst OptionSelector = (props: any): ReactElement => {\r\n  const { actionProvider, setState } = props;\r\n  const setOption = (option: boolean) => {\r\n    handleOptions(option, actionProvider, setState);\r\n  };\r\n\r\n  const onClickHandler = (e: any): void => {\r\n    // const thisButton = e.target as HTMLButtonElement\r\n    // const nextButton = (thisButton).nextElementSibling as HTMLButtonElement\r\n    // const prevButton = (thisButton).previousElementSibling as HTMLButtonElement\r\n    // const otherButton = nextButton ? nextButton : prevButton\r\n    // thisButton.style.pointerEvents = \"none\"\r\n    // thisButton.style.background = \"darkolivegreen\";\r\n    // thisButton.disabled = true;\r\n    // otherButton.style.pointerEvents = \"none\"\r\n    // otherButton.disabled = true;\r\n  }\r\n  return (\r\n    <div>\r\n      <div className=\"option-selector-button-container\">\r\n        <button\r\n          className=\"option-selector-button\"\r\n          onClick={(e) => {\r\n            onClickHandler(e);\r\n            setOption(true)\r\n          }}\r\n        >\r\n          <FormattedMessage id=\"Chatbot.Yes\" />\r\n        </button>\r\n        <button\r\n          className=\"option-selector-button\"\r\n          onClick={(e) => {\r\n            onClickHandler(e);\r\n            setOption(false)\r\n          }}\r\n        >\r\n          <FormattedMessage id=\"Chatbot.No\" />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nconst handleOptions = (option: boolean, actionProvider: any, setState: any) => {\r\n  hideWarning();\r\n  setState((state: ChatbotInterface) => {\r\n    messageService.addPreviousState({ ...state })\r\n    const curStep = state.stepID;\r\n    state.yesNoClickedFlag = true;\r\n    switch (curStep) {\r\n      case ChatStepTypes.testatorStep: {\r\n        actionProvider.handleUndividedEstateChoice(option);\r\n        break;\r\n      }\r\n      case ChatStepTypes.undividedEstateStep: {\r\n        if (state.successor_flag === QuestionType.part2) {\r\n          actionProvider.handleChildAliveOption(option);\r\n          break;\r\n        }\r\n        else if (state.parent_flag === QuestionType.part2) {\r\n          actionProvider.handleParentAliveOption(option);\r\n          break;\r\n        }\r\n        else if (state.parent_flag === QuestionType.part3) {\r\n          actionProvider.handleSecondParentExists(option);\r\n          break;\r\n        }\r\n        break;\r\n      }\r\n      case ChatStepTypes.underAgeStep: {\r\n        actionProvider.handleUnderAge(option);\r\n        break;\r\n      }\r\n      case ChatStepTypes.spouseChoice: {\r\n        actionProvider.handleSpouseChoice(option);\r\n        break;\r\n      }\r\n      case ChatStepTypes.cohabitantChoice: {\r\n        actionProvider.handleCohabitantChoice(option);\r\n        break;\r\n      }\r\n      case ChatStepTypes.successorStep: {\r\n        state.successor_flag = QuestionType.part2\r\n        actionProvider.handleChildAliveOption(option);\r\n        break;\r\n      }\r\n      case ChatStepTypes.parentsStep: {\r\n        if (state.successor_flag === QuestionType.part2) {\r\n          actionProvider.handleChildAliveOption(option);\r\n          break;\r\n        }\r\n        else if (state.parent_flag === QuestionType.part2) {\r\n          actionProvider.handleParentAliveOption(option);\r\n          break;\r\n        }\r\n        else if (state.parent_flag === QuestionType.part3) {\r\n          actionProvider.handleSecondParentExists(option);\r\n          break;\r\n        }\r\n        break;\r\n      }\r\n      case ChatStepTypes.marriedParentsStep: {\r\n        actionProvider.handleMarriedParents(option);\r\n        break;\r\n      }\r\n      case ChatStepTypes.grandParentStep: {\r\n        if (state.successor_flag === QuestionType.part2) {\r\n          actionProvider.handleChildAliveOption(option);\r\n          break;\r\n        }\r\n        else if (state.parent_flag === QuestionType.part2) {\r\n          actionProvider.handleParentAliveOption(option);\r\n          break;\r\n        }\r\n        else if (state.parent_flag === QuestionType.part3) {\r\n          actionProvider.handleSecondParentExists(option);\r\n          break;\r\n        }\r\n        break;\r\n      }\r\n      case ChatStepTypes.finalStep: {\r\n        actionProvider.handleFinalQuestion(option)\r\n        break;\r\n      }\r\n      default: {\r\n        console.log(\"fix this. state: \", state);\r\n      }\r\n    }\r\n    return state;\r\n  });\r\n}\r\nconst hideWarning = () => {\r\n  const warningDiv = document.getElementById(\"chatbot-warning-div\");\r\n  if (warningDiv) {\r\n    warningDiv.style.display = \"none\";\r\n    return;\r\n  }\r\n}\r\nexport default OptionSelector;\r\n// function toggleInputField() {\r\n//   const chatInputField = document.querySelectorAll(\r\n//     \".react-chatbot-kit-chat-input\"\r\n//   ) as NodeListOf<HTMLElement>;\r\n//   if (chatInputField)\r\n//     chatInputField[0]. = !chatInputField.disabled;\r\n// }\r\n\r\n","import { Box } from \"@mui/material\";\r\nimport PropTypes, { InferProps } from 'prop-types';\r\nimport './InfoMessagesWidget.scss'\r\n\r\nconst InfoMessageTypes = {\r\n  label: PropTypes.string\r\n}\r\ntype InfoMessageTypes = InferProps<typeof InfoMessageTypes>\r\n\r\nconst InfoMessagesWidget = ({ label }: InfoMessageTypes) => {\r\n  return <Box\r\n    display=\"flex\"\r\n    justifyContent=\"center\"\r\n    alignItems=\"center\"\r\n    component=\"span\"\r\n    className=\"InfoMessage\"\r\n    sx={{ backgroundColor: \"#FFCBA4\" }}\r\n  >\r\n    Amount Entered: {label}\r\n  </Box>\r\n};\r\n// color: #FFCBA4\r\n\r\nexport default InfoMessagesWidget;","import { ReactElement } from \"react\";\r\nimport { FormattedMessage } from \"react-intl\";\r\nimport \"./RearChildrenOptionSelector.scss\";\r\n\r\nconst RearChildrenOptionSelector = (props: any): ReactElement => {\r\n  const { setState, actionProvider } = props;\r\n\r\n  const setOption = async (option: any) => {\r\n    setState((state: any) => ({\r\n      ...state,\r\n      // stepID: 5,\r\n      rearChildren: option,\r\n    }));\r\n\r\n    actionProvider.handleRearChildrenOptionWidget(option);\r\n  };\r\n  return (\r\n    <div>\r\n      <div className=\"option-selector-button-container\">\r\n        <button\r\n          className=\"option-selector-button\"\r\n          onClick={() => setOption(true)}\r\n        >\r\n          <FormattedMessage id=\"Chatbot.Yes\" />\r\n        </button>\r\n        <button\r\n          className=\"option-selector-button\"\r\n          onClick={() => setOption(false)}\r\n        >\r\n          <FormattedMessage id=\"Chatbot.No\" />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RearChildrenOptionSelector;\r\n","import \"./UndividedEstateWidget.scss\";\r\nimport { FormattedMessage } from \"react-intl\";\r\nimport { ReactElement } from \"react\";\r\n\r\n\r\nconst UndividedEstateWidget = (props: any): ReactElement => {\r\n  const { actionProvider } = props;\r\n\r\n  const setOption = (option: string) => {\r\n    actionProvider.handleOwnershipResponse(option);\r\n  };\r\n\r\n  const onClickHandler = (e: any): void => {\r\n    const thisButton = e.target as HTMLButtonElement;\r\n    const currentParent = thisButton.parentElement;\r\n    if (currentParent?.hasChildNodes) {\r\n      const allCurrentButtons = Object.values(currentParent.childNodes) as HTMLButtonElement[];\r\n      for (const childEl of allCurrentButtons) {\r\n        childEl.style.pointerEvents = \"none\";\r\n        childEl.disabled = true;\r\n      }\r\n      thisButton.style.background = \"darkolivegreen\";\r\n    }\r\n  }\r\n  return (\r\n    <div>\r\n      <div className=\"option-selector-button-container\">\r\n        <button\r\n          className=\"option-selector-button\"\r\n          onClick={(e) => {\r\n            onClickHandler(e);\r\n            setOption(\"FELLESEIE\")\r\n          }}\r\n        >\r\n          <FormattedMessage id=\"Chatbot.OWNERSHIP_TYPE1\" />\r\n        </button>\r\n        <button\r\n          className=\"option-selector-button\"\r\n          onClick={(e) => {\r\n            onClickHandler(e);\r\n            setOption(\"DELVIS SÆREIE\")\r\n          }}\r\n        >\r\n          <FormattedMessage id=\"Chatbot.OWNERSHIP_TYPE2\" />\r\n        </button>\r\n        <button\r\n          className=\"option-selector-button\"\r\n          onClick={(e) => {\r\n            onClickHandler(e);\r\n            setOption(\"FULLT SÆREIE\")\r\n          }}\r\n        >\r\n          <FormattedMessage id=\"Chatbot.OWNERSHIP_TYPE3\" />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UndividedEstateWidget;\r\n","import { useState } from \"react\";\r\nimport AppBar from \"@mui/material/AppBar\";\r\nimport Box from \"@mui/material/Box\";\r\nimport Toolbar from \"@mui/material/Toolbar\";\r\nimport { RestartAlt } from \"@mui/icons-material\";\r\nimport { Button, Typography } from \"@mui/material\";\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogContentText from '@mui/material/DialogContentText';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\n\r\nexport default function ChatHeader(props: any) {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n  };\r\n\r\n  const handleCloseNo = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleCloseYes = () => {\r\n    restartBot();\r\n    setOpen(false);\r\n  }\r\n\r\n  const restartBot = () => {\r\n    props.actionProvider.resetChatbot();\r\n  }\r\n\r\n  return (\r\n    <Box sx={{ flexGrow: 1 }}>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1 }}>\r\n            Conversation with ArveBot\r\n          </Typography>\r\n          <Button onClick={handleClickOpen} style={{ backgroundColor: \"rgb(92, 204, 157)\" }}>\r\n            <RestartAlt fontSize=\"large\" />\r\n          </Button>\r\n          <Dialog\r\n            open={open}\r\n            onClose={handleCloseNo}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n          >\r\n            <DialogTitle id=\"alert-dialog-title\">\r\n              Restart ChatBot?\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <DialogContentText id=\"alert-dialog-description\">\r\n                Do you really want to finish current session and start over?\r\n              </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={handleCloseNo}>No</Button>\r\n              <Button onClick={handleCloseYes} autoFocus>\r\n                Yes\r\n              </Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n        </Toolbar>\r\n      </AppBar>\r\n    </Box>\r\n  );\r\n}\r\n","export enum ParentChildSelector {\r\n  child = 0,\r\n  parent = 1,\r\n  testator = -1,\r\n  grandParent = 2,\r\n  spouse = 3,\r\n  cohabitant = 4,\r\n  undividedSpouse = 5,\r\n}\r\n","import { ParentChildSelector } from \"../Enums/ParentChildSelector\";\r\n\r\nexport class NodeEntity {\r\n  _id: number;\r\n  _level: number;\r\n  _path: Array<[number, number]>;\r\n  _parents: Array<number>;\r\n  _children: Array<number>;\r\n  _spouse: number | null;\r\n  _cohabitant: number | null;\r\n  _undividedEstateSpouse: number | null;\r\n  _relationshipMap: Map<string, string>;\r\n  _childCount: number;\r\n  _processChildNodePos: number;\r\n  constructor(id: number, level: number) {\r\n    this._id = id;\r\n    this._level = level;\r\n    this._path = [];\r\n    this._parents = [];\r\n    this._children = [];\r\n    this._spouse = null;\r\n    this._cohabitant = null;\r\n    this._undividedEstateSpouse = null;\r\n    this._relationshipMap = this._getRelationshipMap();\r\n    this._childCount = 0;\r\n    this._processChildNodePos = 0;\r\n  }\r\n  _getRelationshipMap = (): Map<string, string> => {\r\n    return new Map<string, string>([\r\n      [\"0\", \"child\"],\r\n      [\"00\", \"grandchild\"],\r\n      [\"1\", \"parent\"],\r\n      [\"10\", \"brother/sister\"],\r\n      [\"100\", \"nephew/niece\"],\r\n      [\"1000\", \"grandniece\"],\r\n      [\"12\", \"grandparent\"],\r\n      [\"120\", \"uncle/aunt\"],\r\n      [\"1200\", \"cousin\"],\r\n      [\"\", \"\"],\r\n    ]);\r\n    return new Map<string, string>();\r\n  };\r\n  setPath(prevPath: Array<[number, number]>) {\r\n    this._path = prevPath;\r\n  }\r\n  getParentId(nodeMap: Map<number, NodeEntity>) {\r\n    if (this._path.length - 2 < 0) {\r\n      return null;\r\n    }\r\n    const currId = this._path[this._path.length - 2][1];\r\n    const currNode = NodeEntity.getNode(currId, nodeMap);\r\n    if (\r\n      !(\r\n        this._children.includes(this._path[this._path.length - 2][1]) ||\r\n        currNode._undividedEstateSpouse === this._id\r\n      )\r\n    )\r\n      return this._path[this._path.length - 2][1];\r\n    return null;\r\n  }\r\n  getGenerationCount() {\r\n    let parentCount = 0;\r\n    if (this._path.length - 2 < 0) {\r\n      return 0;\r\n    }\r\n    for (let i = this._path.length - 2; i >= 0; i--) {\r\n      if (this._path[i][0] === ParentChildSelector.grandParent) {\r\n        parentCount += 1;\r\n        break;\r\n      } else {\r\n        parentCount += 1;\r\n      }\r\n    }\r\n    return parentCount;\r\n  }\r\n\r\n  add_child = (child: NodeEntity, add_for_both = true): void => {\r\n    const children_array = this._children;\r\n    const child_id = child._id;\r\n    if (!children_array.find((obj) => obj === child_id)) {\r\n      this._children.push(child_id);\r\n    }\r\n    child._path = [...this._path];\r\n    child._path.push([ParentChildSelector.child, child_id]);\r\n    child._level = this.getLevel(child._path);\r\n    if (add_for_both) {\r\n      if (!child._parents.find((obj) => obj === this._id)) {\r\n        child._parents.push(this._id);\r\n      }\r\n    }\r\n  };\r\n  /* eslint-disable @typescript-eslint/no-unused-vars */\r\n  add_parent = (\r\n    parent: NodeEntity,\r\n    add_for_both = true,\r\n    grandParent = false\r\n  ): void => {\r\n    const parents_array = this._parents;\r\n    const parent_id = parent._id;\r\n    if (!parents_array.find((obj) => obj === parent_id)) {\r\n      this._parents.push(parent_id);\r\n    }\r\n    parent._path = [...this._path];\r\n\r\n    parent._path.push([ParentChildSelector.parent, parent_id]);\r\n    parent._level = this.getLevel(parent._path);\r\n    if (parent._level === 2) {\r\n      parent._path[parent._path.length - 1][0] =\r\n        ParentChildSelector.grandParent;\r\n    }\r\n    if (add_for_both) {\r\n      if (!parent._children.find((obj) => obj === this._id)) {\r\n        parent._children.push(this._id);\r\n      }\r\n    }\r\n  };\r\n\r\n  getLatestPathKey = () => {\r\n    if (this._path.length == 0) {\r\n      throw new Error(\"Invalid Case\");\r\n    }\r\n    return this._path[this._path.length - 1][0];\r\n  };\r\n\r\n  getLevel = (path: Array<[number, number]>) => {\r\n    let level = 0;\r\n    path.map((x) => {\r\n      if (x[0] === ParentChildSelector.child) {\r\n        level = level - 1;\r\n      } else if (\r\n        x[0] === ParentChildSelector.parent ||\r\n        x[0] === ParentChildSelector.grandParent\r\n      ) {\r\n        level = level + 1;\r\n      } else {\r\n        level = level + 0;\r\n      }\r\n    });\r\n    return level;\r\n  };\r\n\r\n  static getNode = (id: number, nodeMap: Map<number, NodeEntity>) => {\r\n    const node: NodeEntity | undefined = nodeMap.get(id);\r\n    if (node == undefined) {\r\n      throw new Error(\"Node not found with given id:\" + id);\r\n    }\r\n    return node;\r\n  };\r\n\r\n  setPathforPartner = (partnerSelector: number, partner: NodeEntity) => {\r\n    partner._path = [...this._path];\r\n    partner._path.push([partnerSelector, partner._id]);\r\n  };\r\n  getChildUnprocessedNode() {\r\n    if (this._processChildNodePos < this._children.length) {\r\n      return this._children[this._processChildNodePos++];\r\n    }\r\n  }\r\n\r\n  has_surviving_spouse = () => {\r\n    if (this._spouse !== null) return true;\r\n    return false;\r\n  };\r\n\r\n  has_surviving_cohabitant = () => {\r\n    if (this._cohabitant !== null) return true;\r\n    return false;\r\n  };\r\n}\r\n","import Person from \"../ChatbotComponent/Helper/Classes/Person\";\r\nimport { NodeEntity } from \"./Helper/Classes/NodeEntity\";\r\nimport {\r\n  ChatStepTypes,\r\n  QuestionType,\r\n  undividedOwnershipType,\r\n} from \"./Helper/Enums/ChatStepTypes\";\r\nexport interface ChatbotInterface {\r\n  stepID: string;\r\n  person: NodeEntity;\r\n  testator: NodeEntity;\r\n  caseName: string;\r\n  netWealth: number;\r\n  successor_flag: string;\r\n  parent_flag: string;\r\n  temp_person: NodeEntity;\r\n  temp_child: NodeEntity;\r\n  temp_parent: NodeEntity;\r\n  personsMap: Map<number, Person>;\r\n  nodeMap: Map<number, NodeEntity>;\r\n  id: number;\r\n  undividedSpouseId: number;\r\n  deceasedParentsArray: Array<number>;\r\n  grandParent_flag: string;\r\n  rearChildrenResponse: boolean;\r\n  undividedEstate: {\r\n    undividedEstateChoice: boolean;\r\n    undivided_flag: string;\r\n    totalEstateValue: number;\r\n    undividedEstateSeparateWealth: number;\r\n    temp_first: number;\r\n    temp_last: number;\r\n    ownershipType: string;\r\n  };\r\n  tempMessages: any;\r\n  successorProcessArray: Array<[number, number]>;\r\n  isUndividedParent: boolean;\r\n  yesNoClickedFlag: boolean;\r\n}\r\n\r\nexport const ChatbotState: ChatbotInterface = {\r\n  stepID: ChatStepTypes.initalStep,\r\n  person: new NodeEntity(0, 0),\r\n  testator: new NodeEntity(0, 0),\r\n  caseName: \"\",\r\n  netWealth: 0,\r\n  successor_flag: QuestionType.initialQuestion,\r\n  parent_flag: QuestionType.initialQuestion,\r\n  temp_person: new NodeEntity(0, 0),\r\n  temp_child: new NodeEntity(0, 0),\r\n  temp_parent: new NodeEntity(0, 0),\r\n  personsMap: new Map(),\r\n  nodeMap: new Map(),\r\n  id: 1,\r\n  undividedSpouseId: 0,\r\n  deceasedParentsArray: [],\r\n  grandParent_flag: QuestionType.initialQuestion,\r\n  rearChildrenResponse: false,\r\n  undividedEstate: {\r\n    undividedEstateChoice: false,\r\n    undivided_flag: QuestionType.initialQuestion,\r\n    totalEstateValue: 0,\r\n    undividedEstateSeparateWealth: 0,\r\n    temp_first: 0,\r\n    temp_last: 0,\r\n    ownershipType: undividedOwnershipType.none,\r\n  },\r\n  tempMessages: [],\r\n  successorProcessArray: [],\r\n  isUndividedParent: false,\r\n  yesNoClickedFlag: false,\r\n};\r\n\r\nexport const InitialChatbotState: any = {\r\n  stepID: ChatStepTypes.initalStep,\r\n  person: new NodeEntity(0, 0),\r\n  testator: new NodeEntity(0, 0),\r\n  caseName: \"\",\r\n  netWealth: 0,\r\n  successor_flag: QuestionType.initialQuestion,\r\n  parent_flag: QuestionType.initialQuestion,\r\n  temp_person: new NodeEntity(0, 0),\r\n  temp_child: new NodeEntity(0, 0),\r\n  temp_parent: new NodeEntity(0, 0),\r\n  personsMap: new Map(),\r\n  nodeMap: new Map(),\r\n  id: 1,\r\n  deceasedParentsArray: [],\r\n  grandParent_flag: QuestionType.initialQuestion,\r\n  rearChildrenResponse: false,\r\n  undividedEstate: {\r\n    undividedEstateChoice: false,\r\n    undivided_flag: QuestionType.initialQuestion,\r\n    totalEstateValue: 0,\r\n    undividedEstateSeparateWealth: 0,\r\n    temp_first: 0,\r\n    temp_last: 0,\r\n  },\r\n  tempMessages: [],\r\n  successorProcessArray: [],\r\n  messages: [],\r\n};\r\n","export enum ValidationType {\r\n  emptyValue = 0,\r\n  invalidAmount = 1,\r\n  onlyDigit = 2,\r\n  incorrectValueForBoolean = 3,\r\n}\r\nexport enum DefaultWarningMessage {\r\n  emptyValueMessage = \"The field cannot be empty\",\r\n  onlyDigitMessage = \"Please enter only number.\",\r\n  errorForBooleanMessage = \"Please choose correct value or write 'yes/ja', 'no/nei'\",\r\n}\r\n","import { createChatBotMessage } from \"react-chatbot-kit\";\r\nimport OptionSelector from \"./Custom/Widgets/OptionSelector/OptionSelector\";\r\nimport InfoMessageWidget from \"./Custom/Widgets/InfoMessagesWidget/InfoMessagesWidget\";\r\nimport RearChildrenOptionSelector from \"./Custom/Widgets/RearChildrenOptionSelector/RearChildrenOptionSelector\";\r\nimport UndividedEstateWidget from \"./Custom/Widgets/UndividedEstateWidget/UndividedEstateWidget\";\r\nimport \"react-chatbot-kit/build/main.css\";\r\nimport \"../chatbot.scss\";\r\nimport ChatHeader from \"../OtherComponent/ChatHeader/ChatHeader\";\r\nimport { ChatbotState } from \"./Generics\";\r\nimport Norsk from \"../../../languages/translationNO.json\";\r\nimport { createIntl, createIntlCache } from \"react-intl\";\r\nconst cache = createIntlCache();\r\nconst intl = createIntl({ locale: \"nb-NO\", messages: Norsk }, cache);\r\n\r\nconst botName = \"Arvebot\";\r\nconst value = intl.formatMessage({ id: \"Chatbot.TESTATOR_QUESTION\" });\r\nconst config = {\r\n  botName: botName,\r\n  lang: \"no\",\r\n  customStyles: {\r\n    botMessageBox: {\r\n      backgroundColor: \"#376B7E\",\r\n    },\r\n    chatButton: {\r\n      backgroundColor: \"#5ccc9d\",\r\n    },\r\n  },\r\n  state: ChatbotState,\r\n  initialMessages: [createChatBotMessage(value, {})],\r\n  customComponents: {\r\n    header: (actionProvider) => <ChatHeader actionProvider={actionProvider} />,\r\n  },\r\n\r\n  widgets: [\r\n    {\r\n      widgetName: \"optionSelectorWidget\",\r\n      widgetFunc: (props) => <OptionSelector {...props} />,\r\n    },\r\n    {\r\n      widgetName: \"RearChildrenSelectorWidget\",\r\n      widgetFunc: (props) => <RearChildrenOptionSelector {...props} />,\r\n    },\r\n    {\r\n      widgetName: \"InfoMessage\",\r\n      widgetFunc: (props) => <InfoMessageWidget {...props} />,\r\n    },\r\n    {\r\n      widgetName: \"undividedEstateWidget\",\r\n      widgetFunc: (props) => <UndividedEstateWidget {...props} />,\r\n    },\r\n  ],\r\n};\r\nexport default config;\r\n","export enum BinaryAnswerTypeYes {\r\n  \"yes\",\r\n  \"ja\",\r\n}\r\n\r\nexport enum BinaryAnswerTypeNo {\r\n  \"no\",\r\n  \"nei\",\r\n}\r\n","import ActionProvider from \"../../ActionProvider\";\r\nimport { BinaryAnswerTypeNo, BinaryAnswerTypeYes } from \"../Enums/BinaryAnswerTypes\";\r\nimport { DefaultWarningMessage, ValidationType } from \"../Enums/ValidationType\";\r\nimport _ from \"lodash\";\r\n\r\nexport class ChatbotValidation {\r\n    constructor(private actionProvider: ActionProvider, private chatbotState: any) { }\r\n    validate = (message: string, validationTypes: Array<number>, warningMessage?: string): boolean => {\r\n\r\n        for (const validationType of validationTypes) {\r\n            if (warningMessage === undefined) {\r\n                warningMessage = this.getDefaultWarningMessage(validationType);\r\n            }\r\n            let validationResult = false;\r\n            switch (validationType) {\r\n                case ValidationType.emptyValue:\r\n                    validationResult = this.validateEmpty(message);\r\n                    break\r\n                case ValidationType.invalidAmount:\r\n                    validationResult = this.validateAmount(message);\r\n                    break\r\n                case ValidationType.onlyDigit:\r\n                    validationResult = this.validateDigit(message);\r\n                    break\r\n                case ValidationType.incorrectValueForBoolean:\r\n                    validationResult = this.validateValueForBoolean(message);\r\n                    break;\r\n                default:\r\n                    console.error(\"Invalid Validation type\")\r\n                    return false;\r\n            }\r\n            if (!validationResult && this.chatbotState) {\r\n                this.showWarning(warningMessage)\r\n                const messageCopy = _.cloneDeep(this.chatbotState.messages)\r\n                this.actionProvider.handleValidation(messageCopy);\r\n                return false;\r\n            } else {\r\n                this.hideWarning();\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    validateEmpty = (message: string) => {\r\n        //\r\n        if (message.length === 0) {\r\n            // remove last message\r\n            return false\r\n        }\r\n        return true;\r\n    }\r\n    // eslint-disable-next-line\r\n    validateAmount = (message: string) => {\r\n        return false\r\n    }\r\n\r\n    validateDigit = (message: string) => {\r\n        const checkNatural = /^(0|([1-9]\\d*))$/\r\n        if (checkNatural.test(message)) return true\r\n        return false\r\n    }\r\n\r\n    validateValueForBoolean = (message: string) => {\r\n        if (((message in BinaryAnswerTypeYes) || (message in BinaryAnswerTypeNo)) && !(message in [0, 1])) {\r\n            return true\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private showWarning = (warningMessage: string) => {\r\n        const warningDiv = document.getElementById(\"chatbot-warning-div\");\r\n        if (warningDiv) {\r\n            warningDiv.innerHTML = warningMessage\r\n            warningDiv.style.display = \"block\";\r\n            return;\r\n        }\r\n    }\r\n    private hideWarning = () => {\r\n        const warningDiv = document.getElementById(\"chatbot-warning-div\");\r\n        if (warningDiv) {\r\n            warningDiv.style.display = \"none\";\r\n            return;\r\n        }\r\n    }\r\n    getDefaultWarningMessage(validationType: ValidationType) {\r\n        switch (validationType) {\r\n            case ValidationType.emptyValue:\r\n                return DefaultWarningMessage.emptyValueMessage;\r\n            case ValidationType.incorrectValueForBoolean:\r\n                return \"error boolean message\"\r\n            // return DefaultWarningMessage.errorForBooleanMessage;\r\n            default:\r\n                return \"Improve error message in ChatbotType.ts\";\r\n        }\r\n    }\r\n\r\n\r\n}","import ActionProvider from \"./ActionProvider\";\r\nimport { ChatbotInterface } from \"./Generics\";\r\nimport { ChatStepTypes, QuestionType } from \"./Helper/Enums/ChatStepTypes\";\r\nimport { ValidationType } from \"./Helper/Enums/ValidationType\";\r\nimport { ChatbotValidation } from \"./Helper/Methods/ChatbotValidation\";\r\nimport { messageService } from \"./services/ChatbotCommunicator\";\r\nimport {\r\n  BinaryAnswerTypeYes,\r\n  BinaryAnswerTypeNo,\r\n} from \"../ChatbotComponent/Helper/Enums/BinaryAnswerTypes\";\r\n\r\nclass MessageParser {\r\n  actionProvider: ActionProvider;\r\n  state: any;\r\n  chatbotValidator: ChatbotValidation;\r\n  constructor(actionProvider: ActionProvider, state: any) {\r\n    this.actionProvider = actionProvider;\r\n    this.state = state;\r\n    this.chatbotValidator = new ChatbotValidation(actionProvider, state);\r\n    // this.setRevertListeners();\r\n  }\r\n\r\n  parse(message: string): ReturnType<() => void> {\r\n    message = message.trim();\r\n\r\n    const curState = this.state;\r\n    curState.yesNoClickedFlag = false;\r\n\r\n    // initialStep\r\n    if (curState.stepID === ChatStepTypes.initalStep) {\r\n      if (\r\n        this.chatbotValidator.validate(message, [ValidationType.emptyValue])\r\n      ) {\r\n        return this.actionProvider.handleTestator(message);\r\n      }\r\n      return;\r\n    }\r\n\r\n    //testatorStep\r\n    if (curState.stepID === ChatStepTypes.testatorStep) {\r\n      message = message.toLowerCase();\r\n      if (\r\n        this.chatbotValidator.validate(message, [\r\n          ValidationType.incorrectValueForBoolean,\r\n        ])\r\n      ) {\r\n        if (message in BinaryAnswerTypeYes) {\r\n          this.disableButtons();\r\n          return this.actionProvider.handleUndividedEstateChoice(true);\r\n        } else if (message in BinaryAnswerTypeNo) {\r\n          this.disableButtons();\r\n          return this.actionProvider.handleUndividedEstateChoice(false);\r\n        } else {\r\n          alert(\"check for error\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // undividedEstateStep\r\n    if (curState.stepID === ChatStepTypes.undividedEstateStep) {\r\n      if (curState.undividedEstate.undivided_flag === QuestionType.part1) {\r\n        return this.actionProvider.handleTotalEstateValueResponse(message);\r\n      }\r\n      if (curState.undividedEstate.undivided_flag === QuestionType.part2) {\r\n        return this.actionProvider.handleOwnershipResponse(message);\r\n      }\r\n      if (curState.undividedEstate.undivided_flag === QuestionType.part3) {\r\n        return this.actionProvider.handleDelvisFirstResponse(message);\r\n      }\r\n      if (curState.undividedEstate.undivided_flag === QuestionType.part4) {\r\n        return this.actionProvider.handleDelvisSecondResponse(message);\r\n      }\r\n      if (curState.undividedEstate.undivided_flag === QuestionType.part5) {\r\n        return this.actionProvider.handleFulltSaereieResponse(message);\r\n      }\r\n      if (curState.undividedEstate.undivided_flag === QuestionType.part6) {\r\n        if (curState.successor_flag === QuestionType.part1) {\r\n          return this.actionProvider.handleSuccessorInput(message);\r\n        } else if (curState.successor_flag === QuestionType.part2) {\r\n          message = message.toLowerCase();\r\n          if (\r\n            this.chatbotValidator.validate(message, [\r\n              ValidationType.incorrectValueForBoolean,\r\n            ])\r\n          ) {\r\n            if (message in BinaryAnswerTypeYes) {\r\n              this.disableButtons();\r\n              return this.actionProvider.handleChildAliveOption(true);\r\n            } else if (message in BinaryAnswerTypeNo) {\r\n              this.disableButtons();\r\n              return this.actionProvider.handleChildAliveOption(false);\r\n            } else {\r\n              alert(\"check for error\");\r\n            }\r\n          }\r\n        } else if (curState.successor_flag === QuestionType.part3) {\r\n          if (\r\n            this.chatbotValidator.validate(message, [\r\n              ValidationType.emptyValue,\r\n              ValidationType.onlyDigit,\r\n            ])\r\n          ) {\r\n            return this.actionProvider.handleSuccessorCount(message);\r\n          } else {\r\n            // remove last message and update stepid\r\n            // return this.actionProvider.handleValidation();\r\n          }\r\n        }\r\n        if (curState.parent_flag === QuestionType.part1) {\r\n          return this.actionProvider.handleParentsInput(message);\r\n        } else if (curState.parent_flag == QuestionType.part2) {\r\n          message = message.toLowerCase();\r\n          if (\r\n            this.chatbotValidator.validate(message, [\r\n              ValidationType.incorrectValueForBoolean,\r\n            ])\r\n          ) {\r\n            if (message in BinaryAnswerTypeYes) {\r\n              this.disableButtons();\r\n              return this.actionProvider.handleParentAliveOption(true);\r\n            } else if (message in BinaryAnswerTypeNo) {\r\n              this.disableButtons();\r\n              return this.actionProvider.handleParentAliveOption(false);\r\n            } else {\r\n              alert(\"check for error\");\r\n            }\r\n          }\r\n        }\r\n        return this.actionProvider.handleUndividedEstateSpouse(message);\r\n      } else {\r\n        return this.actionProvider.handleNetWealth(message);\r\n      }\r\n    }\r\n\r\n    // netWealthStep\r\n    if (curState.stepID === ChatStepTypes.netWealthStep) {\r\n      return this.actionProvider.handleNetWealth(message);\r\n    }\r\n\r\n    // underAgeStep\r\n    if (curState.stepID === ChatStepTypes.underAgeStep) {\r\n      message = message.toLowerCase();\r\n      if (\r\n        this.chatbotValidator.validate(message, [\r\n          ValidationType.incorrectValueForBoolean,\r\n        ])\r\n      ) {\r\n        if (message in BinaryAnswerTypeYes) {\r\n          this.disableButtons();\r\n          return this.actionProvider.handleUnderAge(true);\r\n        } else if (message in BinaryAnswerTypeNo) {\r\n          this.disableButtons();\r\n          return this.actionProvider.handleUnderAge(false);\r\n        } else {\r\n          alert(\"check for error\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // spouse start\r\n    if (curState.stepID === ChatStepTypes.spouseChoice) {\r\n      message = message.toLowerCase();\r\n      if (\r\n        this.chatbotValidator.validate(message, [\r\n          ValidationType.incorrectValueForBoolean,\r\n        ])\r\n      ) {\r\n        if (message in BinaryAnswerTypeYes) {\r\n          this.disableButtons();\r\n          return this.actionProvider.handleSpouseChoice(true);\r\n        } else if (message in BinaryAnswerTypeNo) {\r\n          this.disableButtons();\r\n          return this.actionProvider.handleSpouseChoice(false);\r\n        } else {\r\n          alert(\"check for error\");\r\n        }\r\n      }\r\n    }\r\n    if (curState.stepID === ChatStepTypes.spouseStep) {\r\n      if (\r\n        this.chatbotValidator.validate(message, [ValidationType.emptyValue])\r\n      ) {\r\n        return this.actionProvider.handleSpouseInput(message);\r\n      }\r\n    }\r\n    // spouse end\r\n\r\n    // cohabitant start\r\n    if (curState.stepID === ChatStepTypes.cohabitantChoice) {\r\n      message = message.toLowerCase();\r\n      if (\r\n        this.chatbotValidator.validate(message, [\r\n          ValidationType.incorrectValueForBoolean,\r\n        ])\r\n      ) {\r\n        if (message in BinaryAnswerTypeYes) {\r\n          this.disableButtons();\r\n          return this.actionProvider.handleCohabitantChoice(true);\r\n        } else if (message in BinaryAnswerTypeNo) {\r\n          this.disableButtons();\r\n          return this.actionProvider.handleCohabitantChoice(false);\r\n        } else {\r\n          alert(\"check for error\");\r\n        }\r\n      }\r\n    }\r\n\r\n    if (curState.stepID === ChatStepTypes.cohabitantStep) {\r\n      return this.actionProvider.handleCohabitantInput(message); //set stepID = 7\r\n    }\r\n\r\n    //  cohabitant end\r\n\r\n    // successorStep\r\n    if (curState.stepID === ChatStepTypes.successorStep) {\r\n      if (curState.successor_flag === QuestionType.part1) {\r\n        return this.actionProvider.handleSuccessorInput(message);\r\n      } else if (curState.successor_flag === QuestionType.part2) {\r\n        message = message.toLowerCase();\r\n        if (\r\n          this.chatbotValidator.validate(message, [\r\n            ValidationType.incorrectValueForBoolean,\r\n          ])\r\n        ) {\r\n          if (message in BinaryAnswerTypeYes) {\r\n            this.disableButtons();\r\n            return this.actionProvider.handleChildAliveOption(true);\r\n          } else if (message in BinaryAnswerTypeNo) {\r\n            this.disableButtons();\r\n            return this.actionProvider.handleChildAliveOption(false);\r\n          } else {\r\n            alert(\"check for error\");\r\n          }\r\n        }\r\n      } else if (curState.successor_flag === QuestionType.part3) {\r\n        if (\r\n          this.chatbotValidator.validate(message, [\r\n            ValidationType.emptyValue,\r\n            ValidationType.onlyDigit,\r\n          ])\r\n        ) {\r\n          return this.actionProvider.handleSuccessorCount(message);\r\n        } else {\r\n          return;\r\n          // remove last message and update stepid\r\n          // return this.actionProvider.handleValidation();\r\n        }\r\n      }\r\n    }\r\n\r\n    //  parentsStep\r\n    if (curState.stepID === ChatStepTypes.parentsStep) {\r\n      if (curState.successor_flag === QuestionType.part1) {\r\n        return this.actionProvider.handleSuccessorInput(message);\r\n      } else if (curState.successor_flag === QuestionType.part2) {\r\n        message = message.toLowerCase();\r\n        if (\r\n          this.chatbotValidator.validate(message, [\r\n            ValidationType.incorrectValueForBoolean,\r\n          ])\r\n        ) {\r\n          if (message in BinaryAnswerTypeYes) {\r\n            this.disableButtons();\r\n            return this.actionProvider.handleChildAliveOption(true);\r\n          } else if (message in BinaryAnswerTypeNo) {\r\n            this.disableButtons();\r\n            return this.actionProvider.handleChildAliveOption(false);\r\n          } else {\r\n            alert(\"check for error\");\r\n          }\r\n        }\r\n      } else if (curState.successor_flag === QuestionType.part3) {\r\n        if (\r\n          this.chatbotValidator.validate(message, [\r\n            ValidationType.emptyValue,\r\n            ValidationType.onlyDigit,\r\n          ])\r\n        ) {\r\n          return this.actionProvider.handleSuccessorCount(message);\r\n        } else {\r\n          return;\r\n        }\r\n      }\r\n      if (curState.parent_flag === QuestionType.part1) {\r\n        return this.actionProvider.handleParentsInput(message);\r\n      } else if (curState.parent_flag == QuestionType.part2) {\r\n        message = message.toLowerCase();\r\n        if (\r\n          this.chatbotValidator.validate(message, [\r\n            ValidationType.incorrectValueForBoolean,\r\n          ])\r\n        ) {\r\n          if (message in BinaryAnswerTypeYes) {\r\n            this.disableButtons();\r\n            return this.actionProvider.handleParentAliveOption(true);\r\n          } else if (message in BinaryAnswerTypeNo) {\r\n            this.disableButtons();\r\n            return this.actionProvider.handleParentAliveOption(false);\r\n          } else {\r\n            alert(\"check for error\");\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // marriedParentsStep\r\n    if (curState.stepID === ChatStepTypes.marriedParentsStep) {\r\n      message = message.toLowerCase();\r\n      if (\r\n        this.chatbotValidator.validate(message, [\r\n          ValidationType.incorrectValueForBoolean,\r\n        ])\r\n      ) {\r\n        if (message in BinaryAnswerTypeYes) {\r\n          this.disableButtons();\r\n          return this.actionProvider.handleMarriedParents(true);\r\n        } else if (message in BinaryAnswerTypeNo) {\r\n          this.disableButtons();\r\n          return this.actionProvider.handleMarriedParents(false);\r\n        } else {\r\n          alert(\"check for error\");\r\n        }\r\n      }\r\n    }\r\n\r\n    // grandParentStep\r\n    if (curState.stepID === ChatStepTypes.grandParentStep) {\r\n      if (curState.successor_flag === QuestionType.part1) {\r\n        return this.actionProvider.handleSuccessorInput(message);\r\n      } else if (curState.successor_flag === QuestionType.part2) {\r\n        message = message.toLowerCase();\r\n        if (\r\n          this.chatbotValidator.validate(message, [\r\n            ValidationType.incorrectValueForBoolean,\r\n          ])\r\n        ) {\r\n          if (message in BinaryAnswerTypeYes) {\r\n            this.disableButtons();\r\n            return this.actionProvider.handleChildAliveOption(true);\r\n          } else if (message in BinaryAnswerTypeNo) {\r\n            this.disableButtons();\r\n            return this.actionProvider.handleChildAliveOption(false);\r\n          } else {\r\n            alert(\"check for error\");\r\n          }\r\n        }\r\n      } else if (curState.successor_flag === QuestionType.part3) {\r\n        if (\r\n          this.chatbotValidator.validate(message, [\r\n            ValidationType.emptyValue,\r\n            ValidationType.onlyDigit,\r\n          ])\r\n        ) {\r\n          return this.actionProvider.handleSuccessorCount(message);\r\n        } else {\r\n          return;\r\n          // remove last message and update stepid\r\n          // return this.actionProvider.handleValidation();\r\n        }\r\n      }\r\n      if (curState.parent_flag === QuestionType.part1) {\r\n        return this.actionProvider.handleParentsInput(message);\r\n      } else if (curState.parent_flag == QuestionType.part2) {\r\n        message = message.toLowerCase();\r\n        if (\r\n          this.chatbotValidator.validate(message, [\r\n            ValidationType.incorrectValueForBoolean,\r\n          ])\r\n        ) {\r\n          if (message in BinaryAnswerTypeYes) {\r\n            this.disableButtons();\r\n            return this.actionProvider.handleParentAliveOption(true);\r\n          } else if (message in BinaryAnswerTypeNo) {\r\n            this.disableButtons();\r\n            return this.actionProvider.handleParentAliveOption(false);\r\n          } else {\r\n            alert(\"check for error\");\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // finalStep\r\n    if (curState.stepID === ChatStepTypes.finalStep) {\r\n      message = message.toLowerCase();\r\n      if (\r\n        this.chatbotValidator.validate(message, [\r\n          ValidationType.incorrectValueForBoolean,\r\n        ])\r\n      ) {\r\n        if (message in BinaryAnswerTypeYes) {\r\n          this.disableButtons();\r\n          return this.actionProvider.handleFinalQuestion(true);\r\n        } else if (message in BinaryAnswerTypeNo) {\r\n          this.disableButtons();\r\n          return this.actionProvider.handleFinalQuestion(false);\r\n        } else {\r\n          alert(\"check for error\");\r\n        }\r\n      }\r\n      // return this.actionProvider.handleFinalQuestion(message)\r\n    }\r\n    // else {\r\n    //   return this.actionProvider.handleDefault();\r\n    //   return;\r\n    // }\r\n  }\r\n\r\n  disableButtons = () => {\r\n    const buttonElements: any = document.getElementsByClassName(\r\n      \"option-selector-button\"\r\n    );\r\n    for (let i = 0; i < buttonElements.length; i++) {\r\n      const currentElement = buttonElements[i];\r\n      if (!currentElement.disabled) currentElement.disabled = true;\r\n      currentElement.style.pointerEvents = \"none\";\r\n    }\r\n  };\r\n\r\n  setRevertListeners = () => {\r\n    messageService.clearAllInternalSubscription();\r\n    /* eslint-disable @typescript-eslint/no-unused-vars */\r\n    const subscription = messageService\r\n      .getMessageInChatbot()\r\n      .subscribe((message) => {\r\n        this.revertState();\r\n      });\r\n    messageService.addInternalSubscription(subscription);\r\n  };\r\n  revertState = () => {\r\n    const lastState = messageService.removePreviousState();\r\n    console.log(\"setting state:\");\r\n    console.log(lastState);\r\n\r\n    const previousStates: any = messageService.getPreviousStates();\r\n    console.log(\"previous States:\");\r\n    console.log(previousStates);\r\n\r\n    if (lastState) {\r\n      this.actionProvider.setState((state: any) => {\r\n        state = lastState;\r\n        console.log(\"final state\");\r\n        console.log(state);\r\n\r\n        return state;\r\n      });\r\n    }\r\n  };\r\n  flagSwitch = (curState: ChatbotInterface, message: any) => {\r\n    if (curState.successor_flag === QuestionType.part1) {\r\n      return this.actionProvider.handleSuccessorInput(message);\r\n    } else if (curState.successor_flag === QuestionType.part2)\r\n      return this.actionProvider.handleChildAliveOption(message);\r\n    else if (curState.successor_flag === QuestionType.part3) {\r\n      if (\r\n        this.chatbotValidator.validate(message, [\r\n          ValidationType.emptyValue,\r\n          ValidationType.onlyDigit,\r\n        ])\r\n      ) {\r\n        return this.actionProvider.handleSuccessorCount(message);\r\n      } else {\r\n        // remove last message and update stepid\r\n        // return this.actionProvider.handleValidation();\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n}\r\n\r\nexport default MessageParser;\r\n// function dispatch(arg0: { type: string; payload: any; }) {\r\n//   throw new Error(\"Function not implemented.\");\r\n// }\r\n","import { ReactElement, useRef, useState } from \"react\";\r\nimport Popover from \"@mui/material/Popover\";\r\nimport \"./ShowInfoWidget.scss\";\r\nimport LiveHelpIcon from '@mui/icons-material/LiveHelp';\r\nimport makeStyles from '@mui/styles/makeStyles';\r\nimport { FormattedMessage } from \"react-intl\";\r\nimport { useTheme } from \"@mui/material/styles\";\r\n// import { Typography } from \"@mui/material\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  popover: {\r\n    pointerEvents: \"none\",\r\n  },\r\n  paper: {\r\n    padding: useTheme().spacing(1),\r\n    backgroundColor: \"#e8e4c9\",\r\n  },\r\n}));\r\n\r\nconst ShowInfoWidget = (props: any): ReactElement => {\r\n  const classes = useStyles();\r\n  /*\r\n   used reference to parent element for correcting the scrollbar conflict issue on popover show.\r\n   https://stackoverflow.com/questions/53985436/material-ui-unblock-scrolling-when-popover-is-opened\r\n  */\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n  const handlePopoverOpen = (event: any) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handlePopoverClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const open = Boolean(anchorEl);\r\n  return (\r\n    <div className=\"infoDiv\" ref={containerRef}>\r\n      <LiveHelpIcon\r\n        className=\"InfoWidgetIcon\"\r\n        onMouseEnter={handlePopoverOpen}\r\n        onMouseLeave={handlePopoverClose}\r\n        aria-owns={open ? \"mouse-over-popover\" : undefined}\r\n        aria-haspopup=\"true\"\r\n      />\r\n\r\n      <Popover\r\n        id=\"mouse-over-popover\"\r\n        className={classes.popover}\r\n        classes={{\r\n          paper: classes.paper,\r\n        }}\r\n        open={open}\r\n        anchorEl={anchorEl}\r\n        anchorOrigin={{\r\n          vertical: \"bottom\",\r\n          horizontal: \"right\",\r\n        }}\r\n        transformOrigin={{\r\n          vertical: \"bottom\",\r\n          horizontal: \"left\",\r\n        }}\r\n        onClose={handlePopoverClose}\r\n        disableRestoreFocus\r\n        container={containerRef.current}\r\n      >\r\n        <FormattedMessage id={props.text} />\r\n      </Popover>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ShowInfoWidget;\r\n","import { ReactElement } from \"react\";\r\nimport { FormattedMessage } from \"react-intl\";\r\nimport ShowInfoWidget from \"../../Custom/Widgets/ShowInfoWidget/ShowInfoWidget\";\r\n\r\nclass QuestionConstants {\r\n\r\n  TestatorQuestion = (<FormattedMessage id=\"Chatbot.TESTATOR_QUESTION\" />);\r\n\r\n  UndividedEstateQuestion = (\r\n    <FormattedMessage id=\"Chatbot.UNDIVIDED_ESTATE_QUESTION\" />\r\n  );\r\n\r\n  YesNoWidgetOptions = {\r\n    widget: \"optionSelectorWidget\",\r\n    withAvatar: true,\r\n    loading: true,\r\n    terminateLoading: true,\r\n  };\r\n\r\n  UndividedEstateResultText = (selectedOption: string): ReactElement => {\r\n    const undividedEstateResultText = (selectedOption === \"true\")\r\n      ? \"Chatbot.Yes\"\r\n      : \"Chatbot.No\";\r\n    return <FormattedMessage id={undividedEstateResultText} />;\r\n  };\r\n\r\n  NetWealthQuestion = (\r\n    <div>\r\n      <FormattedMessage id=\"Chatbot.NET_WEALTH_QUESTION\" />\r\n      <ShowInfoWidget text=\"Chatbot.NET_WEALTH_EXTRA_INFO\" />\r\n    </div>\r\n  );\r\n\r\n  NetWealthWarning = (<FormattedMessage id=\"Chatbot.NET_WEALTH_WARNING\" />);\r\n\r\n  UnderAgeQuestion = (<FormattedMessage id=\"Chatbot.UNDER_AGE_QUESTION\" />);\r\n\r\n  UnderAgeResultText = (selectedOption: boolean): ReactElement => {\r\n    const underAgeResultText = selectedOption\r\n      ? \"Chatbot.UnderAge\"\r\n      : \"Chatbot.NotUnderAge\";\r\n\r\n    return <FormattedMessage id={underAgeResultText} />;\r\n  };\r\n\r\n\r\n  SpouseChoiceQuestion = (<FormattedMessage id=\"Chatbot.SPOUSE_EXIST_QUESTION\" />);\r\n\r\n\r\n  SpouseQuestion = (<FormattedMessage id=\"Chatbot.SPOUSE_QUESTION\" />);\r\n\r\n\r\n  CohabitantChoiceQuestion = (<FormattedMessage id=\"Chatbot.COHABITANT_EXIST_QUESTION\" />);\r\n\r\n  CohabitantQuestion = (\r\n    <div>\r\n      <FormattedMessage id=\"Chatbot.COHABITANT_QUESTION\" />\r\n      <ShowInfoWidget text=\"Chatbot.COHABITANT_EXTRA_INFO\" />\r\n    </div>\r\n  );\r\n\r\n  addSuccessorQuestion1 = (person_id: string): ReactElement => {\r\n    return (\r\n      <div>\r\n        <FormattedMessage\r\n          id=\"Chatbot.addSuccessorQn1\"\r\n          values={{ person_ID: <strong>{person_id}</strong> }}\r\n        />\r\n        <ShowInfoWidget text=\"Chatbot.CHILD_EXTRA_INFO\" />\r\n      </div>\r\n    );\r\n  };\r\n  addSuccessorQuestion2 = (\r\n    person_id: string,\r\n    child_id_string: ReactElement\r\n  ): ReactElement => {\r\n    return (\r\n      <div>\r\n        <FormattedMessage\r\n          id=\"Chatbot.addSuccessorQn2\"\r\n          values={{ person_ID: <strong>{person_id}</strong>, children_IDs: child_id_string }}\r\n        />\r\n        <ShowInfoWidget text=\"Chatbot.CHILD_EXTRA_INFO\" />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  AliveQuestion = (child_id: string): ReactElement => {\r\n    return (\r\n      <FormattedMessage\r\n        id=\"Chatbot.ALIVE_CHILD\"\r\n        values={{ child_ID: child_id }}\r\n      />\r\n    );\r\n  };\r\n\r\n  AliveResultText = (selectedOption: string): ReactElement => {\r\n    const aliveResultText = selectedOption ? \"Chatbot.Yes\" : \"Chatbot.No\";\r\n\r\n    return <FormattedMessage id={aliveResultText} />;\r\n  };\r\n\r\n\r\n  addParentsQuestion1 = (person_id: string): ReactElement => {\r\n    return (\r\n      <div>\r\n        <FormattedMessage\r\n          id=\"Chatbot.addParentsQn1\"\r\n          values={{ person_ID: <strong>{person_id}</strong> }}\r\n        />\r\n        <ShowInfoWidget text=\"Chatbot.PARENT_EXTRA_INFO\" />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  askSecondParentChoiceQuestion = (person_id: string): ReactElement => {\r\n    return (\r\n      <div>\r\n        <FormattedMessage id=\"Chatbot.SecondParentChoice\" values={{ person_ID: <strong>{person_id}</strong> }} />\r\n      </div>\r\n\r\n    )\r\n  }\r\n\r\n  addParentsQuestion2 = (\r\n    person_id: string,\r\n    parent_id_string: ReactElement\r\n  ): ReactElement => {\r\n    return (\r\n      <div>\r\n        <FormattedMessage\r\n          id=\"Chatbot.addParentsQn2\"\r\n          values={{ person_ID: <strong>{person_id}</strong>, parents_IDs: parent_id_string }}\r\n        />\r\n        <ShowInfoWidget text=\"Chatbot.PARENT_EXTRA_INFO\" />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  MarriedParents1 = (\r\n    first_parent_id: string,\r\n    second_parent_id: string\r\n  ): ReactElement => {\r\n    return (\r\n      <div>\r\n        <FormattedMessage\r\n          id=\"Chatbot.marriedParents1\"\r\n          values={{ parent1_ID: <strong>{first_parent_id}</strong>, parent2_ID: <strong>{second_parent_id}</strong> }}\r\n        />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  MarriedParents2 = (\r\n    first_parent_id: string,\r\n    second_parent_id: string\r\n  ): ReactElement => {\r\n    return (\r\n      <div>\r\n        <FormattedMessage\r\n          id=\"Chatbot.marriedParents2\"\r\n          values={{ parent1_ID: <strong>{first_parent_id}</strong>, parent2_ID: <strong>{second_parent_id}</strong> }}\r\n        />\r\n      </div>\r\n    );\r\n  };\r\n\r\n\r\n  addGrandParentsQuestion1 = (parent_id: string): ReactElement => {\r\n    return (<div>\r\n      <FormattedMessage\r\n        id=\"Chatbot.addGrandParentQn1\"\r\n        values={{ parent_id: <strong>{parent_id}</strong> }}\r\n      />\r\n    </div>)\r\n  }\r\n\r\n\r\n  addGrandParentsQuestion2 = (parent_id: string, grandparent_id_string: ReactElement): ReactElement => {\r\n    return (<div>\r\n      <FormattedMessage\r\n        id=\"Chatbot.addGrandParentQn2\"\r\n        values={{ parent_id: <strong>{parent_id}</strong>, grandParents_IDs: grandparent_id_string }}\r\n      />\r\n    </div>)\r\n  }\r\n\r\n  FinalQuestion = (<FormattedMessage id=\"Chatbot.FINAL_QUESTION\" />);\r\n\r\n  EmptyQuestion = <p></p>\r\n  DefaultText = (<FormattedMessage id=\"Chatbot.DEFAULT_TEXT\" />);\r\n\r\n\r\n\r\n  // UndividedEstateStart\r\n\r\n  TotalEstateNetValueQuestion = (\r\n    <div>\r\n      <FormattedMessage id=\"Chatbot.TOTAL_ESTATE_NET_VALUE_QUESTION\" />\r\n      <ShowInfoWidget text=\"Chatbot.TOTAL_ESTATE_NET_VALUE_EXTRA_INFO\" />\r\n    </div>\r\n  );\r\n\r\n  TotalEstateNetValueWarning = (<FormattedMessage id=\"Chatbot.NET_WEALTH_WARNING\" />);\r\n\r\n\r\n  OwnershipTypeQuestion = (<FormattedMessage id=\"Chatbot.FELLESEIE_QUESTION\" />)\r\n\r\n  OwnershipQuestionWidgetOptions = {\r\n    widget: \"undividedEstateWidget\",\r\n    withAvatar: true,\r\n    loading: true,\r\n    terminateLoading: true,\r\n  }\r\n\r\n  OwnershipTypeWarning = <FormattedMessage id=\"Chatbot.OptionChoiceWrongWarning\" />\r\n\r\n  DelvisFirstQuestion = (\r\n    <div>\r\n      <FormattedMessage id=\"Chatbot.DELVIS_SAEREIE_FIRST_QUESTION\" />\r\n      <ShowInfoWidget text=\"Chatbot.DELVIS_SAEREIE_FIRST_EXTRA_INFO\" />\r\n    </div>\r\n  );\r\n\r\n  DelvisSecondQuestion = (\r\n    <div>\r\n      <FormattedMessage id=\"Chatbot.DELVIS_SAEREIE_LAST_QUESTION\" />\r\n      <ShowInfoWidget text=\"Chatbot.DELVIS_SAEREIE_LAST_EXTRA_INFO\" />\r\n    </div>\r\n  );\r\n\r\n  FulltSaereieQuestion = (\r\n    <div>\r\n      <FormattedMessage id=\"Chatbot.FULLT_SAEREIE_QUESTION\" />\r\n      <ShowInfoWidget text=\"Chatbot.FULLT_SAEREIE_EXTRA_INFO\" />\r\n    </div>\r\n  );\r\n\r\n  UndividedEstateSpouseQuestion = (<div>\r\n    <FormattedMessage id=\"Chatbot.UNDIVIDED_SPOUSE_QUESTION\" />\r\n  </div>)\r\n\r\n  TextBeforeSucsrUndvdSpouse = (<div><FormattedMessage id=\"Chatbot.TextBeforeSucsrUndvdSpouse\" /></div>)\r\n\r\n  // UndividedEstateEnd\r\n  addSuccessorCount = (person_id: string): ReactElement => {\r\n    return (\r\n      <div>\r\n        <FormattedMessage\r\n          id=\"Chatbot.addSuccessorCount\"\r\n          values={{ person_ID: <strong>{person_id}</strong> }}\r\n        />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  addSuccessorOfParentCount = (person_id: string, existing_child_id: ReactElement): ReactElement => {\r\n    return (\r\n      <div>\r\n        <FormattedMessage id=\"Chatbot.addSuccessorCountExistingParent\"\r\n          values={{ person_ID: <strong>{person_id}</strong>, existing_child_ID: <strong>{existing_child_id}</strong> }} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default QuestionConstants;\r\n","export default class InheritanceConstants {\r\n  DESC_COHABITANT_WITHOUT_COMMON_CHILD =\r\n    \"Arvelater har ikke felles barn med samboer og vedkommende har ikke krav på arv (MED MINDRE DE VENTER FELLES BARN!).\";\r\n  DESC_NO_SPOUSE_OR_COHABITANT =\r\n    \"Arvelater etterlater hverken ektefelle eller samboer.\";\r\n  DESC_COHABITANT_NO_CLOSE_RELATIVES_2 =\r\n    \"Arvelaters nærmeste gjenlevende slektning er i tredje arvegangsklasse, men etterkommer av barnebarn av arvelaters besteforeldre. Hele arven går da til gjenlevende samboer med felles barn.\";\r\n  DESC_COHABITANT_NO_CLOSE_RELATIVES =\r\n    \"Arvelater har ingen gjenlevende slektninger i de tre første arvegangsklassene. Hele arven går da til gjenlevende samboer med felles barn.\";\r\n  DESC_SPOUSE_NO_CLOSE_RELATIVES_2 =\r\n    \"Arvelaters nærmeste gjenlevende slektning er i andre arvegangsklasse, men etterkommer av barnebarn av arvelaters besteforeldre. Hele arven går da til gjenlevende ektefellep.\";\r\n  DESC_SPOUSE_NO_CLOSE_RELATIVES =\r\n    \"Arvelater har ingen gjenlevende slektninger i de to første arvegangsklassene. Hele arven går da til gjenlevende ektefelle.\";\r\n\r\n  G = 101351;\r\n  MINIMUM_INHERITANCE_SPOUSE_VS_CHILDREN = 4 * this.G;\r\n  FRACTION_INHERITANCE_SPOUSE_VS_CHILDREN = 1 / 4;\r\n  MINIMUM_INHERITANCE_SPOUSE_VS_PARENTS = 6 * this.G;\r\n  FRACTION_INHERITANCE_SPOUSE_VS_PARENTS = 1 / 2;\r\n  MINIMUM_INHERITANCE_COHABITANT_VS_CHILDREN = 4 * this.G;\r\n  FRACTION_INHERITANCE_COHABITANT_VS_CHILDREN = 0;\r\n  MINIMUM_INHERITANCE_COHABITANT_VS_PARENTS = 4 * this.G;\r\n  FRACTION_INHERITANCE_COHABITANT_VS_PARENTS = 0;\r\n  FRACTION_PLIKTDEL = 2 / 3;\r\n  LINE_MAXIMUM_PLIKTDEL = 15 * this.G;\r\n\r\n  LAW_LINKS = {\r\n    \"4\": [\r\n      \"https://lovdata.no/dokument/NL/lov/2019-06-14-21/KAPITTEL_2-1#%C2%A74\",\r\n      \"https://lovdata.no/NL/lov/2019-06-14-21/§4\",\r\n    ],\r\n    \"5\": [\r\n      \"https://lovdata.no/dokument/NL/lov/2019-06-14-21/KAPITTEL_2-1#%C2%A75\",\r\n      \"https://lovdata.no/NL/lov/2019-06-14-21/§5\",\r\n    ],\r\n    \"6\": [\r\n      \"https://lovdata.no/dokument/NL/lov/2019-06-14-21/KAPITTEL_2-1#%C2%A76\",\r\n      \"https://lovdata.no/NL/lov/2019-06-14-21/§6\",\r\n    ],\r\n    \"7\": [\r\n      \"https://lovdata.no/dokument/NL/lov/2019-06-14-21/KAPITTEL_2-1#%C2%A77\",\r\n      \"https://lovdata.no/NL/lov/2019-06-14-21/§7\",\r\n    ],\r\n    \"8\": [\r\n      \"https://lovdata.no/dokument/NL/lov/2019-06-14-21/KAPITTEL_2-2#%C2%A78\",\r\n      \"https://lovdata.no/NL/lov/2019-06-14-21/§8\",\r\n    ],\r\n    \"9\": [\r\n      \"https://lovdata.no/dokument/NL/lov/2019-06-14-21/KAPITTEL_2-2#%C2%A79\",\r\n      \"https://lovdata.no/NL/lov/2019-06-14-21/§9\",\r\n    ],\r\n    \"10\": [\r\n      \"https://lovdata.no/dokument/NL/lov/2019-06-14-21/KAPITTEL_2-2#%C2%A710\",\r\n      \"https://lovdata.no/NL/lov/2019-06-14-21/§10\",\r\n    ],\r\n    \"12\": [\r\n      \"https://lovdata.no/dokument/NL/lov/2019-06-14-21/KAPITTEL_2-3#%C2%A712\",\r\n      \"https://lovdata.no/NL/lov/2019-06-14-21/§12\",\r\n    ],\r\n    \"50\": [\r\n      \"https://lovdata.no/dokument/NL/lov/2019-06-14-21/KAPITTEL_2-6-3#%C2%A750\",\r\n      \"https://lovdata.no/NL/lov/2019-06-14-21/§50\",\r\n    ],\r\n    \"75\": [\r\n      \"https://lovdata.no/dokument/NL/lov/2019-06-14-21/KAPITTEL_2-8#%C2%A775\",\r\n      \"https://lovdata.no/NL/lov/2019-06-14-21/§75\",\r\n    ],\r\n    \"76\": [\r\n      \"https://lovdata.no/dokument/NL/lov/2019-06-14-21/KAPITTEL_2-9#%C2%A776\",\r\n      \"https://lovdata.no/NL/lov/2019-06-14-21/§76\",\r\n    ],\r\n  };\r\n\r\n  CODE_PARAGRAPHS = {\r\n    \"4 første og annet ledd\":\r\n      \"De nærmeste slektsarvingene er arvelaterens livsarvinger.\\n\\nArven deles likt mellom arvelaterens barn, om ikke noe annet følger av særskilte lovregler. Hvis et barn er død, går dette barnets del av arven til barnets livsarvinger med lik andel på hver gren. På samme måte arver fjernere livsarvinger. Hvis et barn er død og ikke etterlater seg livsarvinger, går dette barnets del av arven til de andre barna eller deres livsarvinger med lik andel på hver gren.\",\r\n    \"5 første, andre og tredje ledd\":\r\n      \"Hvis arvelateren ikke har livsarvinger, går arven til foreldrene.\\n\\nForeldrene arver likt. Hvis en forelder er død, går denne forelderens del av arven til hans eller hennes livsarvinger med lik andel på hver gren.\\n\\nHvis den ene av foreldrene er død uten å etterlate seg livsarvinger, går hele arven til den andre forelderen eller til hans eller hennes livsarvinger med lik andel på hver gren. Dør arvelateren før fylte 25 år, går likevel halvparten av arven til besteforeldrene på den døde forelderens side eller til deres livsarvinger i samsvar med § 6 dersom foreldrene verken var gift eller samboende med hverandre da den første døde, eller det forelå omstendigheter som nevnt i § 11. Er heller ingen slike arvinger i live, gjelder reglene i første punktum.\",\r\n    \"6 første og annet ledd\":\r\n      \"Hvis arvelateren ikke har slektsarvinger som nevnt i §§ 4 og 5, går arven til besteforeldrene eller til livsarvinger etter dem, slik at reglene i § 5 annet ledd gjelder tilsvarende. Fjernere livsarvinger etter besteforeldrene enn deres barnebarn har likevel ikke arverett etter loven.\\n\\nHvis en av besteforeldrene er død, og ingen barn eller barnebarn er i live, går arven som ellers ville ha tilkommet ham eller henne, til den andre av besteforeldrene på samme side eller til dennes barn eller barnebarn. Hvis det ikke er arvinger på den ene siden, går hele arven til arvingene på den andre siden.\",\r\n    \"6 første ledd, andre punktum\":\r\n      \"Fjernere livsarvinger etter besteforeldrene enn deres barnebarn har likevel ikke arverett etter loven.\",\r\n    \"7\": \"Arverett etter dette kapitlet gjelder bare foreldreskap som følger av reglene i barneloven, adopsjonsloven eller annen lov.\\n\\nFaren og farens slekt tar ikke arv etter barnet dersom det er unnfanget som følge av en handling som er et brudd på en bestemmelse i straffeloven §§ 291, 294, 295, 296, 299, 302, 312 eller 314, og som faren er dømt for. Første punktum gjelder også hvis dommen går ut på at faren ikke kan straffes på grunn av vilkårene i straffeloven § 20.\",\r\n    \"8 første ledd\":\r\n      \"Ektefellen har rett til en firedel av arven når det er livsarvinger etter arvelateren, men ektefellen har uansett rett til en minstearv på fire ganger folketrygdens grunnbeløp ved arvefallet.\",\r\n    \"9 første ledd\":\r\n      \"Ektefellen har rett til halvparten av arven når arvelaterens nærmeste slektsarvinger er foreldrene eller deres etterkommere, men ektefellen har uansett rett til en minstearv på seks ganger folketrygdens grunnbeløp ved arvefallet.\",\r\n    \"9 annet ledd\":\r\n      \"Ektefellen arver alt når det verken er livsarvinger eller slektsarvinger som nevnt i første ledd etter arvelateren.\",\r\n    \"10 annet ledd\":\r\n      \"Et beløp tilsvarende seks ganger folketrygdens grunnbeløp ved arvefallet kan ikke fratas ektefellen ved testament. Etterlater arvelateren seg livsarvinger, er beløpsgrensen etter første punktum fire ganger folketrygdens grunnbeløp.\",\r\n    \"12 første ledd\":\r\n      \"Den som var samboer med arvelateren ved dødsfallet og har, har hatt eller venter barn med arvelateren, har rett til en arv på fire ganger folketrygdens grunnbeløp ved arvefallet. Dette gjelder også om det er livsarvinger etter arvelateren. § 8 annet ledd gjelder tilsvarende\",\r\n    \"50 første ledd\":\r\n      \"To tredeler av formuen etter arvelateren er pliktdelsarv for livsarvingene. Pliktdelsarven er likevel aldri større enn 15 ganger folketrygdens grunnbeløp ved arvefallet til hvert av arvelaterens barn eller hvert barns linje.\",\r\n    \"75 første ledd\":\r\n      \"Har en livsarving mottatt en ytelse av økonomisk verdi fra arvelateren, skal ytelsen avkortes i livsarvingens arv hvis dette var satt som en betingelse for ytelsen. En betingelse om avkorting bør være skriftlig og gjort kjent for de andre livsarvingene.\",\r\n    \"76 første ledd, første punktum\":\r\n      \"Hvis den avdøde ikke har arvinger etter loven eller etter testament, skal nettoformuen gå til frivillig virksomhet til fordel for barn og unge.\",\r\n  };\r\n}\r\n","export default class Person {\r\n  _id: number;\r\n  _personName = \"\";\r\n  _undividedEstateSpouse: Person | undefined;\r\n  _deceased = false;\r\n  _spouse: Person | undefined;\r\n  _cohabitant: Person | undefined;\r\n  _childrenRearing: boolean | undefined;\r\n  _underAge: boolean | undefined;\r\n\r\n  constructor(personid: string, id = 1) {\r\n    this._personName = personid;\r\n    this._id = id;\r\n  }\r\n\r\n  get person_id(): string {\r\n    return this._personName;\r\n  }\r\n\r\n  set person_id(value: string) {\r\n    this._personName = value;\r\n  }\r\n\r\n  get deceased(): boolean {\r\n    return this._deceased;\r\n  }\r\n\r\n  set deceased(value: boolean) {\r\n    this._deceased = value;\r\n  }\r\n\r\n  get undividedEstateSpouse(): Person | undefined {\r\n    return this._undividedEstateSpouse;\r\n  }\r\n\r\n  set undividedEstateSpouse(value: Person | undefined) {\r\n    this._undividedEstateSpouse = value;\r\n  }\r\n\r\n  get spouse(): Person | undefined {\r\n    return this._spouse;\r\n  }\r\n\r\n  set_spouse = (spouse: Person, add_for_both = true): void => {\r\n    if (!this._spouse) console.log(this._spouse == spouse);\r\n    else this._spouse = spouse;\r\n    if (add_for_both) spouse.set_spouse(this, false);\r\n  };\r\n\r\n  hasSurvivingSpouse = (): boolean => {\r\n    if (this._spouse !== undefined && !this._spouse._deceased) return true;\r\n    else return false;\r\n  };\r\n\r\n  get cohabitant(): Person | undefined {\r\n    return this._cohabitant;\r\n  }\r\n\r\n  set_cohabitant = (cohabitant: Person, add_for_both = true): void => {\r\n    if (!this._cohabitant) console.log(this._cohabitant == cohabitant);\r\n    else this._cohabitant = cohabitant;\r\n    if (add_for_both) cohabitant.set_cohabitant(this, false);\r\n  };\r\n\r\n  static getPerson = (id: number, personMap: Map<number, Person>) => {\r\n    const person: Person | undefined = personMap.get(id);\r\n    if (person == undefined) {\r\n      throw new Error(\"Person not found with given id:\" + id);\r\n    }\r\n    return person;\r\n  };\r\n\r\n  has_surviving_cohabitant(): boolean {\r\n    if (this._cohabitant && !this._cohabitant._deceased) return true;\r\n    else return false;\r\n  }\r\n}\r\n","import Person from \"./Person\";\r\n\r\nclass Family {\r\n  _person_dict: Record<string, Person>;\r\n\r\n  constructor() {\r\n    this._person_dict = {};\r\n  }\r\n\r\n  get_or_create_person(personID: string): Person {\r\n    if (personID in Object.keys(this._person_dict)) {\r\n      return this._person_dict[personID];\r\n    } else {\r\n      const person = new Person(personID);\r\n      this._person_dict[personID] = person;\r\n      return person;\r\n    }\r\n  }\r\n}\r\n\r\nexport default Family;\r\n","\r\n// error:\r\n// 1- no digits in input error\r\n// 2- separatorCount error\r\n// 3- digitsBeforeSeparatorValue error\r\n// 4- unknown error, debug\r\n// 5- normal pass\r\n//\r\nconst checkSeparatorCount = (initialCurrencyValue: string): number => {\r\n    let checkSeparatorCount = 0;\r\n    for (const i of initialCurrencyValue) {\r\n        if (i == \",\" || i == \" \" || i == \".\") {\r\n            checkSeparatorCount += 1;\r\n        }\r\n    }\r\n    if (checkSeparatorCount == 0) {\r\n        return 0 // no separators, valid input, format it.\r\n    }\r\n    else if (checkSeparatorCount > 1) {\r\n        // more than 1 symbol in the entered value, invalid input, error\r\n        return 2\r\n    }\r\n    else {\r\n        return 1 // one separator, valid input.\r\n    }\r\n}\r\n\r\n\r\nconst checkDigitsBeforeSeparatorValue = (initialCurrencyValue: string): string => {\r\n    let digitsBeforeSymbol = 0;\r\n    for (const i of initialCurrencyValue) {\r\n        if (digitsBeforeSymbol > 3) {\r\n            // more than 3 digits before symbol\r\n            return \"incorrect\"\r\n        }\r\n        else if (i !== \",\" && i !== \" \" && i !== \".\") {\r\n            digitsBeforeSymbol += 1;\r\n        }\r\n        else {\r\n            digitsBeforeSymbol = 0;\r\n        }\r\n\r\n    }\r\n    return \"correct\"\r\n}\r\n\r\nconst removeTextFromCurrencyString = (inputCurrency: string): string => {\r\n    let beginningValue = \"\";\r\n    let endValue = \"\"\r\n\r\n    // match and remove extra text at the beginning\r\n    const matchesStart: RegExpMatchArray | null = inputCurrency.match(/^[\\D]{0,}/)\r\n    if (matchesStart) {\r\n        const matchStartResult = matchesStart[0];\r\n        beginningValue = inputCurrency.substring(matchStartResult.length,)\r\n    }\r\n\r\n    // match and remove extra text at the end\r\n    const matchesEnd: RegExpMatchArray | null = beginningValue.match(/[^\\d]{0,}$/)\r\n    if (matchesEnd) {\r\n        const matchEndResult = matchesEnd[0];\r\n        endValue = beginningValue.substring(0, beginningValue.length - matchEndResult.length)\r\n    }\r\n\r\n    return endValue.replace(\" \", \"\").replace(\".\", \"\").replace(\",\", \"\")\r\n}\r\n\r\nexport const ParseCurrencyStringForOutput = (unformattedCurrency: string): string => {\r\n    return new Intl.NumberFormat(\"no-NO\", {\r\n        style: \"currency\",\r\n        currency: \"NOK\",\r\n        currencyDisplay: \"narrowSymbol\",\r\n        minimumFractionDigits: 0,\r\n        maximumFractionDigits: 0,\r\n    }).format(Number(unformattedCurrency.replace(/[^0-9.-]+/g, \"\"))).replace(\"kr\", \"kr.\").concat(\",-\");\r\n\r\n}\r\n\r\nexport const validateCurrency = (inputCurrency: string): boolean => {\r\n    // const currencyMatchExpression = /^((\\d{1,3},)*\\d{3}|\\d{1,3})\\.\\d{2}$|^((\\d{1,3}\\.)*\\d{3}|\\d{1,3})$/;\r\n    const currencyMatchExpression = /^\\d+$/;\r\n    if (inputCurrency.match(currencyMatchExpression)) {\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n};\r\n\r\nexport const CurrencyOutput = (inputCurrency: string): [number, string] => {\r\n\r\n    if ((/\\d/).test(inputCurrency)) {\r\n        const initialCurrencyValue: string = removeTextFromCurrencyString(inputCurrency)\r\n\r\n        let digitsBeforeSeparatorValue = \"correct\"\r\n        const separatorCount = checkSeparatorCount(initialCurrencyValue);\r\n        if (separatorCount !== 0) {\r\n            digitsBeforeSeparatorValue = checkDigitsBeforeSeparatorValue(initialCurrencyValue)\r\n        }\r\n        if ((separatorCount === 0 || separatorCount === 1) && digitsBeforeSeparatorValue === \"correct\") {\r\n            return [5, initialCurrencyValue]\r\n        }\r\n\r\n        else {\r\n            if (separatorCount === 2) {\r\n                return [2, \"separatorCount\"]\r\n            }\r\n            else if (digitsBeforeSeparatorValue === \"incorrect\") {\r\n                return [3, \"digitsBeforeSeparatorValue\"]\r\n            }\r\n            else {\r\n                return [4, \"unknown error, debug\"]\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        // show error message and ask question again\r\n        return [1, \"\"]\r\n    }\r\n\r\n}\r\n","import ActionProvider from \"../ChatbotComponent/ActionProvider\";\r\nimport { ChatbotInterface } from \"../ChatbotComponent/Generics\";\r\nimport Person from \"../ChatbotComponent/Helper/Classes/Person\";\r\nimport {\r\n  inheritanceFractionListType,\r\n  splits_initial,\r\n} from \"./InheritanceCalculation\";\r\n\r\nimport _ from \"lodash\";\r\n\r\nexport class ReportUtils {\r\n  ActionProvider: ActionProvider;\r\n  state: ChatbotInterface;\r\n  constructor(actionProvider: any, state: ChatbotInterface) {\r\n    this.ActionProvider = actionProvider;\r\n    this.state = state;\r\n  }\r\n\r\n  combine_duplicates = (\r\n    inheritance_fraction_list: Array<inheritanceFractionListType>\r\n  ): any => {\r\n    const combinedDuplicates_inheritance_fraction_list: Array<inheritanceFractionListType> =\r\n      [];\r\n    const inheritance_fraction_person_set = new Set();\r\n    for (const inheritance_fraction of inheritance_fraction_list) {\r\n      inheritance_fraction_person_set.add(inheritance_fraction.person);\r\n    }\r\n\r\n    if (inheritance_fraction_person_set.size > 0) {\r\n      inheritance_fraction_list.forEach((inheritance_fraction) => {\r\n        let frac_sum = 0;\r\n        const chain_array: Array<string> = [];\r\n        if (inheritance_fraction_person_set.has(inheritance_fraction.person)) {\r\n          frac_sum += inheritance_fraction.frac;\r\n          chain_array.concat(inheritance_fraction.chains);\r\n        }\r\n        combinedDuplicates_inheritance_fraction_list.push({\r\n          person: inheritance_fraction.person,\r\n          frac: frac_sum,\r\n          chains: chain_array,\r\n        });\r\n      });\r\n    } else {\r\n      combinedDuplicates_inheritance_fraction_list.push(splits_initial);\r\n    }\r\n    return combinedDuplicates_inheritance_fraction_list;\r\n  };\r\n\r\n  split_evenly_between_lines = (\r\n    person_list: Array<number>,\r\n    maximum_distance: number | undefined = undefined,\r\n    allow_parents = false\r\n  ): any[] => {\r\n    let split_fraction_list: any[] = [];\r\n    if (person_list.length === 0) {\r\n      return split_fraction_list;\r\n    }\r\n\r\n    const split_frac = 1 / person_list.length;\r\n\r\n    for (const person of person_list) {\r\n      const personDetail: Person = this.ActionProvider.getPerson(\r\n        person,\r\n        this.state.personsMap\r\n      );\r\n      const personNode = this.ActionProvider.getNode(\r\n        person,\r\n        this.state.nodeMap\r\n      );\r\n      if (personDetail._deceased) {\r\n        if (maximum_distance === 0) {\r\n          // pass\r\n        } else if (\r\n          this.ActionProvider.get_class_and_distance_closest_surviving_relative(\r\n            personNode,\r\n            this.state\r\n          )[1] !== 1\r\n        ) {\r\n          if (allow_parents) {\r\n            let temp_list: inheritanceFractionListType[] =\r\n              this.split_evenly_between_lines(personNode._parents);\r\n            let level_sum = 0;\r\n            for (const item of temp_list) {\r\n              level_sum += item.frac;\r\n            }\r\n            const interm_temp_list: inheritanceFractionListType[] = [\r\n              splits_initial,\r\n            ];\r\n            if (level_sum !== 1) {\r\n              for (const item of temp_list) {\r\n                interm_temp_list.push({\r\n                  person: item.person,\r\n                  frac: item.frac / level_sum,\r\n                  chains: item.chains,\r\n                });\r\n              }\r\n              temp_list = interm_temp_list;\r\n            }\r\n\r\n            const temp_split_fraction_list: any[] = [];\r\n            for (const item of temp_list) {\r\n              temp_split_fraction_list.push({\r\n                person: item.person,\r\n                frac: item.frac * split_frac,\r\n                chains: item.chains.concat([personDetail._personName]),\r\n              });\r\n            }\r\n            split_fraction_list = split_fraction_list.concat(\r\n              temp_split_fraction_list\r\n            );\r\n          } else {\r\n            // pass\r\n          }\r\n        } else {\r\n          let temp_list: Array<inheritanceFractionListType> =\r\n            this.split_evenly_between_lines(personNode._children);\r\n          const temp_fraction_list: Array<any> = [];\r\n          let level_sum = 0;\r\n          for (const item of temp_list) {\r\n            level_sum += item.frac;\r\n          }\r\n          if (level_sum !== 1) {\r\n            for (const item of temp_list) {\r\n              temp_fraction_list.push({\r\n                person: item.person,\r\n                frac: item.frac / level_sum,\r\n                chains: item.chains.concat([personDetail._personName]),\r\n              });\r\n            }\r\n            temp_list = temp_fraction_list;\r\n          }\r\n          const temp_split_fraction_list: any = [];\r\n          for (const item of temp_list) {\r\n            temp_split_fraction_list.push({\r\n              person: item.person,\r\n              frac: item.frac * split_frac,\r\n              chains: item.chains.concat([personDetail._personName]),\r\n            });\r\n          }\r\n          split_fraction_list = split_fraction_list.concat(\r\n            temp_split_fraction_list\r\n          );\r\n        }\r\n      } else {\r\n        split_fraction_list.push({\r\n          person: personDetail._personName,\r\n          frac: split_frac,\r\n          chains: [],\r\n        });\r\n      }\r\n    }\r\n    let level_sum = 0;\r\n    for (const item of split_fraction_list) {\r\n      level_sum += item.frac;\r\n    }\r\n\r\n    if (level_sum !== 1) {\r\n      const temp_split_fraction_list: any = [];\r\n      for (const item of split_fraction_list) {\r\n        temp_split_fraction_list.push({\r\n          person: item.person,\r\n          frac: item.frac / level_sum,\r\n          chains: item.chains,\r\n        });\r\n      }\r\n      split_fraction_list = split_fraction_list.concat(\r\n        temp_split_fraction_list\r\n      );\r\n    }\r\n\r\n    if (_.isEqual(split_fraction_list, [splits_initial])) return [];\r\n    return split_fraction_list;\r\n  };\r\n\r\n  compute_default_genealogy_splits_with_chains = (person: number): any => {\r\n    const personNode = this.ActionProvider.getNode(person, this.state.nodeMap);\r\n    const personObject = this.ActionProvider.getPerson(\r\n      person,\r\n      this.state.personsMap\r\n    );\r\n    const class_closest =\r\n      this.ActionProvider.get_class_and_distance_closest_surviving_relative(\r\n        personNode,\r\n        this.state\r\n      )[0];\r\n    if (class_closest === 1) {\r\n      return this.split_evenly_between_lines(personNode._children);\r\n    } else if (class_closest === 2) {\r\n      const firstParentSpouse = this.ActionProvider.getNode(\r\n        personNode._parents[0],\r\n        this.state.nodeMap\r\n      )._spouse;\r\n      if (\r\n        !personObject._underAge ||\r\n        firstParentSpouse === personNode._parents[1]\r\n      ) {\r\n        return this.split_evenly_between_lines(personNode._parents);\r\n      } else {\r\n        return this.split_evenly_between_lines(\r\n          personNode._parents,\r\n          undefined,\r\n          true\r\n        );\r\n      }\r\n    } else if (class_closest === 3) {\r\n      const grandParent_splits = [];\r\n      personNode._parents.map((parent: number) => {\r\n        const parentNode = this.ActionProvider.getNode(\r\n          parent,\r\n          this.state.nodeMap\r\n        );\r\n        grandParent_splits.push(\r\n          this.split_evenly_between_lines(parentNode._parents, 2)\r\n        );\r\n      });\r\n    } else if (class_closest === undefined || class_closest > 3) return [];\r\n  };\r\n}\r\n","import { ChatbotInterface } from \"../ChatbotComponent/Generics\";\r\nimport { NodeEntity } from \"../ChatbotComponent/Helper/Classes/NodeEntity\";\r\nimport Norsk from \"../../../languages/translationNO.json\";\r\nimport { createIntl, createIntlCache } from \"react-intl\";\r\nimport InheritanceConstants from \"../ChatbotComponent/Helper/Methods/InheritanceConstants\";\r\nimport { ReportUtils } from \"./ReportUtils\";\r\nimport ActionProvider from \"../ChatbotComponent/ActionProvider\";\r\nconst cache = createIntlCache();\r\nconst intl = createIntl({ locale: \"nb-NO\", messages: Norsk }, cache);\r\n\r\ninterface InheritanceCalculationInterface {\r\n  survivor: number | null;\r\n  survivor_type: string;\r\n  class_closest: number | undefined;\r\n  distance_closest: number | undefined;\r\n  old_surviving_reference_paragraphs: string;\r\n  surviving_reference_paragraphs: Array<string>;\r\n  minimum_surviving_inheritance: number;\r\n  surviving_fraction: number;\r\n  descriptive_text: string;\r\n  survivor_inheritance_sum: number;\r\n  genealogy_inheritance_sum: number;\r\n  splits_with_chains: [];\r\n  genealogy_inheritance: [];\r\n}\r\nexport interface inheritanceFractionListType {\r\n  person: string;\r\n  frac: number;\r\n  chains: Array<string>;\r\n}\r\n\r\nexport const splits_initial = {\r\n  person: \"\",\r\n  frac: 0,\r\n  chains: [],\r\n};\r\nexport class InheritanceCalculation {\r\n  state: ChatbotInterface;\r\n  inheritanceConstants: InheritanceConstants;\r\n  actionProvider: ActionProvider;\r\n  person: NodeEntity;\r\n  survivor: number | null = null;\r\n  survivor_type = \"\";\r\n  class_closest: number | undefined;\r\n  distance_closest: number | undefined;\r\n  old_surviving_reference_paragraphs = \"\";\r\n  surviving_reference_paragraphs: string[] = [];\r\n  minimum_surviving_inheritance = 0;\r\n  surviving_fraction = 0;\r\n  descriptive_text = \"\";\r\n  survivor_inheritance_sum = 0;\r\n  genealogy_inheritance_sum = 0;\r\n  splits_with_chains: [] = [];\r\n  genealogy_inheritance: Array<inheritanceFractionListType> = [];\r\n  genealogy_splits: inheritanceFractionListType = splits_initial;\r\n  will: string | undefined;\r\n  reportUtils: any;\r\n  constructor(\r\n    person: NodeEntity,\r\n    actionProvider: ActionProvider,\r\n    state: ChatbotInterface,\r\n    inheritanceConstants: InheritanceConstants,\r\n    will = undefined\r\n  ) {\r\n    this.state = state;\r\n    this.inheritanceConstants = inheritanceConstants;\r\n    this.actionProvider = actionProvider;\r\n    this.person = actionProvider.getNode(person._id, this.state.nodeMap);\r\n    this.will = will;\r\n    this.reportUtils = new ReportUtils(actionProvider, state);\r\n  }\r\n\r\n  computeInheritance = () => {\r\n    [this.class_closest, this.distance_closest] =\r\n      this.actionProvider.get_class_and_distance_closest_surviving_relative(\r\n        this.state.testator,\r\n        this.state\r\n      );\r\n    console.log(this.class_closest, this.distance_closest);\r\n\r\n    if (this.person.has_surviving_spouse()) {\r\n      // TODO define has_surviving_spouse in NodeEntity.ts\r\n      this.survivor = this.person._spouse;\r\n      this.survivor_type = intl.formatMessage({\r\n        id: \"REPORT.Inheritance.survivorType1\",\r\n      });\r\n\r\n      if (this.class_closest === undefined || this.class_closest > 2) {\r\n        this.old_surviving_reference_paragraphs = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_6forste\",\r\n        });\r\n        this.surviving_reference_paragraphs.push(\r\n          intl.formatMessage({\r\n            id: \"REPORT.Inheritance.surviving_reference_paragraphs_9annet\",\r\n          })\r\n        );\r\n        this.minimum_surviving_inheritance = 0;\r\n        this.surviving_fraction = 1;\r\n        this.descriptive_text = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.DESC_SPOUSE_NO_CLOSE_RELATIVES\",\r\n        });\r\n      } else if (this.class_closest === 1) {\r\n        this.old_surviving_reference_paragraphs = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_6forste\",\r\n        });\r\n        this.surviving_reference_paragraphs.push(\r\n          intl.formatMessage({\r\n            id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_8forste\",\r\n          })\r\n        );\r\n        this.minimum_surviving_inheritance =\r\n          this.inheritanceConstants.MINIMUM_INHERITANCE_SPOUSE_VS_CHILDREN;\r\n        this.surviving_fraction =\r\n          this.inheritanceConstants.FRACTION_INHERITANCE_SPOUSE_VS_CHILDREN;\r\n        this.descriptive_text = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.DescriptiveText4G\",\r\n        });\r\n      } else if (this.class_closest === 2) {\r\n        this.old_surviving_reference_paragraphs = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_6forste\",\r\n        });\r\n        this.surviving_reference_paragraphs.push(\r\n          intl.formatMessage({\r\n            id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_9forste\",\r\n          })\r\n        );\r\n        this.minimum_surviving_inheritance =\r\n          this.inheritanceConstants.MINIMUM_INHERITANCE_SPOUSE_VS_PARENTS;\r\n        this.surviving_fraction =\r\n          this.inheritanceConstants.FRACTION_INHERITANCE_SPOUSE_VS_PARENTS;\r\n        this.descriptive_text = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.DescriptiveText6G\",\r\n        });\r\n      }\r\n    } else if (this.person.has_surviving_cohabitant()) {\r\n      this.survivor = this.person._cohabitant;\r\n      this.survivor_type = intl.formatMessage({\r\n        id: \"Report.Inheritance.survivorType2\",\r\n      });\r\n\r\n      if (this.class_closest === undefined || this.class_closest > 3) {\r\n        this.old_surviving_reference_paragraphs = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_28Bforste\",\r\n        });\r\n        this.surviving_reference_paragraphs.push(\r\n          intl.formatMessage({\r\n            id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_12forste\",\r\n          })\r\n        );\r\n        this.minimum_surviving_inheritance = 0;\r\n        this.surviving_fraction = 1;\r\n        this.descriptive_text = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.DESC_COHABITANT_NO_CLOSE_RELATIVES\",\r\n        });\r\n      } else if (this.class_closest === 1) {\r\n        this.old_surviving_reference_paragraphs = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_28Bforste\",\r\n        });\r\n        this.surviving_reference_paragraphs.push(\r\n          intl.formatMessage({\r\n            id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_12forste\",\r\n          })\r\n        );\r\n        this.minimum_surviving_inheritance =\r\n          this.inheritanceConstants.MINIMUM_INHERITANCE_COHABITANT_VS_CHILDREN;\r\n        this.surviving_fraction =\r\n          this.inheritanceConstants.FRACTION_INHERITANCE_COHABITANT_VS_CHILDREN;\r\n        this.descriptive_text = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.DescriptiveText_firstClass_cohab_4G\",\r\n        });\r\n      } else if (this.class_closest === 2) {\r\n        this.old_surviving_reference_paragraphs = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_28Bforste\",\r\n        });\r\n        this.surviving_reference_paragraphs.push(\r\n          intl.formatMessage({\r\n            id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_12forste\",\r\n          })\r\n        );\r\n        this.minimum_surviving_inheritance =\r\n          this.inheritanceConstants.MINIMUM_INHERITANCE_COHABITANT_VS_PARENTS;\r\n        this.surviving_fraction =\r\n          this.inheritanceConstants.FRACTION_INHERITANCE_COHABITANT_VS_PARENTS;\r\n        this.descriptive_text = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.DescriptiveText_secondClass_cohab_4G\",\r\n        });\r\n      } else if (this.class_closest === 3) {\r\n        if (this.distance_closest && this.distance_closest <= 2) {\r\n          this.old_surviving_reference_paragraphs = intl.formatMessage({\r\n            id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_28Bforste\",\r\n          });\r\n          this.surviving_reference_paragraphs.push(\r\n            intl.formatMessage({\r\n              id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_12forste\",\r\n            })\r\n          );\r\n          this.minimum_surviving_inheritance = 4 * this.inheritanceConstants.G;\r\n          this.surviving_fraction = 0;\r\n          this.descriptive_text = intl.formatMessage({\r\n            id: \"REPORT.Inheritance.DescriptiveText_thirdClass_cohab_4G\",\r\n          });\r\n        } else {\r\n          this.old_surviving_reference_paragraphs = intl.formatMessage({\r\n            id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_28Bforste\",\r\n          });\r\n          this.surviving_reference_paragraphs.push(\r\n            intl.formatMessage({\r\n              id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_12forste\",\r\n            })\r\n          );\r\n          this.minimum_surviving_inheritance = 0;\r\n          this.surviving_fraction = 1;\r\n          this.descriptive_text = intl.formatMessage({\r\n            id: \"REPORT.Inheritance.DESC_COHABITANT_NO_CLOSE_RELATIVES_2\",\r\n          });\r\n        }\r\n      }\r\n    } else {\r\n      this.survivor = null;\r\n      this.surviving_reference_paragraphs = [];\r\n      this.minimum_surviving_inheritance = 0;\r\n      this.surviving_fraction = 0;\r\n      this.descriptive_text = intl.formatMessage({\r\n        id: \"REPORT.Inheritance.DESC_NO_SPOUSE_OR_COHABITANT\",\r\n      });\r\n    }\r\n  };\r\n\r\n  compute_default_genealogy_splits_with_chains = (person: number) => {\r\n    //\r\n    const personNode = this.actionProvider.getNode(person, this.state.nodeMap);\r\n    const personDetail = this.actionProvider.getPerson(\r\n      person,\r\n      this.state.personsMap\r\n    );\r\n    const [closest_class, closest_distance] =\r\n      this.actionProvider.get_class_and_distance_closest_surviving_relative(\r\n        personNode,\r\n        this.state\r\n      );\r\n    if (closest_class === 1) {\r\n      return this.reportUtils.split_evenly_between_lines(personNode._children);\r\n    } else if (closest_class === 2) {\r\n      const firstParentNode = this.actionProvider.getNode(\r\n        personNode._parents[0],\r\n        this.state.nodeMap\r\n      );\r\n      if (\r\n        !personDetail._underAge ||\r\n        firstParentNode._spouse === personNode._parents[1]\r\n      ) {\r\n        return this.reportUtils.split_evenly_between_lines(personNode._parents);\r\n      } else\r\n        return this.reportUtils.split_evenly_between_lines(\r\n          personNode._parents,\r\n          undefined,\r\n          true\r\n        );\r\n    } else if (closest_class === 3) {\r\n      const grandparent_splits = [];\r\n      for (const parent of personNode._parents) {\r\n        const parentNode = this.actionProvider.getNode(\r\n          parent,\r\n          this.state.nodeMap\r\n        );\r\n        grandparent_splits.push(\r\n          this.reportUtils.split_evenly_between_lines(parentNode._parents, 2)\r\n        );\r\n      }\r\n      const tempArray = [];\r\n      for (const a of grandparent_splits) {\r\n        if (a.length > 0) {\r\n          tempArray.push(a);\r\n        }\r\n      }\r\n      const num = tempArray.length;\r\n\r\n      const temp_list = [];\r\n      for (const split of grandparent_splits) {\r\n        if (split.length > 0) {\r\n          temp_list.push([split[0]]);\r\n        }\r\n      }\r\n      const resultList = [];\r\n      for (const item of temp_list) {\r\n        resultList.push([item[0], item[1] / num, item[2]]);\r\n      }\r\n      return resultList;\r\n    } else if (closest_class === undefined || closest_class > 3) {\r\n      return [];\r\n    }\r\n  };\r\n\r\n  computeGenealogyInheritance = (person_id: number) => {\r\n    this.survivor_inheritance_sum = Math.min(\r\n      this.state.netWealth,\r\n      Math.max(\r\n        this.minimum_surviving_inheritance,\r\n        this.surviving_fraction * this.state.netWealth\r\n      )\r\n    );\r\n    this.genealogy_inheritance_sum =\r\n      this.state.netWealth - this.survivor_inheritance_sum;\r\n    if (this.genealogy_inheritance_sum !== 0) {\r\n      this.splits_with_chains =\r\n        this.compute_default_genealogy_splits_with_chains(person_id);\r\n      const genealogy_splits = this.reportUtils.combine_duplicates(\r\n        this.splits_with_chains\r\n      );\r\n\r\n      genealogy_splits.map((genealogy_split: any) => {\r\n        return this.genealogy_inheritance.push({\r\n          person: genealogy_split.person,\r\n          frac: genealogy_split.frac * this.genealogy_inheritance_sum,\r\n          chains: genealogy_split.chains,\r\n        });\r\n      });\r\n    } else {\r\n      this.splits_with_chains = [];\r\n      this.genealogy_splits = splits_initial;\r\n      this.genealogy_inheritance = [splits_initial];\r\n    }\r\n    return this.genealogy_inheritance;\r\n  };\r\n}\r\n","import { StyleSheet } from \"@react-pdf/renderer\";\r\n\r\nexport const styles = StyleSheet.create({\r\n  page: {\r\n    backgroundColor: \"white\",\r\n    color: \"black\",\r\n    fontFamily: \"Times-Roman\",\r\n    flexDirection: \"column\",\r\n    paddingLeft: 20,\r\n    paddingRight: 20,\r\n  },\r\n  section: {\r\n    margin: 10,\r\n  },\r\n  header: {\r\n    fontSize: 12,\r\n    marginBottom: 20,\r\n    textAlign: \"center\",\r\n    color: \"grey\",\r\n    fontFamily: \"Times-Roman\",\r\n  },\r\n  heading: {\r\n    fontSize: 24,\r\n    color: \"#17365D\",\r\n    marginBottom: 10,\r\n    textDecoration: \"underline\",\r\n  },\r\n  subheading: {\r\n    fontSize: 14,\r\n    color: \"#2979ff\",\r\n    fontFamily: \"Helvetica-Bold\",\r\n  },\r\n  paragraphHeading: {\r\n    fontSize: 12,\r\n    color: \"#365F91\",\r\n    fontFamily: \"Helvetica-Bold\",\r\n  },\r\n  paragraph: {\r\n    fontSize: 10,\r\n    fontFamily: \"Times-Roman\",\r\n    margin: 10,\r\n  },\r\n  pageNumber: {\r\n    position: \"absolute\",\r\n    fontSize: 12,\r\n    bottom: 30,\r\n    left: 0,\r\n    right: 0,\r\n    textAlign: \"center\",\r\n    color: \"grey\",\r\n  },\r\n  boldValue: {\r\n    fontFamily: \"Times-Bold\",\r\n    fontWeight: 600,\r\n  },\r\n  italicValue: {\r\n    fontFamily: \"Times-Italic\",\r\n    fontStyle: \"italic\",\r\n  },\r\n  urlStyle: {\r\n    fontFamily: \"Times-Roman\",\r\n    color: \"#1a0dab\",\r\n  },\r\n  tableHeaderRow: {\r\n    backgroundColor: \"grey\",\r\n    borderWidth: 0,\r\n    fontSize: 12,\r\n    textAlign: \"center\",\r\n  },\r\n  tableDataRow: {\r\n    backgroundColor: \"white\",\r\n    borderWidth: 0,\r\n    fontSize: 10,\r\n    textAlign: \"center\",\r\n  },\r\n  marginTop: {\r\n    marginTop: 10,\r\n  },\r\n  redText: {\r\n    color: \"#ff0000\",\r\n  },\r\n  image: {\r\n    marginVertical: 10,\r\n    marginHorizontal: 15,\r\n    backgroundColor: \"white\",\r\n  },\r\n});\r\n","import { Text } from \"@react-pdf/renderer\";\r\nimport { styles } from \"../../../styles\";\r\n\r\ntype BoldProps = {\r\n  children: React.ReactNode;\r\n};\r\n\r\nexport const Bold = (props: BoldProps) => (\r\n  <Text style={styles.boldValue}>{props.children}</Text>\r\n);\r\n","import { Text } from \"@react-pdf/renderer\";\r\nimport { styles } from \"../../../styles\";\r\n\r\ntype ItalicProps = {\r\n  children: React.ReactNode;\r\n};\r\n\r\nexport const Italic = (props: ItalicProps) => (\r\n  <Text style={styles.italicValue}>{props.children}</Text>\r\n);\r\n","import { Text, View, Link } from \"@react-pdf/renderer\";\r\nimport { Bold } from \"./text-styles/Bold\";\r\nimport { Italic } from \"./text-styles/Italic\";\r\nimport { styles } from \"../../styles\";\r\nimport \"react-pdf/dist/umd/Page/AnnotationLayer.css\";\r\n\r\nexport const currencyFormatNO = (currencyValue: number): string => {\r\n  return Intl.NumberFormat(\"no-NO\", {\r\n    style: \"currency\",\r\n    currency: \"NOK\",\r\n    useGrouping: true,\r\n  })\r\n    .format(currencyValue)\r\n    .replace(\"kr\", \"NOK\")\r\n    .replace(\",\", \".\");\r\n};\r\n\r\nexport const add_legal_references = (\r\n  code_paragraphs: string[],\r\n  CODE_PARAGRAPHS: any\r\n) => {\r\n  code_paragraphs.forEach((code_paragraph) => {\r\n    return (\r\n      <View>\r\n        <Text></Text>\r\n        <Text>\r\n          <Bold> Arveloven § {code_paragraph}:</Bold>\r\n          <Italic>{CODE_PARAGRAPHS[code_paragraph]}</Italic>\r\n        </Text>\r\n      </View>\r\n    );\r\n  });\r\n  //   add lovdata link\r\n};\r\n\r\nexport const add_legal_reference = (\r\n  code_paragraph: string,\r\n  CODE_PARAGRAPHS: any,\r\n  LAW_LINKS: any\r\n) => {\r\n  const lovdataLink = addLovdataLink(code_paragraph, LAW_LINKS);\r\n  return (\r\n    <View>\r\n      {\"\\n\\n\"}\r\n      <Text>\r\n        Arveloven § <Bold>{code_paragraph}</Bold>:{\" \"}\r\n        <Italic>{CODE_PARAGRAPHS[code_paragraph]}</Italic>\r\n        {\"\\n\\n\"}\r\n        <Text>{lovdataLink}</Text>\r\n      </Text>\r\n    </View>\r\n  );\r\n};\r\n\r\nexport const addLovdataLink = (code_paragraph: string, LAW_LINKS: any) => {\r\n  const code_paragraph_code = code_paragraph.replace(/[^\\d].*/, \"\");\r\n  const hyperlinkText = add_hyperlink(LAW_LINKS[code_paragraph_code]);\r\n  return (\r\n    <View>\r\n      <Text>\r\n        For å lese lovteksten i kontekst hos Lovdata, gå til {hyperlinkText}.\r\n      </Text>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst add_hyperlink = (url_text: [string, string]) => {\r\n  return (\r\n    <Link src={url_text[0]}>\r\n      <Text>{url_text[1]}</Text>\r\n    </Link>\r\n  );\r\n};\r\n","import { Text, View } from \"@react-pdf/renderer\";\r\nimport { InheritanceCalculation } from \"../../../../InheritanceCalculation\";\r\nimport { styles } from \"../../../styles\";\r\nimport {\r\n  add_legal_reference,\r\n  add_legal_references,\r\n  currencyFormatNO,\r\n} from \"../pdf_utils\";\r\nimport { Bold } from \"../text-styles/Bold\";\r\n\r\nconst GenealogyUtils = (value: InheritanceCalculation) => {\r\n  const genealogy_inheritance_sum = value.genealogy_inheritance_sum;\r\n  const genealogyText = getGenealogyText(genealogy_inheritance_sum, value);\r\n  return (\r\n    <View>\r\n      <Text>{genealogyText}</Text>\r\n    </View>\r\n  );\r\n};\r\n\r\n// add_inheritance_calculation_relatives\r\nconst getGenealogyText = (\r\n  genealogy_inheritance_sum: number,\r\n  value: InheritanceCalculation\r\n) => {\r\n  if (genealogy_inheritance_sum === 0) {\r\n    console.log(\"genealogy_inheritance_sum === 0\");\r\n\r\n    return (\r\n      <Text style={styles.paragraph}>\r\n        Det er ingen slektsarv igjen å fordele.\r\n      </Text>\r\n    );\r\n  } else if (\r\n    value.class_closest === undefined ||\r\n    (value.class_closest === 3 &&\r\n      value.distance_closest &&\r\n      value.distance_closest > 2)\r\n  ) {\r\n    let code_paragraph = \"6 første ledd, andre punktum\";\r\n    const legalReference1 = add_legal_reference(\r\n      code_paragraph,\r\n      value.inheritanceConstants.CODE_PARAGRAPHS,\r\n      value.inheritanceConstants.LAW_LINKS\r\n    );\r\n\r\n    code_paragraph = \"76 første ledd, første punktum\";\r\n    const legalReference2 = add_legal_reference(\r\n      code_paragraph,\r\n      value.inheritanceConstants.CODE_PARAGRAPHS,\r\n      value.inheritanceConstants.LAW_LINKS\r\n    );\r\n    return (\r\n      <View>\r\n        <Text style={styles.paragraph}>\r\n          \"Testator har ingen nære slektninger.\"\r\n        </Text>\r\n        <Text style={styles.paragraph}>{legalReference1}</Text>\r\n        <View>\r\n          <Text style={styles.subheading}>Frivillig arbeid</Text>\r\n          <Bold>{currencyFormatNO(value.genealogy_inheritance_sum)}</Bold>\r\n          <Text style={styles.paragraph}>\r\n            {\" \"}\r\n            vil gå til frivillig arbeid til fordel for barn og unge.\r\n          </Text>\r\n          <Text style={styles.paragraph}>{legalReference2}</Text>\r\n        </View>\r\n      </View>\r\n    );\r\n  } else {\r\n    return (\r\n      <View>\r\n        <Text style={styles.paragraph}>\r\n          De gjenværende{\" \"}\r\n          <Bold>{currencyFormatNO(genealogy_inheritance_sum)}</Bold> fordeles på\r\n          slekten slik at det blir likt på hver gren i den aktuelle\r\n          arvegangsklasse. Nærmeste levende slektning er i arvegangsklasse{\" \"}\r\n          {value.class_closest}\r\n          {getParagraph(\r\n            value.class_closest,\r\n            value.inheritanceConstants.CODE_PARAGRAPHS,\r\n            value.inheritanceConstants.LAW_LINKS\r\n          )}\r\n        </Text>\r\n        <Text style={styles.paragraph}>\r\n          {\"\\n\\n\"}\r\n          {genealogy_inheritance_text(value)}\r\n        </Text>\r\n      </View>\r\n    );\r\n  }\r\n};\r\n\r\nconst getParagraph = (\r\n  class_closest: number,\r\n  CODE_PARAGRAPHS: any,\r\n  LAW_LINKS: any\r\n) => {\r\n  let code_paragraph = \"\";\r\n  let helpText = \"\";\r\n  if (class_closest === 1) {\r\n    code_paragraph = \"4 første og annet ledd\";\r\n    helpText = \" (livsarvinger/etterkommere av arvelater).\";\r\n  } else if (class_closest === 2) {\r\n    code_paragraph = \"5 første, andre og tredje ledd\";\r\n    helpText = \" (arvelaters foreldre og deres etterkommere).\";\r\n  } else if (class_closest === 3) {\r\n    code_paragraph = \"6 første og annet ledd\";\r\n    helpText = \" (arvelaters besteforeldre og deres etterkommere).\";\r\n  } else {\r\n    console.log(\"check for error\");\r\n  }\r\n  const legalReferenceText = add_legal_reference(\r\n    code_paragraph,\r\n    CODE_PARAGRAPHS,\r\n    LAW_LINKS\r\n  );\r\n  return (\r\n    <View>\r\n      <Text>{helpText}</Text>\r\n      <Text>{legalReferenceText}</Text>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst genealogy_inheritance_text = (value: InheritanceCalculation) => {\r\n  let finalGenealogyInheritanceText;\r\n  for (const i of Object.entries(value.genealogy_inheritance)) {\r\n    const tempVar = i[1];\r\n    finalGenealogyInheritanceText = (\r\n      <Text>\r\n        Person med person-id <Bold>{tempVar.person}</Bold> arver totalt{\" \"}\r\n        <Bold>{tempVar.frac} </Bold>.{unravel_chains_to_string(tempVar.chains)}\r\n      </Text>\r\n    );\r\n  }\r\n  return finalGenealogyInheritanceText;\r\n};\r\n\r\nfunction enumerate(it: any) {\r\n  const resultArray = [];\r\n  for (const [index, element] of it.entries()) {\r\n    resultArray.push([index, element]);\r\n  }\r\n  return resultArray;\r\n}\r\n\r\nconst unravel_chain_to_string = (chain: any[]): string[] | undefined => {\r\n  if (chain.length === 0) {\r\n    return undefined;\r\n  }\r\n  let s = chain[0];\r\n  for (const [ind, link] of enumerate(chain)) {\r\n    if (ind !== 0) {\r\n      s = `${s} som er stedfortreder for person med person-id ${link}`;\r\n    }\r\n  }\r\n  return s;\r\n};\r\n\r\nconst unravel_chains_to_string = (chains: any[]): string => {\r\n  let text = \"\";\r\n  const chains_unraveled = chains.map((chain) => {\r\n    const unraveled_chains = unravel_chain_to_string(chain);\r\n    if (unraveled_chains !== undefined) {\r\n      return unraveled_chains;\r\n    }\r\n  });\r\n\r\n  const n = chains_unraveled.length;\r\n\r\n  if (n === 0) {\r\n    text = \"\";\r\n  } else if (n === 1) {\r\n    text = ` som stedfortreder for ${chains_unraveled[0]}`;\r\n  } else {\r\n    text = ` som stedfortreder for `;\r\n    for (const [ind, unraveled_chain] of enumerate(chains_unraveled)) {\r\n      if (ind === 0) {\r\n        text += `${unraveled_chain}`;\r\n      } else if (ind === n - 1) {\r\n        text += ` og som stedfortreder for ${unraveled_chain}`;\r\n      } else {\r\n        text += `, som stedfortreder for ${unraveled_chain}`;\r\n      }\r\n    }\r\n  }\r\n  return text;\r\n};\r\n\r\nexport default GenealogyUtils;\r\n","import { Text, View } from \"@react-pdf/renderer\";\r\nimport { PliktdelsarvCalculation } from \"../../../../PliktdelsarvCalculation\";\r\nimport { styles } from \"../../../styles\";\r\nimport {\r\n  add_legal_reference,\r\n  add_legal_references,\r\n  currencyFormatNO,\r\n} from \"../pdf_utils\";\r\nimport { Bold } from \"../text-styles/Bold\";\r\n\r\nconst GenealogyPliktUtils = (value: PliktdelsarvCalculation) => {\r\n  const genealogy_inheritance_sum = value.genealogy_inheritance_sum;\r\n  const genealogyText = getGenealogyText(genealogy_inheritance_sum, value);\r\n\r\n  return (\r\n    <View>\r\n      <Text>{genealogyText}</Text>\r\n    </View>\r\n  );\r\n};\r\n\r\n// add_inheritance_calculation_relatives\r\nconst getGenealogyText = (\r\n  genealogyInheritanceSum: number,\r\n  value: PliktdelsarvCalculation\r\n) => {\r\n  const genealogy_inheritance_sum = currencyFormatNO(genealogyInheritanceSum);\r\n  const code_paragraph = \"50 første ledd\";\r\n  const legal_reference_text = add_legal_reference(\r\n    code_paragraph,\r\n    value.inheritanceConstants.CODE_PARAGRAPHS,\r\n    value.inheritanceConstants.LAW_LINKS\r\n  );\r\n  const genealogyInheritanceText = genealogy_inheritance_text(value);\r\n  if (value.genealogy_inheritance_sum === 0) {\r\n    return (\r\n      <Text style={styles.paragraph}>\r\n        Det er ingen slektsarv igjen å fordele.\r\n      </Text>\r\n    );\r\n  } else {\r\n    return (\r\n      <Text style={styles.paragraph}>\r\n        <Bold>{genealogy_inheritance_sum}</Bold>{\" \"}\r\n        <Text style={styles.paragraph}>\r\n          fordeles på livsarvingene slik at det blir likt på hver gren.\r\n          (livsarvinger/etterkommere av arvelater).\r\n        </Text>\r\n        <Text style={styles.paragraph}>{legal_reference_text}</Text>\r\n        {\"\\n\\n\"}\r\n        <Text style={styles.paragraph}>{genealogyInheritanceText}</Text>\r\n      </Text>\r\n    );\r\n  }\r\n};\r\n\r\nconst getParagraph = (\r\n  class_closest: number,\r\n  CODE_PARAGRAPHS: any,\r\n  LAW_LINKS: any\r\n) => {\r\n  let code_paragraph = \"\";\r\n  let helpText = \"\";\r\n  if (class_closest === 1) {\r\n    code_paragraph = \"4 første og annet ledd\";\r\n    helpText = \" (livsarvinger/etterkommere av arvelater).\";\r\n  } else if (class_closest === 2) {\r\n    code_paragraph = \"5 første, andre og tredje ledd\";\r\n    helpText = \" (arvelaters foreldre og deres etterkommere).\";\r\n  } else if (class_closest === 3) {\r\n    code_paragraph = \"6 første og annet ledd\";\r\n    helpText = \" (arvelaters besteforeldre og deres etterkommere).\";\r\n  } else {\r\n    console.log(\"check for error\");\r\n  }\r\n  const legalReferenceText = add_legal_reference(\r\n    code_paragraph,\r\n    CODE_PARAGRAPHS,\r\n    LAW_LINKS\r\n  );\r\n  return (\r\n    <View>\r\n      <Text>{helpText}</Text>\r\n      <Text>{legalReferenceText}</Text>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst genealogy_inheritance_text = (value: PliktdelsarvCalculation) => {\r\n  let finalGenealogyInheritanceText;\r\n  for (const i of Object.entries(value.genealogy_inheritance)) {\r\n    const tempVar = i[1];\r\n    finalGenealogyInheritanceText = (\r\n      <Text style={styles.paragraph}>\r\n        Person med person-id <Bold>{tempVar.person}</Bold> arver totalt{\" \"}\r\n        <Bold>{currencyFormatNO(tempVar.frac)} </Bold>.\r\n        {unravel_chains_to_string(tempVar.chains)}\r\n      </Text>\r\n    );\r\n  }\r\n  return finalGenealogyInheritanceText;\r\n};\r\n\r\nfunction enumerate(it: any) {\r\n  const resultArray = [];\r\n  for (const [index, element] of it.entries()) {\r\n    resultArray.push([index, element]);\r\n  }\r\n  return resultArray;\r\n}\r\n\r\nconst unravel_chain_to_string = (chain: any[]): string[] | undefined => {\r\n  if (chain.length === 0) {\r\n    return undefined;\r\n  }\r\n  let s = chain[0];\r\n  for (const [ind, link] of enumerate(chain)) {\r\n    if (ind !== 0) {\r\n      s = `${s} som er stedfortreder for person med person-id ${link}`;\r\n    }\r\n  }\r\n  return s;\r\n};\r\n\r\nconst unravel_chains_to_string = (chains: any[]): string => {\r\n  let text = \"\";\r\n  const chains_unraveled = chains.map((chain) => {\r\n    const unraveled_chains = unravel_chain_to_string(chain);\r\n    if (unraveled_chains !== undefined) {\r\n      return unraveled_chains;\r\n    }\r\n  });\r\n\r\n  const n = chains_unraveled.length;\r\n\r\n  if (n === 0) {\r\n    text = \"\";\r\n  } else if (n === 1) {\r\n    text = ` som stedfortreder for ${chains_unraveled[0]}`;\r\n  } else {\r\n    text = ` som stedfortreder for `;\r\n    for (const [ind, unraveled_chain] of enumerate(chains_unraveled)) {\r\n      if (ind === 0) {\r\n        text += `${unraveled_chain}`;\r\n      } else if (ind === n - 1) {\r\n        text += ` og som stedfortreder for ${unraveled_chain}`;\r\n      } else {\r\n        text += `, som stedfortreder for ${unraveled_chain}`;\r\n      }\r\n    }\r\n  }\r\n  return text;\r\n};\r\n\r\nexport default GenealogyPliktUtils;\r\n","import ChartNode, { NodeData } from \"./Classes/ChartNode\";\r\nimport Person from \"../../ChatbotComponent/Helper/Classes/Person\";\r\nimport { ParentChildSelector } from \"../../ChatbotComponent/Helper/Enums/ParentChildSelector\";\r\nimport { NodeEntity } from \"../../ChatbotComponent/Helper/Classes/NodeEntity\";\r\nimport ChartConnector from \"./Classes/ChartConnector\";\r\nimport { Bubble } from \"./Classes/Bubble\";\r\n\r\n\r\nlet maxLevel = -999999, minLevel = 999999;\r\nconst xLevelArray = [[1], [-1, 1], [-1, 0, 1], [-2, -1, 1, 2]];\r\nlet chartNodeMap = new Map<number, ChartNode>()\r\nlet connectorArray = new Array<ChartConnector>()\r\nlet xDiff: number;\r\nlet yDiff: number;\r\nconst nodeSize = 123;\r\nlet partnerBubbleLevelMap: Map<number, Array<number>>;\r\nexport const processData = (data: any): any => {\r\n    maxLevel = -999999, minLevel = 999999;\r\n    chartNodeMap = new Map<number, ChartNode>()\r\n    connectorArray = new Array<ChartConnector>()\r\n    partnerBubbleLevelMap = new Map<number, Array<number>>();\r\n    xDiff = 180;\r\n    yDiff = 100;\r\n\r\n    // // divide nodeMap into levels\r\n    const levelMap = getLevelMap(data);\r\n    const maxLevelData = levelMap.get(maxLevel);\r\n    if (data.nodeMap.length === 0 || maxLevelData === undefined) {\r\n        return [];\r\n    }\r\n    setxLevelForMaxLevel(maxLevelData)\r\n    setxLevel(levelMap, data.nodeMap);\r\n    setNodePosition(levelMap, data.nodeMap)\r\n    return getChartNodeConnectorArray(data.nodeMap)\r\n    // const node1 = new ChartNode(\"1\", 'specialNode', new NodeData(\"a\", { right: \"right\" }), { x: 0, y: 0 }, 0)\r\n    // const node2 = new ChartNode(\"2\", 'specialNode', new NodeData(\"afasfasfas\", { left: \"left\" }), { x: 200, y: 0 }, 0)\r\n    // const connector = new ChartConnector(`1-2`, 'straight', \"1\", \"2\", '', 's_right', \"t_left\")\r\n    // return [node1, node2, connector]\r\n}\r\n\r\n\r\nconst setxLevel = (levelMap: Map<number, Array<ChartNode>>, nodeMap: Map<number, NodeEntity>) => {\r\n    const processedNodes = new Array<string>();\r\n\r\n    for (let i = maxLevel; i >= minLevel; i--) {\r\n        const currentLevelChartNodes = levelMap.get(i);\r\n\r\n        if (currentLevelChartNodes !== undefined) {\r\n            for (const node of currentLevelChartNodes) {\r\n\r\n                if (!processedNodes.includes(node.id)) {\r\n                    processedNodes.push(node.id);\r\n                }\r\n                const currentNode = NodeEntity.getNode(parseInt(node.id), nodeMap)\r\n\r\n                if (i !== maxLevel) {\r\n                    let avgXlevel = 0;\r\n                    const parentsCurrentNode = currentNode._parents;\r\n                    parentsCurrentNode.map((parent_id) => {\r\n                        const n = chartNodeMap.get(parent_id);\r\n                        if (n !== undefined) {\r\n                            avgXlevel += n.xLevel;\r\n                        }\r\n                    });\r\n                    if (parentsCurrentNode.length !== 0)\r\n                        node.xLevel = avgXlevel / parentsCurrentNode.length;\r\n                }\r\n                const partnerNodeId = currentNode._spouse ? currentNode._spouse : currentNode._cohabitant ? currentNode._cohabitant : null;\r\n                if (partnerNodeId !== null) {\r\n                    if (!processedNodes.includes(`${partnerNodeId}`)) {\r\n                        processedNodes.push(`${partnerNodeId}`);\r\n                    }\r\n\r\n                    const partnerChartNode = getChartNode(`${partnerNodeId}`);\r\n                    if (!partnerChartNode.data.pos) {\r\n                        partnerChartNode.data.pos = {};\r\n                    }\r\n                    if (!node.data.pos) {\r\n                        node.data.pos = {};\r\n                    }\r\n                    if (!partnerBubbleLevelMap.has(i)) {\r\n                        partnerBubbleLevelMap.set(i, new Array<number>())\r\n                    }\r\n                    const partnerBubbleArray = partnerBubbleLevelMap.get(i)\r\n\r\n                    if (currentNode._undividedEstateSpouse) {\r\n                        if (partnerBubbleArray) {\r\n                            if (!partnerBubbleArray.includes(partnerNodeId)) {\r\n                                partnerBubbleArray.push(partnerNodeId, currentNode._id)\r\n                            }\r\n                        }\r\n                        partnerChartNode.xLevel = node.xLevel - 0.01;\r\n                        partnerChartNode.data.pos.right = \"right\"\r\n                        node.data.pos.left = \"left\"\r\n                        if (connectorArray.filter(connector => {\r\n                            return connector.id === `e${partnerNodeId}-${currentNode._id}`\r\n                        }).length === 0) {\r\n                            const newConnector = new ChartConnector(`e${partnerNodeId}-${currentNode._id}`, 'straight', `${partnerNodeId}`, `${currentNode._id}`, '', \"s_right\", \"t_left\")\r\n                            connectorArray.push(newConnector);\r\n                        }\r\n                    } else {\r\n                        if (partnerBubbleArray) {\r\n                            if (!partnerBubbleArray.includes(partnerNodeId)) {\r\n                                partnerBubbleArray.push(currentNode._id, partnerNodeId)\r\n                            }\r\n                        }\r\n                        partnerChartNode.xLevel = node.xLevel + 0.01;\r\n                        partnerChartNode.data.pos.left = \"left\"\r\n                        node.data.pos.right = \"right\"\r\n                        if (connectorArray.filter(connector => {\r\n                            return connector.id === `e${currentNode._id}-${partnerNodeId}`\r\n                        }).length === 0) {\r\n                            const newConnector = new ChartConnector(`e${currentNode._id}-${partnerNodeId}`, 'straight', `${currentNode._id}`, `${partnerNodeId}`, '', \"s_right\", \"t_left\")\r\n                            connectorArray.push(newConnector);\r\n                        }\r\n                    }\r\n\r\n\r\n\r\n\r\n                }\r\n\r\n                if (currentNode._undividedEstateSpouse !== null) {\r\n                    if (!processedNodes.includes(`${currentNode._undividedEstateSpouse}`)) {\r\n                        processedNodes.push(`${currentNode._undividedEstateSpouse}`);\r\n                    }\r\n                    const partnerChartNode = getChartNode(`${currentNode._undividedEstateSpouse}`);\r\n                    if (!partnerChartNode.data.pos) {\r\n                        partnerChartNode.data.pos = {};\r\n                    }\r\n                    if (!node.data.pos) {\r\n                        node.data.pos = {};\r\n                    }\r\n                    if (!partnerBubbleLevelMap.has(i)) {\r\n                        partnerBubbleLevelMap.set(i, new Array<number>())\r\n                    }\r\n                    const partnerBubbleArray = partnerBubbleLevelMap.get(i)\r\n                    if (partnerBubbleArray) {\r\n                        if (!partnerBubbleArray.includes(currentNode._undividedEstateSpouse)) {\r\n                            if (!partnerBubbleArray.includes(currentNode._id)) {\r\n                                partnerBubbleArray.push(currentNode._id)\r\n\r\n                            }\r\n                            partnerBubbleArray.push(currentNode._undividedEstateSpouse)\r\n                        }\r\n                    }\r\n                    partnerChartNode.xLevel = node.xLevel + 0.01;\r\n                    partnerChartNode.data.pos.left = \"left\"\r\n                    node.data.pos.right = \"right\"\r\n                    if (connectorArray.filter(connector => {\r\n                        return connector.id === `e${currentNode._id}-${currentNode._undividedEstateSpouse}`\r\n                    }).length === 0) {\r\n                        const newConnector = new ChartConnector(`e${currentNode._id}-${currentNode._undividedEstateSpouse}`, 'straight', `${currentNode._id}`, `${currentNode._undividedEstateSpouse}`, '', \"s_right\", \"t_left\")\r\n                        connectorArray.push(newConnector);\r\n                    }\r\n                }\r\n\r\n\r\n\r\n                const currentNodePath = currentNode._path;\r\n                for (let j = currentNodePath.length - 2; j >= 0; j--) {\r\n                    if (currentNodePath[j][0] === ParentChildSelector.testator &&\r\n                        (currentNodePath[j + 1][0] === ParentChildSelector.spouse ||\r\n                            currentNodePath[j + 1][0] === ParentChildSelector.cohabitant ||\r\n                            currentNodePath[j + 1][0] === ParentChildSelector.undividedSpouse)) {\r\n                        break;\r\n                    }\r\n                    processedNodes.push(currentNodePath[j][1].toString())\r\n                    let source = '', target = '';\r\n                    if (currentNodePath[j + 1][0] <= currentNodePath[j][0] || (currentNodePath[j + 1][0] === ParentChildSelector.child && currentNodePath[j][0] === ParentChildSelector.testator)) {\r\n                        source = currentNodePath[j][1].toString();\r\n                        target = currentNodePath[j + 1][1].toString();\r\n\r\n                    } else {\r\n                        source = currentNodePath[j + 1][1].toString();\r\n                        target = currentNodePath[j][1].toString();\r\n\r\n                    }\r\n                    const sourceNode = getChartNode(source)\r\n                    if (!sourceNode.data.pos) {\r\n                        sourceNode.data.pos = {};\r\n                    }\r\n                    sourceNode.data.pos.bottom = 'bottom'\r\n                    const targetNode = getChartNode(target)\r\n                    if (!targetNode.data.pos) {\r\n                        targetNode.data.pos = {};\r\n                    }\r\n                    targetNode.data.pos.top = 'top'\r\n\r\n                    if (connectorArray.filter(connector => {\r\n                        return connector.id === `e${source}-${target}`\r\n                    }).length === 0) {\r\n                        const newConnector = new ChartConnector(`e${source}-${target}`, 'straight', source, target, '', \"s_bottom\", \"t_top\")\r\n                        connectorArray.push(newConnector);\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\nconst getLevelMap = (data: any) => {\r\n    const levelMap = new Map<number, Array<ChartNode>>();\r\n    // eslint-disable-next-line\r\n    data.nodeMap.forEach(function (node: NodeEntity, key: number) {\r\n        const nodeDetails = Person.getPerson(node._id, data.personsMap)\r\n\r\n        if (node._level > maxLevel) {\r\n            maxLevel = node._level;\r\n        }\r\n        if (node._level < minLevel) {\r\n            minLevel = node._level\r\n        }\r\n        if (!levelMap.has(node._level)) {\r\n            levelMap.set(node._level, new Array<ChartNode>());\r\n        }\r\n        const nodeLabel = nodeDetails._deceased ? `\\u2020 ${nodeDetails._personName}` : nodeDetails._personName\r\n        const newNode = new ChartNode(node._id.toString(), 'specialNode', new NodeData(nodeLabel,), { x: 0, y: 0 }, 0)\r\n        levelMap.get(node._level)?.push(newNode)\r\n        chartNodeMap.set(node._id, newNode)\r\n    })\r\n\r\n    return levelMap;\r\n}\r\n\r\n\r\nconst setNodePosition = (levelMap: Map<number, Array<ChartNode>>, nodeMap: any) => {\r\n    let ypos = 0;\r\n    for (let i = maxLevel; i >= minLevel; i--) {\r\n        const currentLevelChartNodes = levelMap.get(i);\r\n        // let xpos = 0;\r\n        if (currentLevelChartNodes !== undefined) {\r\n            const sortedLevelChartNode = currentLevelChartNodes.sort((a, b) => a.xLevel >= b.xLevel ? 1 : -1)\r\n            // create bubbles\r\n            const bubbles = createLevelBubble(sortedLevelChartNode, partnerBubbleLevelMap.get(i), nodeMap);\r\n\r\n            processBubbles(bubbles, ypos)\r\n        }\r\n        ypos += yDiff;\r\n    }\r\n\r\n}\r\nconst processBubbles = (bubbles: Array<Bubble>, ypos: number) => {\r\n    let xleft = 0;\r\n    const xgap = xDiff - nodeSize\r\n    let previousXRight = -10000000;\r\n\r\n    for (const bubble of bubbles) {\r\n        //\r\n        const n = bubble.elements.length;\r\n        if (bubble.parent) {\r\n            // find relative pos with parent\r\n\r\n            const parentChartNode = getChartNode(bubble.parent.toString());\r\n            let relativeXleft = parentChartNode.position.x + nodeSize / 2 - (n * nodeSize + (n - 1) * xgap) / 2;\r\n            const relativeXRight = parentChartNode.position.x + nodeSize / 2 + (n * nodeSize + (n - 1) * xgap) / 2;\r\n\r\n            if (previousXRight > relativeXleft) {\r\n                relativeXleft = previousXRight;\r\n            }\r\n            previousXRight = relativeXRight + xgap;\r\n            for (const eleID of bubble.elements) {\r\n                const element = getChartNode(eleID.toString());\r\n                element.position = { x: relativeXleft, y: ypos };\r\n                relativeXleft += xDiff;\r\n                xleft = relativeXleft;\r\n            }\r\n\r\n        } else {\r\n            // x will start from xleft\r\n            const relativeXRight = xleft + n * (xDiff);\r\n            previousXRight = relativeXRight;\r\n            for (const eleID of bubble.elements) {\r\n                const element = getChartNode(eleID.toString());\r\n                element.position = { x: xleft, y: ypos };\r\n                xleft += xDiff;\r\n            }\r\n        }\r\n    }\r\n}\r\nconst createLevelBubble = (chartNodes: Array<ChartNode>, partnerBubble: Array<number> | undefined, nodeMap: any) => {\r\n    const bubbles = new Array<Bubble>();\r\n    let isPartnerProcessed = false;\r\n    for (const chartNode of chartNodes) {\r\n        const node = NodeEntity.getNode(parseInt(chartNode.id), nodeMap);\r\n        // check in partnerMap\r\n\r\n        if (partnerBubble && partnerBubble.includes(node._id)) {\r\n            if (isPartnerProcessed) {\r\n                continue;\r\n            }\r\n            isPartnerProcessed = true;\r\n            let partnerParent: number | undefined;\r\n            let isExistingBubble = false;\r\n            for (const partner of partnerBubble) {\r\n                const partnerNode = NodeEntity.getNode(partner, nodeMap);\r\n                const existingBubbles = bubbles.filter(bubble => {\r\n                    if (bubble.parent) {\r\n                        return partnerNode._parents.includes(bubble.parent)\r\n                    }\r\n                    return false;\r\n                });\r\n                if (existingBubbles.length !== 0) {\r\n                    // return that there is an existing bubble which will include bubble\r\n                    existingBubbles[0].elements = existingBubbles[0].elements.concat(partnerBubble);\r\n                    isExistingBubble = true;\r\n                    break;\r\n                } else {\r\n                    if (partnerNode._parents.length !== 0)\r\n                        partnerParent = partnerNode._parents[0]\r\n                }\r\n            }\r\n            if (!isExistingBubble)\r\n                bubbles.push(new Bubble(partnerBubble, partnerParent));\r\n\r\n        } else {\r\n            const existingBubble = bubbles.filter(bubble => {\r\n                if (bubble.parent) {\r\n                    return node._parents.includes(bubble.parent)\r\n                }\r\n                return false;\r\n            })\r\n            let bubble: Bubble;\r\n            if (existingBubble.length !== 0) {\r\n                bubble = existingBubble[0]\r\n                bubble.elements.push(node._id)\r\n            } else {\r\n                if (node._parents.length !== 0) bubble = new Bubble([node._id], node._parents[0]);\r\n                else bubble = new Bubble([node._id]);\r\n                bubbles.push(bubble);\r\n            }\r\n\r\n        }\r\n\r\n\r\n\r\n    }\r\n    return bubbles;\r\n}\r\nconst getChartNodeConnectorArray = (nodeMap: Map<number, NodeEntity>): Array<ChartNode | ChartConnector> => {\r\n    const finalArray = new Array<ChartNode | ChartConnector>()\r\n    // eslint-disable-next-line\r\n    chartNodeMap.forEach((value, key) => {\r\n        if (NodeEntity.getNode(parseInt(value.id), nodeMap)._path.length !== 0)\r\n            finalArray.push(value)\r\n    })\r\n    return finalArray.concat(connectorArray)\r\n}\r\n\r\nconst setxLevelForMaxLevel = (nodeArray: Array<ChartNode>) => {\r\n    const xlevelDefault = xLevelArray[nodeArray.length - 1]\r\n    for (let i = 0; i < nodeArray.length; i++) {\r\n        nodeArray[i].xLevel = xlevelDefault[i]\r\n    }\r\n\r\n}\r\nconst getChartNode = (id: string) => {\r\n    const chartNode: ChartNode | undefined = chartNodeMap.get(parseInt(id));\r\n    if (chartNode == undefined) {\r\n        throw new Error(\"Person not found with given id:\" + id);\r\n    }\r\n    return chartNode;\r\n}\r\n\r\n","import { Popper } from \"@mui/material\";\r\nimport { Handle, Position } from \"react-flow-renderer\";\r\nimport { Textfit } from 'react-textfit';\r\n\r\nenum HandleType {\r\n  source = \"source\",\r\n  target = \"target\"\r\n}\r\n\r\nconst customHandleData = [\r\n  {\r\n    type: \"source\",\r\n    position: Position.Right,\r\n    id: \"s_right\",\r\n    style: { top: \"50%\", background: '#555' },\r\n  },\r\n  {\r\n    type: \"source\",\r\n    position: Position.Bottom,\r\n    id: \"s_bottom\",\r\n    style: { left: \"50%\", background: '#555' },\r\n  },\r\n  {\r\n    type: \"target\",\r\n    position: Position.Left,\r\n    id: \"t_left\",\r\n    style: { top: \"50%\", background: '#555' },\r\n  },\r\n  {\r\n    type: \"target\",\r\n    position: Position.Top,\r\n    id: \"t_top\",\r\n    style: { left: \"50%\", background: '#555' },\r\n  },\r\n];\r\n\r\nconst partnerNodeStyles = {\r\n  background: \"#fff\",\r\n  color: \"#000\",\r\n  padding: \"5px\",\r\n  width: \"7rem\",\r\n  height: \"1.8rem\",\r\n  borderRadius: \"3px\",\r\n  borderColor: \"midnightblue\",\r\n  borderStyle: \"solid\",\r\n  borderWidth: \"1px\",\r\n  letterSpacing: \"0.5px\",\r\n  lineHeight: 1.5,\r\n  display: \"flex\"\r\n}\r\n\r\n\r\nconst CustomNode = (totalData: any) => {\r\n  const data = totalData.data;\r\n\r\n  const isConnectable = data.isConnectable;\r\n  // eslint-disable-next-line\r\n  const handles = customHandleData.map((v, k) => {\r\n    if (check(data.pos, v.position)) {\r\n      return (\r\n        <Handle\r\n          key={v.id}\r\n          type={v.type === \"source\" ? HandleType.source : HandleType.target}\r\n          position={v.position}\r\n          id={v.id}\r\n          style={v.style}\r\n          isConnectable={isConnectable}\r\n        />\r\n      )\r\n    }\r\n  });\r\n  const labelString = deceasedFormatter(data.label)\r\n  return (\r\n    <div>\r\n      <div id={`detail_${totalData.id}`} style={partnerNodeStyles}>\r\n        <div style={{ width: \"6.8rem\", display: \"contents\" }}><Textfit style={{ margin: \"auto\", width: \"6.8rem\", textAlign: \"center\" }} max={20} mode=\"single\" forceSingleModeWidth={false}>{labelString}</Textfit></div>\r\n        {/* <Typography align=\"center\" variant=\"subtitle2\" style={{ textTransform: \"uppercase\", fontFamily: \"Helvetica\", padding: \"0 5px\" }}></Typography> */}\r\n        {handles}\r\n      </div>\r\n      <Popper style={{ position: \"absolute\", display: data.showDialog ? \"block\" : \"none\" }}\r\n        open={data.showDialog}\r\n        anchorEl={document.getElementById(`detail_${totalData.id}`)}\r\n      >{`Hi popover ${data.label}`}</Popper>\r\n    </div >\r\n  );\r\n}\r\nconst check = (data: any, pos: string): boolean => {\r\n  if (data && (\r\n    data.left === pos ||\r\n    data.right === pos ||\r\n    data.top === pos ||\r\n    data.bottom === pos\r\n  ))\r\n    return true;\r\n\r\n  return false;\r\n};\r\n\r\nconst deceasedFormatter = (personString: string) => {\r\n  // const tempArray = personString.split(\"†\");\r\n\r\n  // if (tempArray.length === 2) {\r\n  //   const spanElement = document.createElement(\"span\");\r\n  //   spanElement.innerHTML = `tempArray[0] <p style=\"color: red\">tempArray[1]</p>`\r\n  //   return spanElement\r\n  // }\r\n  return personString\r\n}\r\n\r\n\r\nexport default CustomNode","import { Text, View } from \"@react-pdf/renderer\";\r\nimport { useContext } from \"react\";\r\nimport { UserContext } from \"../../../FinalDocument\";\r\nimport { styles } from \"../../../styles\";\r\nimport GenealogyUtils from \"./Genealogy.utils\";\r\nimport GenealogyPliktUtils from \"./GenealogyPlikt.utils\";\r\n\r\nexport const Genealogy = (props: { inheritanceMode: boolean }) => {\r\n  if (props.inheritanceMode) {\r\n    const value = useContext(UserContext).inheritanceCalculation;\r\n    const genealogyParagraph = GenealogyUtils(value);\r\n    return (\r\n      <View style={styles.section} break>\r\n        <Text style={styles.paragraphHeading}>Slektsarv</Text>\r\n        {genealogyParagraph}\r\n      </View>\r\n    );\r\n  } else {\r\n    const value = useContext(UserContext).pliktdelsarvCalculation;\r\n    const genealogyPliktParagraph = GenealogyPliktUtils(value);\r\n    return (\r\n      <View style={styles.section} break>\r\n        <Text style={styles.paragraphHeading}>Slektsarv</Text>\r\n        {genealogyPliktParagraph}\r\n      </View>\r\n    );\r\n  }\r\n};\r\n","import { Text } from \"@react-pdf/renderer\";\r\nimport { PliktdelsarvCalculation } from \"../../../../PliktdelsarvCalculation\";\r\nimport { styles } from \"../../../styles\";\r\nimport { currencyFormatNO } from \"../pdf_utils\";\r\n\r\nexport const IntroductionPliktUtils = (value: PliktdelsarvCalculation) => {\r\n  return getPliktIntroString(value);\r\n};\r\n\r\nconst getPliktIntroString = (value: PliktdelsarvCalculation) => {\r\n  const person_name = value.actionProvider.getPerson(\r\n    value.person._id,\r\n    value.state.personsMap\r\n  )._personName;\r\n  const net_wealth_NOK = currencyFormatNO(value.state.netWealth);\r\n  const survivor_inheritance_sum = currencyFormatNO(\r\n    value.survivor_inheritance_sum\r\n  );\r\n  const genealogy_inheritance_sum = currencyFormatNO(\r\n    value.genealogy_inheritance_sum\r\n  );\r\n  const available_for_will = currencyFormatNO(\r\n    value.state.netWealth -\r\n      value.survivor_inheritance_sum -\r\n      value.genealogy_inheritance_sum\r\n  );\r\n  return (\r\n    <Text style={styles.paragraph}>\r\n      <Text>\r\n        Denne delen inneholder en beregning av pliktdelsarv etter arvelater med\r\n        person-id\r\n      </Text>{\" \"}\r\n      <Text style={styles.boldValue}>{person_name}</Text>{\" \"}\r\n      <Text style={styles.paragraph}>som etterlater seg en nettoarv på</Text>{\" \"}\r\n      <Text style={styles.boldValue}>{net_wealth_NOK}</Text>\r\n      {\".\\n\\n \"}\r\n      <Text style={styles.boldValue}>{survivor_inheritance_sum}</Text>{\" \"}\r\n      <Text style={styles.paragraph}>går til etterlatte, mens</Text>{\" \"}\r\n      <Text style={styles.boldValue}>{genealogy_inheritance_sum}</Text>{\" \"}\r\n      <Text style={styles.paragraph}>går til livsarvinger. Det betyr at</Text>{\" \"}\r\n      <Text style={styles.boldValue}>{available_for_will}</Text>{\" \"}\r\n      <Text style={styles.paragraph}>fritt kan testamenteres bort.</Text>\r\n    </Text>\r\n  );\r\n};\r\n","import { Text, View } from \"@react-pdf/renderer\";\r\nimport { styles } from \"../../../styles\";\r\nimport { useContext } from \"react\";\r\nimport { UserContext } from \"../../../FinalDocument\";\r\nimport { IntroductionUtils } from \"./Introduction.utils\";\r\nimport { Bold } from \"../text-styles/Bold\";\r\nimport { IntroductionPliktUtils } from \"./IntroductionPlikt.utils\";\r\n\r\nexport const IntroductionPage = (props: { inheritanceMode: boolean }) => {\r\n  if (props.inheritanceMode) {\r\n    const value = useContext(UserContext).inheritanceCalculation;\r\n    const calculatedValues = IntroductionUtils(value);\r\n    return (\r\n      <View style={[styles.section]}>\r\n        <Text style={[styles.heading, { textAlign: \"center\" }]}>\r\n          Beregning av arv\r\n        </Text>\r\n        <Text style={styles.paragraph}>\r\n          Dette dokumentet inneholder en beregning av arv etter arvelater med\r\n          person-id <Bold>{calculatedValues.testatorName}</Bold>. Boet har en\r\n          total verdi på <Bold>{calculatedValues.currencyFormatted}</Bold>.\r\n        </Text>\r\n      </View>\r\n    );\r\n  } else {\r\n    const value = useContext(UserContext).pliktdelsarvCalculation;\r\n    const pliktIntroText = IntroductionPliktUtils(value);\r\n    return <View>{pliktIntroText}</View>;\r\n  }\r\n};\r\n","import { undividedOwnershipType } from \"../../../../../ChatbotComponent/Helper/Enums/ChatStepTypes\";\r\nimport { InheritanceCalculation } from \"../../../../InheritanceCalculation\";\r\nimport { currencyFormatNO } from \"../pdf_utils\";\r\n\r\nconst undivided_estate_results = (value: InheritanceCalculation) => {\r\n  const finalresult = \"\";\r\n  const first_partly_separate = value.state.undividedEstate.temp_first;\r\n  const testator_name = value.actionProvider.getPerson(\r\n    value.state.testator._id,\r\n    value.state.personsMap\r\n  )._personName;\r\n  const second_partly_separate = value.state.undividedEstate.temp_last;\r\n  const undivided_spouse_name = value.actionProvider.getPerson(\r\n    value.state.undividedSpouseId,\r\n    value.state.personsMap\r\n  )._personName;\r\n  const testator_wealth = currencyFormatNO(value.state.netWealth);\r\n  const undivided_estate_separate_wealth = currencyFormatNO(\r\n    value.state.undividedEstate.undividedEstateSeparateWealth\r\n  );\r\n  if (value.state.undividedEstate.undividedEstateChoice) {\r\n    finalresult.concat(\"<Text>Arvelater satt i uskiftet bo. </Text\");\r\n    if (\r\n      value.state.undividedEstate.ownershipType ===\r\n      undividedOwnershipType.felleseie\r\n    ) {\r\n      finalresult.concat(\r\n        `<Text>Det uskiftede boet var utelukkende felleseie. Boet verdier fordeles likt på førstavdødes og sistavdødes arvinger, ${value.state.undividedEstate.undividedEstateSeparateWealth} på hver gruppe.</Text>`\r\n      );\r\n    } else if (\r\n      value.state.undividedEstate.ownershipType ===\r\n      undividedOwnershipType.delvis\r\n    ) {\r\n      finalresult.concat(\r\n        `<Text>Det uskiftede boet var delvis særeie. Førstavdødes (${undivided_spouse_name}) særeie hadde en verdi på ${first_partly_separate}, mens sistavødedes (${testator_name}) særeie hadde en verdi på ${second_partly_separate}. Verdiene som fordeles blant førstavdødes (${undivided_spouse_name}) arvinger er ${testator_wealth}, mens verdiene som fordeles blant sistavdødes (${testator_name})  arvinger er ${undivided_estate_separate_wealth}.</Text>`\r\n      );\r\n    } else if (\r\n      value.state.undividedEstate.ownershipType === undividedOwnershipType.fullt\r\n    ) {\r\n      finalresult.concat(\r\n        `<Text>Det uskiftede boet var fullt særeie. Verdiene som fordeles blant førstavdødes (${undivided_spouse_name})  arvinger er ${testator_wealth}, mens verdiene som fordeles blant sistavdødes (${testator_name}) arvinger er ${undivided_estate_separate_wealth}.</Text>`\r\n      );\r\n    } else {\r\n      console.log(\"check for problem, untroduction.utils.ts\");\r\n    }\r\n  }\r\n  return finalresult;\r\n};\r\n\r\nexport const IntroductionUtils = (value: InheritanceCalculation) => {\r\n  const currencyFormatted = currencyFormatNO(value.state.netWealth);\r\n\r\n  const testatorName = value.actionProvider.getPerson(\r\n    1,\r\n    value.state.personsMap\r\n  )._personName;\r\n  return {\r\n    currencyFormatted: currencyFormatted,\r\n    testatorName: testatorName,\r\n  };\r\n};\r\n","// import { TableContainer, Table, Paper } from \"@mui/material\";\r\nimport {\r\n  DataTableCell,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHeader,\r\n} from \"@david.kucsai/react-pdf-table\";\r\nimport { styles } from \"../../../styles\";\r\nimport { summaryValueType } from \"../summary/Summary\";\r\n\r\nexport const TableElement = (props: {\r\n  summaryValue: Array<summaryValueType>;\r\n}) => {\r\n  const summaryVal = props.summaryValue;\r\n  return (\r\n    <Table data={summaryVal}>\r\n      <TableHeader>\r\n        <TableCell style={styles.tableHeaderRow}>Person-id</TableCell>\r\n        <TableCell style={styles.tableHeaderRow}>Type</TableCell>\r\n        <TableCell style={styles.tableHeaderRow}>Beløp</TableCell>\r\n      </TableHeader>\r\n      <TableBody>\r\n        <DataTableCell\r\n          style={styles.tableDataRow}\r\n          getContent={(r) => r.survivorName}\r\n        />\r\n        <DataTableCell\r\n          style={styles.tableDataRow}\r\n          getContent={(r) => r.survivorType}\r\n        />\r\n        <DataTableCell\r\n          style={styles.tableDataRow}\r\n          getContent={(r) => r.belopAmount}\r\n        />\r\n      </TableBody>\r\n    </Table>\r\n  );\r\n};\r\n","import {\r\n  InheritanceCalculation,\r\n  splits_initial,\r\n} from \"../../../../InheritanceCalculation\";\r\nimport { TableElement } from \"../react-pdf-table/Table\";\r\nimport { currencyFormatNO } from \"../pdf_utils\";\r\nimport { initialSummaryValue, summaryValueType } from \"./Summary\";\r\n\r\nexport const SummaryUtils = (value: InheritanceCalculation) => {\r\n  const summaryValues = getSummaryValues(value);\r\n  const table = <TableElement summaryValue={summaryValues} />;\r\n  return table;\r\n};\r\n\r\nexport const getSummaryValues = (\r\n  value: InheritanceCalculation\r\n): Array<summaryValueType> => {\r\n  const summaryValue: Array<summaryValueType> = [];\r\n  if (value.survivor !== null) {\r\n    const survivor_name = value.actionProvider.getPerson(\r\n      value.survivor,\r\n      value.state.personsMap\r\n    )._personName;\r\n    const belopAmount = currencyFormatNO(value.survivor_inheritance_sum);\r\n    summaryValue[0] = {\r\n      survivorName: survivor_name,\r\n      survivorType: value.survivor_type,\r\n      belopAmount: belopAmount,\r\n    };\r\n  }\r\n  for (const gen_inherit of value.genealogy_inheritance) {\r\n    if (gen_inherit !== splits_initial) {\r\n      const summaryCell = {\r\n        survivorName: gen_inherit.person,\r\n        survivorType: `Slekt i ${value.class_closest}. arvegangsklasse`,\r\n        belopAmount: currencyFormatNO(gen_inherit.frac),\r\n      };\r\n      summaryValue.push(summaryCell);\r\n    }\r\n  }\r\n  if (\r\n    value.genealogy_inheritance_sum > 0 &&\r\n    (value.class_closest === undefined ||\r\n      (value.class_closest === 3 &&\r\n        value.distance_closest &&\r\n        value.distance_closest > 2))\r\n  ) {\r\n    summaryValue[0] = {\r\n      survivorName: \"-\",\r\n      survivorType: \"Frivillig arbeid\",\r\n      belopAmount: currencyFormatNO(value.genealogy_inheritance_sum),\r\n    };\r\n  }\r\n  return summaryValue;\r\n};\r\n","import { splits_initial } from \"../../../../InheritanceCalculation\";\r\nimport { TableElement } from \"../react-pdf-table/Table\";\r\nimport { currencyFormatNO } from \"../pdf_utils\";\r\nimport { summaryValueType } from \"./Summary\";\r\nimport { PliktdelsarvCalculation } from \"../../../../PliktdelsarvCalculation\";\r\n\r\nexport const SummaryPliktUtils = (value: PliktdelsarvCalculation) => {\r\n  const summaryValues = getSummaryValues(value);\r\n  const table = <TableElement summaryValue={summaryValues} />;\r\n  return table;\r\n};\r\n\r\nexport const getSummaryValues = (\r\n  value: PliktdelsarvCalculation\r\n): Array<summaryValueType> => {\r\n  const summaryValue: Array<summaryValueType> = [];\r\n  if (value.survivor !== null) {\r\n    const survivor_name = value.actionProvider.getPerson(\r\n      value.survivor,\r\n      value.state.personsMap\r\n    )._personName;\r\n    const belopAmount = currencyFormatNO(value.survivor_inheritance_sum);\r\n    summaryValue[0] = {\r\n      survivorName: survivor_name,\r\n      survivorType: value.survivor_type,\r\n      belopAmount: belopAmount,\r\n    };\r\n  }\r\n  for (const gen_inherit of value.genealogy_inheritance) {\r\n    if (gen_inherit !== splits_initial) {\r\n      const summaryCell = {\r\n        survivorName: gen_inherit.person,\r\n        survivorType: `Slekt i ${value.class_closest}. arvegangsklasse`,\r\n        belopAmount: currencyFormatNO(gen_inherit.frac),\r\n      };\r\n      summaryValue.push(summaryCell);\r\n    }\r\n  }\r\n  if (\r\n    value.genealogy_inheritance_sum > 0 &&\r\n    (value.class_closest === undefined ||\r\n      (value.class_closest === 3 &&\r\n        value.distance_closest &&\r\n        value.distance_closest > 2))\r\n  ) {\r\n    summaryValue[0] = {\r\n      survivorName: \"-\",\r\n      survivorType: \"Frivillig arbeid\",\r\n      belopAmount: currencyFormatNO(value.genealogy_inheritance_sum),\r\n    };\r\n  }\r\n  return summaryValue;\r\n};\r\n","import { Text, View } from \"@react-pdf/renderer\";\r\nimport { useContext } from \"react\";\r\nimport { UserContext } from \"../../../FinalDocument\";\r\nimport { styles } from \"../../../styles\";\r\nimport { SummaryUtils } from \"./Summary.utils\";\r\nimport { SummaryPliktUtils } from \"./SummaryPlikt.utils\";\r\n\r\nexport type summaryValueType = {\r\n  survivorName: string;\r\n  survivorType: string;\r\n  belopAmount: string;\r\n};\r\n\r\nexport const initialSummaryValue = {\r\n  survivorName: \"\",\r\n  survivorType: \"\",\r\n  belopAmount: \"\",\r\n};\r\n\r\nexport const Summary = (props: { inheritanceMode: boolean }) => {\r\n  const value = useContext(UserContext).inheritanceCalculation;\r\n  if (props.inheritanceMode) {\r\n    const summaryTable = SummaryUtils(value);\r\n    return (\r\n      <View style={styles.section}>\r\n        <Text style={styles.paragraphHeading}>Sammendrag</Text>\r\n        <View style={styles.marginTop}>{summaryTable}</View>\r\n      </View>\r\n    );\r\n  } else {\r\n    const value = useContext(UserContext).pliktdelsarvCalculation;\r\n    const summaryPliktTable = SummaryPliktUtils(value);\r\n    return (\r\n      <View style={styles.section}>\r\n        <Text style={styles.paragraphHeading}>Sammendrag</Text>\r\n        <View style={styles.marginTop}>{summaryPliktTable}</View>\r\n      </View>\r\n    );\r\n  }\r\n};\r\n","import { Text, View } from \"@react-pdf/renderer\";\r\nimport InheritanceConstants from \"../../../../../ChatbotComponent/Helper/Methods/InheritanceConstants\";\r\nimport { InheritanceCalculation } from \"../../../../InheritanceCalculation\";\r\nimport { styles } from \"../../../styles\";\r\nimport { add_legal_references, currencyFormatNO } from \"../pdf_utils\";\r\nimport { Bold } from \"../text-styles/Bold\";\r\n\r\nconst SurvivingPartnerUtils = (value: InheritanceCalculation) => {\r\n  let survivor_name = \"Fix error\";\r\n  if (value.survivor) {\r\n    survivor_name = value.actionProvider.getPerson(\r\n      value.survivor,\r\n      value.state.personsMap\r\n    )._personName;\r\n  }\r\n\r\n  const survivor_inheritance_sum = currencyFormatNO(\r\n    value.survivor_inheritance_sum\r\n  );\r\n  const genealogy_inheritance_sum = currencyFormatNO(\r\n    value.genealogy_inheritance_sum\r\n  );\r\n\r\n  const inheritanceDescriptiveText = getInheritanceDescriptiveText(\r\n    value.descriptive_text,\r\n    value.inheritanceConstants,\r\n    survivor_name,\r\n    survivor_inheritance_sum,\r\n    genealogy_inheritance_sum\r\n  );\r\n  const legalReferenceText = add_legal_references(\r\n    value.surviving_reference_paragraphs,\r\n    value.inheritanceConstants.CODE_PARAGRAPHS\r\n  );\r\n\r\n  return (\r\n    <View>\r\n      <Text style={styles.paragraphHeading}>\r\n        Gjenlevende ektefelle eller samboer\r\n      </Text>\r\n      {inheritanceDescriptiveText}\r\n      {legalReferenceText}\r\n    </View>\r\n  );\r\n};\r\n\r\nconst getInheritanceDescriptiveText = (\r\n  descriptive_text: string,\r\n  inheritance_constants: InheritanceConstants,\r\n  survivor_name: string,\r\n  survivor_inheritance_sum: string,\r\n  genealogy_inheritance_sum: string\r\n) => {\r\n  if (\r\n    [\r\n      inheritance_constants.DESC_NO_SPOUSE_OR_COHABITANT,\r\n      inheritance_constants.DESC_COHABITANT_WITHOUT_COMMON_CHILD,\r\n    ].includes(descriptive_text)\r\n  ) {\r\n    return (\r\n      <Text style={styles.paragraph}>\r\n        <Text>OBS! Nye regler for samboer - sjekk ut.</Text>\r\n        {\"\\n\"}\r\n        <Text>{descriptive_text}</Text>\r\n      </Text>\r\n    );\r\n  } else if (\r\n    [\r\n      inheritance_constants.DESC_SPOUSE_NO_CLOSE_RELATIVES,\r\n      inheritance_constants.DESC_SPOUSE_NO_CLOSE_RELATIVES_2,\r\n      inheritance_constants.DESC_COHABITANT_NO_CLOSE_RELATIVES,\r\n      inheritance_constants.DESC_COHABITANT_NO_CLOSE_RELATIVES_2,\r\n    ].includes(descriptive_text)\r\n  ) {\r\n    return (\r\n      <Text>\r\n        {descriptive_text} Den etterlatte har person-id{\" \"}\r\n        <Bold>{survivor_name}</Bold>. Arv til gjenlevende er{\" \"}\r\n        {survivor_inheritance_sum}.\r\n      </Text>\r\n    );\r\n  } else {\r\n    return (\r\n      <Text style={styles.paragraph}>\r\n        {\" \"}\r\n        {descriptive_text} Den etterlatte har person-id{\" \"}\r\n        <Bold>{survivor_name}</Bold>. Arv til gjenlevende er{\" \"}\r\n        <Bold>{survivor_inheritance_sum}</Bold>, og de resterende{\" \"}\r\n        <Bold>{genealogy_inheritance_sum}</Bold> går til slekten.\r\n      </Text>\r\n    );\r\n  }\r\n};\r\n\r\nexport default SurvivingPartnerUtils;\r\n","import { Text, View } from \"@react-pdf/renderer\";\r\nimport InheritanceConstants from \"../../../../../ChatbotComponent/Helper/Methods/InheritanceConstants\";\r\nimport { PliktdelsarvCalculation } from \"../../../../PliktdelsarvCalculation\";\r\nimport { styles } from \"../../../styles\";\r\nimport { add_legal_references, currencyFormatNO } from \"../pdf_utils\";\r\nimport { Bold } from \"../text-styles/Bold\";\r\n\r\nconst SurvivingPartnerPliktUtils = (value: PliktdelsarvCalculation) => {\r\n  let survivor_name = \"Fix error\";\r\n  if (value.survivor) {\r\n    survivor_name = value.actionProvider.getPerson(\r\n      value.survivor,\r\n      value.state.personsMap\r\n    )._personName;\r\n  }\r\n\r\n  const survivor_inheritance_sum = currencyFormatNO(\r\n    value.survivor_inheritance_sum\r\n  );\r\n  const genealogy_inheritance_sum = currencyFormatNO(\r\n    value.genealogy_inheritance_sum\r\n  );\r\n\r\n  const inheritanceDescriptiveText = getInheritanceDescriptiveText(\r\n    value.descriptive_text,\r\n    value.inheritanceConstants,\r\n    survivor_name,\r\n    survivor_inheritance_sum,\r\n    genealogy_inheritance_sum\r\n  );\r\n  const legalReferenceText = add_legal_references(\r\n    value.surviving_reference_paragraphs,\r\n    value.inheritanceConstants.CODE_PARAGRAPHS\r\n  );\r\n\r\n  return (\r\n    <View>\r\n      <Text style={styles.paragraphHeading}>\r\n        Gjenlevende ektefelle eller samboer\r\n      </Text>\r\n      {inheritanceDescriptiveText}\r\n      {legalReferenceText}\r\n    </View>\r\n  );\r\n};\r\n\r\nconst getInheritanceDescriptiveText = (\r\n  descriptive_text: string,\r\n  inheritance_constants: InheritanceConstants,\r\n  survivor_name: string,\r\n  survivor_inheritance_sum: string,\r\n  genealogy_inheritance_sum: string\r\n) => {\r\n  if (\r\n    [\r\n      inheritance_constants.DESC_NO_SPOUSE_OR_COHABITANT,\r\n      inheritance_constants.DESC_COHABITANT_WITHOUT_COMMON_CHILD,\r\n    ].includes(descriptive_text)\r\n  ) {\r\n    return <Text style={styles.paragraph}>{descriptive_text}</Text>;\r\n  } else if (\r\n    [\r\n      inheritance_constants.DESC_SPOUSE_NO_CLOSE_RELATIVES,\r\n      inheritance_constants.DESC_SPOUSE_NO_CLOSE_RELATIVES_2,\r\n      inheritance_constants.DESC_COHABITANT_NO_CLOSE_RELATIVES,\r\n      inheritance_constants.DESC_COHABITANT_NO_CLOSE_RELATIVES_2,\r\n    ].includes(descriptive_text)\r\n  ) {\r\n    return (\r\n      <Text>\r\n        {descriptive_text} Den etterlatte har person-id{\" \"}\r\n        <Bold>{survivor_name}</Bold>. Arv til gjenlevende er{\" \"}\r\n        {survivor_inheritance_sum}.\r\n      </Text>\r\n    );\r\n  } else {\r\n    return (\r\n      <Text style={styles.paragraph}>\r\n        {\" \"}\r\n        {descriptive_text} Den etterlatte har person-id{\" \"}\r\n        <Bold>{survivor_name}</Bold>. Arv til gjenlevende er{\" \"}\r\n        <Bold>{survivor_inheritance_sum}</Bold>, og de resterende{\" \"}\r\n        <Bold>{genealogy_inheritance_sum}</Bold> går til slekten.\r\n      </Text>\r\n    );\r\n  }\r\n};\r\n\r\nexport default SurvivingPartnerPliktUtils;\r\n","import { View } from \"@react-pdf/renderer\";\r\nimport { useContext } from \"react\";\r\nimport { UserContext } from \"../../../FinalDocument\";\r\nimport { styles } from \"../../../styles\";\r\nimport SurvivingPartnerUtils from \"./SurvivingPartner.utils\";\r\nimport SurvivingPartnerPliktUtils from \"./SurvivingPartnerPlikt.utils\";\r\n\r\nexport const SurvivingPartner = (props: { inheritanceMode: boolean }) => {\r\n  if (props.inheritanceMode) {\r\n    const value = useContext(UserContext).inheritanceCalculation;\r\n    const survivingPartnerParagraph = SurvivingPartnerUtils(value);\r\n    return <View style={styles.section}>{survivingPartnerParagraph}</View>;\r\n  } else {\r\n    const value = useContext(UserContext).pliktdelsarvCalculation;\r\n    const survivingPartnerParagraph = SurvivingPartnerPliktUtils(value);\r\n    return <View style={styles.section}>{survivingPartnerParagraph}</View>;\r\n  }\r\n};\r\n","import { Text, View } from \"@react-pdf/renderer\";\r\nimport { styles } from \"../../styles\";\r\nimport { Genealogy } from \"../common/genealogy/Genealogy\";\r\nimport { IntroductionPage } from \"../common/introSection/IntroductionPage\";\r\nimport { Summary } from \"../common/summary/Summary\";\r\nimport { SurvivingPartner } from \"../common/survivingPartner/SurvivingPartner\";\r\n\r\nexport const FirstSection = () => {\r\n  return (\r\n    <View style={styles.section}>\r\n      <IntroductionPage inheritanceMode />\r\n      <Text style={styles.subheading}>Beregnet arv i fravær av testament</Text>\r\n      <SurvivingPartner inheritanceMode />\r\n      <Genealogy inheritanceMode />\r\n      <Summary inheritanceMode />\r\n    </View>\r\n  );\r\n};\r\n","import { Text, View } from \"@react-pdf/renderer\";\r\nimport { useContext } from \"react\";\r\nimport { styles } from \"../../../styles\";\r\nimport { UserContext } from \"../../../FinalDocument\";\r\n\r\nexport const UndividedEstateCalculation = () => {\r\n  const value = useContext(UserContext).inheritanceCalculation;\r\n  let undividedResult = \"\";\r\n  if (value.state.undividedEstate.undividedEstateChoice) {\r\n    const addUndividedEstateRelatives = add_undivided_estate_relatives();\r\n    const addUndividedEstateSummary = add_undivided_estate_summary();\r\n    // TODO prepare these functions\r\n    undividedResult =\r\n      addUndividedEstateRelatives + \" \" + addUndividedEstateSummary;\r\n  } else {\r\n    undividedResult = \"Ingen uskiftesituasjon\";\r\n  }\r\n  return (\r\n    <View style={styles.section} break>\r\n      <Text style={styles.subheading}>Legg til introduksjon her</Text>\r\n      <Text style={styles.paragraph}>{undividedResult}</Text>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst add_undivided_estate_relatives = () => {\r\n  return \"add_undivided_estate_relatives\";\r\n};\r\n\r\nconst add_undivided_estate_summary = () => {\r\n  return \"add_undivided_estate_summary\";\r\n};\r\n","import { Text, View } from \"@react-pdf/renderer\";\r\nimport { styles } from \"../../styles\";\r\nimport { UndividedEstateCalculation } from \"./UndividedEstateCalculation/UndividedEstateCalculation\";\r\nimport { useContext } from \"react\";\r\nimport { UserContext } from \"../../FinalDocument\";\r\nexport const SecondSection = () => {\r\n  const value = useContext(UserContext).inheritanceCalculation;\r\n\r\n  const undividedStateElement = (\r\n    <View style={styles.section}>\r\n      <Text style={styles.subheading}>Uskiftearv</Text>\r\n      <UndividedEstateCalculation />\r\n    </View>\r\n  );\r\n  {\r\n    const secondSectionElement = value.state.undividedEstate\r\n      .undividedEstateChoice ? (\r\n      undividedStateElement\r\n    ) : (\r\n      <Text></Text>\r\n    );\r\n    return secondSectionElement;\r\n  }\r\n};\r\n","import { Text, View } from \"@react-pdf/renderer\";\r\nimport { styles } from \"../../styles\";\r\nimport { Genealogy } from \"../common/genealogy/Genealogy\";\r\nimport { IntroductionPage } from \"../common/introSection/IntroductionPage\";\r\nimport { Summary } from \"../common/summary/Summary\";\r\nimport { SurvivingPartner } from \"../common/survivingPartner/SurvivingPartner\";\r\n\r\nexport const ThirdSection = () => {\r\n  return (\r\n    <View style={styles.section}>\r\n      <Text style={styles.subheading}>Pliktdelsarv</Text>\r\n      <IntroductionPage inheritanceMode={false} />\r\n      <SurvivingPartner inheritanceMode={false} />\r\n      <Genealogy inheritanceMode={false} />\r\n      <Summary inheritanceMode={false} />\r\n    </View>\r\n  );\r\n};\r\n","import { Text, View } from \"@react-pdf/renderer\";\r\nimport { useContext } from \"react\";\r\nimport { UserContext } from \"../../../FinalDocument\";\r\nimport { styles } from \"../../../styles\";\r\nimport { addLovdataLink } from \"../../common/pdf_utils\";\r\n\r\nconst generalReservationsUtils = () => {\r\n  const value = useContext(UserContext).inheritanceCalculation;\r\n  return {\r\n    uskifteText: getUskifteText(),\r\n    testamentText: getTestamentText(),\r\n    avkortingText: getavkortingText(value),\r\n    barnText: getBarnText(value),\r\n  };\r\n};\r\n\r\nconst getUskifteText = () => (\r\n  <Text style={styles.paragraph}>\r\n    <Text style={styles.paragraphHeading}>Uskifte</Text>\r\n    {\"\\n\"}\r\n    <Text>Beregningene forutsetter at avdøde ikke sitter i uskiftet bo.</Text>\r\n  </Text>\r\n);\r\n\r\nconst getTestamentText = () => (\r\n  <Text style={styles.paragraph}>\r\n    <Text style={styles.paragraphHeading}>Testament</Text>\r\n    {\"\\n\"}\r\n    <Text>\r\n      Beregningene forutsetter at avdøde ikke etterlater seg testament.\r\n    </Text>\r\n  </Text>\r\n);\r\n\r\nconst getavkortingText = (value: any) => {\r\n  const code_paragraph = \"75 første ledd\";\r\n  const lovdata_link = addLovdataLink(\r\n    code_paragraph,\r\n    value.inheritanceConstants.LAW_LINKS\r\n  );\r\n  return (\r\n    <Text style={styles.paragraph}>\r\n      <Text style={styles.paragraphHeading}>Avkorting i arv</Text>\r\n      {\"\\n\"}\r\n      <Text>\r\n        Bestemmelsene om avkorting i arvelovens § 75 er ikke tatt hensyn til i\r\n        bergningene.\r\n      </Text>\r\n      {\"\\n\"}\r\n      <Text style={styles.redText}>\r\n        Det er særlig viktig å være OBS på mulig avkorting dersom det har blitt\r\n        gitt forskudd på arv.{\"\\n\"}\r\n      </Text>\r\n      <Text>{lovdata_link}</Text>\r\n    </Text>\r\n  );\r\n};\r\n\r\nconst getBarnText = (value: any) => {\r\n  const code_paragraph = \"7\";\r\n  return (\r\n    <Text style={styles.paragraph}>\r\n      <Text style={styles.paragraphHeading}>Barn</Text>\r\n      {\"\\n\"}\r\n      <Text>Vær obs på de særskilte bestemmelsene i arveloven § 7.</Text>\r\n      <Text>\r\n        {addLovdataLink(code_paragraph, value.inheritanceConstants.LAW_LINKS)}\r\n      </Text>\r\n    </Text>\r\n  );\r\n};\r\n\r\nexport default generalReservationsUtils;\r\n","import { Text, View } from \"@react-pdf/renderer\";\r\nimport { styles } from \"../../../styles\";\r\nimport generalReservationsUtils from \"./GeneralReservationsUtils\";\r\n\r\nexport const GeneralReservations = () => {\r\n  const generalReservationsText = generalReservationsUtils();\r\n  return (\r\n    <View style={styles.section} break>\r\n      <Text style={styles.paragraphHeading}>Generelle forbehold</Text>\r\n      {\"\\n\\n\"}\r\n      {generalReservationsText.uskifteText}\r\n      {\"\\n\\n\"}\r\n      {generalReservationsText.testamentText}\r\n      {\"\\n\\n\"}\r\n      {generalReservationsText.avkortingText}\r\n      {\"\\n\\n\"}\r\n      {generalReservationsText.barnText}\r\n      {\"\\n\\n\"}\r\n    </View>\r\n  );\r\n};\r\n","import { Text, View } from \"@react-pdf/renderer\";\r\nimport { useContext } from \"react\";\r\nimport { UserContext } from \"../../../FinalDocument\";\r\nimport { styles } from \"../../../styles\";\r\nimport { currencyFormatNO } from \"../../common/pdf_utils\";\r\nimport { Bold } from \"../../common/text-styles/Bold\";\r\n\r\nexport const NationalInsurance = () => {\r\n  const NationalInsuranceText = getNationalInsuranceString();\r\n  return (\r\n    <View style={styles.section} break>\r\n      <Text style={styles.paragraphHeading}>Folketrygdens grunnbeløp</Text>\r\n      <Text style={styles.paragraph}>{NationalInsuranceText}</Text>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst getNationalInsuranceString = () => {\r\n  const value = useContext(UserContext).inheritanceCalculation;\r\n  return (\r\n    <Text>\r\n      <Text>\r\n        Enkelte terskelverdier beregnes utfra det til enhver tid gjeldende\r\n        grunnbeløp i folketrygden. I beregningene er det forutsatt at\r\n        grunnbeløpet i folketrygden er på{\" \"}\r\n      </Text>\r\n      <Bold>{currencyFormatNO(value.inheritanceConstants.G)}</Bold>.\r\n    </Text>\r\n  );\r\n};\r\n","import { Text, View } from \"@react-pdf/renderer\";\r\nimport { styles } from \"../../styles\";\r\nimport { GeneralReservations } from \"./generalReservations/GeneralReservations\";\r\nimport { NationalInsurance } from \"./nationalInsurance/NationalInsurance\";\r\n\r\nexport const FourthSection = () => {\r\n  return (\r\n    <View style={styles.section}>\r\n      <Text style={styles.subheading}>Merknader og forbehold</Text>\r\n      {\"\\n\\n\"}\r\n      <NationalInsurance />\r\n      <GeneralReservations />\r\n    </View>\r\n  );\r\n};\r\n","import {\r\n    Text,\r\n} from \"@react-pdf/renderer\";\r\nimport { styles } from \"../../styles\";\r\n\r\nexport const Footer = () => {\r\n    return (<Text style={styles.pageNumber} render={({ pageNumber, totalPages }) => (\r\n        `${pageNumber} / ${totalPages}`\r\n    )} fixed />)\r\n}","import {\r\n    Text,\r\n} from \"@react-pdf/renderer\";\r\nimport { styles } from \"../../styles\";\r\n\r\nexport const Header = () => {\r\n    return (<Text style={styles.header} fixed>\r\n        Arvebot\r\n    </Text>)\r\n}","import { Image, Text, View } from \"@react-pdf/renderer\";\r\nimport { styles } from \"../../styles\";\r\nimport domtoimage from \"dom-to-image\";\r\nimport { useState } from \"react\";\r\n\r\nexport const FifthSection = () => {\r\n  const [url, setUrl] = useState(\"src/assets/images/arvebot-logo.png\");\r\n  const node = document.querySelector(\".react-flow\") as Node;\r\n  domtoimage\r\n    .toJpeg(node, {\r\n      filter: (node: Node): boolean => {\r\n        // we don't want to add the minimap and the controls to the image\r\n\r\n        if (\r\n          (node as HTMLElement)?.classList?.contains(\"react-flow__minimap\") ||\r\n          (node as HTMLElement)?.classList?.contains(\"react-flow__controls\")\r\n        ) {\r\n          return false;\r\n        }\r\n\r\n        return true;\r\n      },\r\n    })\r\n    .then(function (dataUrl: any) {\r\n      setUrl(dataUrl);\r\n    })\r\n    .catch(function (error: any) {\r\n      console.error(\"oops, something went wrong!\", error);\r\n    });\r\n  return (\r\n    <View>\r\n      <Image style={styles.image} src={url} />\r\n    </View>\r\n  );\r\n};\r\n","import { Document, Page } from \"@react-pdf/renderer\";\r\nimport { FirstSection } from \"./Sections/firstSection/FirstSection\";\r\nimport { SecondSection } from \"./Sections/secondSection/SecondSection\";\r\nimport { ThirdSection } from \"./Sections/thirdSection/ThirdSection\";\r\nimport { FourthSection } from \"./Sections/fourthSection/FourthSection\";\r\nimport { styles } from \"./styles\";\r\nimport { IntroductionPage } from \"./Sections/common/introSection/IntroductionPage\";\r\nimport { Footer } from \"./Sections/common/Footer\";\r\nimport { Header } from \"./Sections/common/Header\";\r\nimport { createContext } from \"react\";\r\nimport { InheritanceCalculation } from \"../InheritanceCalculation\";\r\nimport \"react-pdf/dist/umd/Page/AnnotationLayer.css\";\r\nimport { PliktdelsarvCalculation } from \"../PliktdelsarvCalculation\";\r\nimport { UndividedCalculation } from \"../UndividedCalculation\";\r\nimport { FifthSection } from \"./Sections/fifthSection/fifthSection\";\r\n\r\ninterface FinalObjectInput {\r\n  inheritanceCalculation: InheritanceCalculation;\r\n  pliktdelsarvCalculation: PliktdelsarvCalculation;\r\n  // undividedCalculation: UndividedCalculation|\r\n}\r\n\r\nexport const UserContext = createContext(\r\n  {} as {\r\n    inheritanceCalculation: InheritanceCalculation;\r\n    pliktdelsarvCalculation: PliktdelsarvCalculation;\r\n  }\r\n);\r\n// First Section - Introduction, Inheritance\r\n// Second Section - Uskiftearv\r\n// Third Section - Pliktdelsarv\r\n// Fourth Section - Merknader og forbehold\r\nconst FinalDocument = (props: { inputData: FinalObjectInput }) => {\r\n  return (\r\n    <Document>\r\n      <Page size=\"A4\" style={styles.page}>\r\n        <UserContext.Provider\r\n          value={{\r\n            inheritanceCalculation: props.inputData.inheritanceCalculation,\r\n            pliktdelsarvCalculation: props.inputData.pliktdelsarvCalculation,\r\n          }}\r\n        >\r\n          <Header />\r\n          <FirstSection />\r\n          <SecondSection />\r\n          <ThirdSection />\r\n          <FourthSection />\r\n          <FifthSection />\r\n          <Footer />\r\n        </UserContext.Provider>\r\n      </Page>\r\n    </Document>\r\n  );\r\n};\r\nexport default FinalDocument;\r\n","import { ChatbotInterface } from \"../ChatbotComponent/Generics\";\r\nimport { NodeEntity } from \"../ChatbotComponent/Helper/Classes/NodeEntity\";\r\nimport Norsk from \"../../../languages/translationNO.json\";\r\nimport { createIntl, createIntlCache } from \"react-intl\";\r\nimport { ReportUtils } from \"./ReportUtils\";\r\nimport InheritanceConstants from \"../ChatbotComponent/Helper/Methods/InheritanceConstants\";\r\nimport ActionProvider from \"../ChatbotComponent/ActionProvider\";\r\nconst cache = createIntlCache();\r\nconst intl = createIntl({ locale: \"nb-NO\", messages: Norsk }, cache);\r\n\r\ninterface PliktCalculationInterface {\r\n  survivor: number | null;\r\n  survivor_type: string;\r\n  class_closest: number | undefined;\r\n  distance_closest: number | undefined;\r\n  old_surviving_reference_paragraphs: string;\r\n  surviving_reference_paragraphs: Array<string>;\r\n  minimum_surviving_inheritance: number;\r\n  surviving_fraction: number;\r\n  descriptive_text: string;\r\n  survivor_inheritance_sum: number;\r\n  genealogy_inheritance_sum: number;\r\n  splits_with_chains: [];\r\n  genealogy_inheritance: [];\r\n}\r\ninterface pliktFractionListType {\r\n  person: string;\r\n  frac: number;\r\n  chains: Array<string>;\r\n}\r\nexport const splits_initial = {\r\n  person: \"\",\r\n  frac: 0,\r\n  chains: [],\r\n};\r\nexport class PliktdelsarvCalculation {\r\n  state: ChatbotInterface;\r\n  inheritanceConstants: InheritanceConstants;\r\n  actionProvider: ActionProvider;\r\n  person: NodeEntity;\r\n  survivor: number | null = null;\r\n  survivor_type = \"\";\r\n  class_closest: number | undefined;\r\n  distance_closest: number | undefined;\r\n  old_surviving_reference_paragraphs = \"\";\r\n  surviving_reference_paragraphs: string[] = [];\r\n  minimum_surviving_inheritance = 0;\r\n  surviving_fraction = 0;\r\n  descriptive_text = \"\";\r\n  survivor_inheritance_sum = 0;\r\n  genealogy_inheritance_sum = 0;\r\n  splits_with_chains: [] = [];\r\n  genealogy_inheritance: Array<pliktFractionListType> = [];\r\n  genealogy_splits: pliktFractionListType = splits_initial;\r\n  will: string | undefined;\r\n  reportUtils: any;\r\n  constructor(\r\n    person: NodeEntity,\r\n    actionProvider: ActionProvider,\r\n    state: ChatbotInterface,\r\n    inheritanceConstants: InheritanceConstants,\r\n    will = undefined\r\n  ) {\r\n    this.state = state;\r\n    this.actionProvider = actionProvider;\r\n    this.person = actionProvider.getNode(person._id, this.state.nodeMap);\r\n    this.inheritanceConstants = inheritanceConstants;\r\n    this.will = will;\r\n    this.reportUtils = new ReportUtils(actionProvider, state);\r\n  }\r\n\r\n  computeInheritance = () => {\r\n    [this.class_closest, this.distance_closest] =\r\n      this.actionProvider.get_class_and_distance_closest_surviving_relative(\r\n        this.state.testator,\r\n        this.state\r\n      );\r\n\r\n    if (this.person.has_surviving_spouse()) {\r\n      // TODO define has_surviving_spouse in NodeEntity.ts\r\n      this.survivor = this.person._spouse;\r\n      this.survivor_type = intl.formatMessage({\r\n        id: \"REPORT.Inheritance.survivorType1\",\r\n      });\r\n\r\n      this.surviving_reference_paragraphs.push(\r\n        intl.formatMessage({\r\n          id: \"REPORT.Inheritance.surviving_reference_paragraphs_10annet\",\r\n        })\r\n      );\r\n      if (this.class_closest === 1) {\r\n        this.minimum_surviving_inheritance =\r\n          this.inheritanceConstants.MINIMUM_INHERITANCE_SPOUSE_VS_CHILDREN;\r\n        this.descriptive_text = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.DescriptiveTest_firstClass_spouse_4G\",\r\n        });\r\n      } else {\r\n        this.minimum_surviving_inheritance =\r\n          this.inheritanceConstants.MINIMUM_INHERITANCE_SPOUSE_VS_CHILDREN;\r\n        this.descriptive_text = intl.formatMessage({\r\n          id: \"REPORT.Inheritance.DescriptiveTest_firstClass_spouse_6G\",\r\n        });\r\n      }\r\n    } else {\r\n      this.survivor = null;\r\n      this.surviving_reference_paragraphs = [];\r\n      this.descriptive_text =\r\n        this.inheritanceConstants.DESC_NO_SPOUSE_OR_COHABITANT;\r\n      this.minimum_surviving_inheritance = 0;\r\n    }\r\n  };\r\n\r\n  computeGenealogyInheritance = (person_id: number) => {\r\n    this.survivor_inheritance_sum = Math.min(\r\n      this.state.netWealth,\r\n      this.minimum_surviving_inheritance\r\n    );\r\n\r\n    console.log(this.state.netWealth);\r\n    console.log(this.survivor_inheritance_sum);\r\n    console.log(this.state.netWealth - this.survivor_inheritance_sum);\r\n    console.log(\r\n      this.state.netWealth * this.inheritanceConstants.FRACTION_PLIKTDEL\r\n    );\r\n    console.log(\r\n      this.inheritanceConstants.LINE_MAXIMUM_PLIKTDEL *\r\n        this.state.testator._children.length\r\n    );\r\n    console.log(this.state.testator._children.length);\r\n\r\n    this.genealogy_inheritance_sum = Math.min(\r\n      this.state.netWealth - this.survivor_inheritance_sum,\r\n      this.state.netWealth * this.inheritanceConstants.FRACTION_PLIKTDEL,\r\n      this.inheritanceConstants.LINE_MAXIMUM_PLIKTDEL *\r\n        this.state.testator._children.length\r\n    );\r\n    if (this.genealogy_inheritance_sum !== 0) {\r\n      this.splits_with_chains = this.reportUtils.split_evenly_between_lines(\r\n        this.state.testator._children\r\n      );\r\n\r\n      const genealogy_splits = this.reportUtils.combine_duplicates(\r\n        this.splits_with_chains\r\n      );\r\n\r\n      genealogy_splits.map((genealogy_split: any) => {\r\n        return this.genealogy_inheritance.push({\r\n          person: genealogy_split.person,\r\n          frac: genealogy_split.frac * this.genealogy_inheritance_sum,\r\n          chains: genealogy_split.chains,\r\n        });\r\n      });\r\n    } else {\r\n      this.splits_with_chains = [];\r\n      this.genealogy_splits = splits_initial;\r\n      this.genealogy_inheritance = [splits_initial];\r\n    }\r\n    return this.genealogy_inheritance;\r\n  };\r\n}\r\n","import QuestionConsts from \"./Helper/Methods/QuestionConstants\";\r\nimport InheritanceConstants from \"./Helper/Methods/InheritanceConstants\";\r\nimport Person from \"./Helper/Classes/Person\";\r\nimport Family from \"./Helper/Classes/Family\";\r\nimport { ParentChildSelector } from \"./Helper/Enums/ParentChildSelector\";\r\nimport { ChatbotInterface, InitialChatbotState } from \"./Generics\";\r\nimport {\r\n  ChatStepTypes,\r\n  QuestionType,\r\n  undividedOwnershipType,\r\n} from \"./Helper/Enums/ChatStepTypes\";\r\nimport { ReactElement } from \"react\";\r\nimport {\r\n  CurrencyOutput,\r\n  ParseCurrencyStringForOutput,\r\n} from \"./Helper/Methods/HandleCurrency\";\r\nimport InfoMessagesWidget from \"./Custom/Widgets/InfoMessagesWidget/InfoMessagesWidget\";\r\nimport { NodeEntity } from \"./Helper/Classes/NodeEntity\";\r\nimport chartSelector from \"../../../store/chartSelector\";\r\nimport { messageService } from \"./services/ChatbotCommunicator\";\r\nimport { InheritanceCalculation } from \"../Reports/InheritanceCalculation\";\r\nimport { PDFDownloadLink } from \"@react-pdf/renderer\";\r\n// import ReactPDF from '@react-pdf/renderer';\r\nimport FinalDocument from \"../Reports/PDF/FinalDocument\";\r\nimport { PliktdelsarvCalculation } from \"../Reports/PliktdelsarvCalculation\";\r\n// import _ from \"lodash\";\r\n\r\nclass ActionProvider {\r\n  createChatBotMessage: (\r\n    questionElement: ReactElement,\r\n    widget?: Record<string, unknown>\r\n  ) => ReactElement;\r\n  setState: (state: unknown) => ChatbotInterface;\r\n  createClientMessage: (messageElement: ReactElement) => ReactElement<any, any>;\r\n  QuestionConsts: QuestionConsts;\r\n  InheritanceConstants: InheritanceConstants;\r\n  family: Family;\r\n  stateRef: any;\r\n  checkstate: any = null;\r\n  isStarted = true;\r\n  glb_state: any = null;\r\n  GRANDCHILDREN_PATH_LIMIT = 4;\r\n  constructor(\r\n    createChatBotMessage: (\r\n      questionElement: ReactElement,\r\n      widget?: Record<string, unknown>\r\n    ) => ReactElement,\r\n    setStateFunc: (state: any) => any,\r\n    createClientMessage: (messageElement: ReactElement) => any,\r\n    stateRef: any\r\n  ) {\r\n    this.createChatBotMessage = createChatBotMessage;\r\n    this.setState = setStateFunc;\r\n    this.createClientMessage = createClientMessage;\r\n    this.QuestionConsts = new QuestionConsts();\r\n    this.InheritanceConstants = new InheritanceConstants();\r\n    this.family = new Family();\r\n    this.stateRef = stateRef;\r\n    // this.setRevertListeners()\r\n  }\r\n\r\n  setRevertListeners() {\r\n    messageService.clearAllInternalSubscription();\r\n    /* eslint-disable @typescript-eslint/no-unused-vars */\r\n    const subscription = messageService\r\n      .getMessageInChatbot()\r\n      .subscribe((message) => {\r\n        this.revertState();\r\n      });\r\n    messageService.addInternalSubscription(subscription);\r\n  }\r\n  revertState = () => {\r\n    const revertCount = localStorage.getItem(\"revertCount\");\r\n    let lastState: any;\r\n    if (revertCount) {\r\n      lastState = messageService.getPreviousState(parseInt(revertCount));\r\n    } else {\r\n      lastState = messageService.getPreviousState(0);\r\n    }\r\n\r\n    if (lastState) {\r\n      if (revertCount) {\r\n        localStorage.setItem(\r\n          \"revertCount\",\r\n          (parseInt(revertCount) + 1).toString()\r\n        );\r\n      } else {\r\n        localStorage.setItem(\"revertCount\", \"1\");\r\n      }\r\n      this.setState((state: any) => {\r\n        state = lastState;\r\n        return this.returnState(state);\r\n      });\r\n    }\r\n  };\r\n  // setPreviousStateData = (currentState: any, lastState: any) => {\r\n  //\r\n  // }\r\n\r\n  handleTestator = (testatorResponse: string): void => {\r\n    /**\r\n     *  * function for handling personID replies.\r\n     *  * stepID is updated to 2 and then proceed to wealth question.\r\n     *  * open reply, no conditions for now.\r\n     */\r\n\r\n    const undividedEstateQuestion = this.createChatBotMessage(\r\n      this.QuestionConsts.UndividedEstateQuestion,\r\n      this.QuestionConsts.YesNoWidgetOptions\r\n    );\r\n    this.setState((state: ChatbotInterface) => ({\r\n      ...state,\r\n      stepID: ChatStepTypes.testatorStep,\r\n      testator: this.createTestator(testatorResponse, state),\r\n    }));\r\n    this.setState((state: ChatbotInterface) => ({\r\n      ...state,\r\n    }));\r\n\r\n    this.addMessageToBotState(undividedEstateQuestion);\r\n  };\r\n\r\n  handleUndividedEstateChoice = (\r\n    undividedEstateChoiceResponse: boolean\r\n  ): void => {\r\n    // TODO: implement Yes/No conditions for undivided states.\r\n    // TODO: need to fix the values in object and correctly implement the whole algorithm\r\n    // TODO: check for correct text for the questions. (last step, the format of questions already available)\r\n    this.setState((state: ChatbotInterface) => {\r\n      // if (state.yesNoClickedFlag) {\r\n      // const undividedEstateResponseModifiedResult =\r\n      //   this.QuestionConsts.UndividedEstateResultText(`${undividedEstateChoiceResponse}`);\r\n      //   const undividedEstateClientMessage = this.createClientMessage(\r\n      //     undividedEstateResponseModifiedResult\r\n      //   );\r\n      //   this.addMessageToBotState(undividedEstateClientMessage);\r\n      // }\r\n      if (undividedEstateChoiceResponse) {\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.undividedEstateStep,\r\n          undividedEstate: {\r\n            ...state.undividedEstate,\r\n            undivided_flag: QuestionType.part1,\r\n            undividedEstateChoice: undividedEstateChoiceResponse,\r\n          },\r\n        };\r\n        const totalEstateNetValueQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.TotalEstateNetValueQuestion\r\n        );\r\n        this.addMessageToBotState(totalEstateNetValueQuestion);\r\n        return this.returnState(state);\r\n      } else {\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.netWealthStep,\r\n          undividedEstate: {\r\n            ...state.undividedEstate,\r\n            undivided_flag: \"none\",\r\n            undividedEstateChoice: undividedEstateChoiceResponse,\r\n          },\r\n        };\r\n        const netWealthQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.NetWealthQuestion\r\n        );\r\n        this.addMessageToBotState(netWealthQuestion);\r\n        return this.returnState(state);\r\n      }\r\n    });\r\n  };\r\n\r\n  handleTotalEstateValueResponse = (totalEstateValueResponse: string): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      const totalEstateValueQuestion = this.createChatBotMessage(\r\n        this.QuestionConsts.TotalEstateNetValueQuestion\r\n      );\r\n      const currencyIntResponse = CurrencyOutput(totalEstateValueResponse);\r\n      const currencyStringResponse = ParseCurrencyStringForOutput(\r\n        currencyIntResponse[1]\r\n      );\r\n      const currencyJSX = <InfoMessagesWidget label={currencyStringResponse} />;\r\n      if (currencyIntResponse[0] === 5) {\r\n        const ownershipTypeQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.OwnershipTypeQuestion,\r\n          this.QuestionConsts.OwnershipQuestionWidgetOptions\r\n        );\r\n        state = {\r\n          ...state,\r\n          undividedEstate: {\r\n            ...state.undividedEstate,\r\n            undivided_flag: QuestionType.part2,\r\n            totalEstateValue: parseInt(currencyIntResponse[1]),\r\n          },\r\n        };\r\n        const currencyCustom = this.createClientMessage(currencyJSX);\r\n        this.addMessageToBotState(currencyCustom);\r\n        this.addMessageToBotState(ownershipTypeQuestion);\r\n      } else {\r\n        const totalEstateWarning = this.createChatBotMessage(\r\n          this.QuestionConsts.TotalEstateNetValueWarning\r\n        );\r\n\r\n        this.addMessageToBotState(totalEstateWarning);\r\n        this.addMessageToBotState(totalEstateValueQuestion);\r\n      }\r\n\r\n      return this.returnState(state);\r\n    });\r\n  };\r\n\r\n  handleOwnershipResponse = (ownershipResponse: string): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      if (ownershipResponse === undividedOwnershipType.felleseie) {\r\n        state = {\r\n          ...state,\r\n          undividedEstate: {\r\n            ...state.undividedEstate,\r\n            undivided_flag: QuestionType.part6,\r\n            undividedEstateSeparateWealth:\r\n              state.undividedEstate.totalEstateValue / 2,\r\n            ownershipType: undividedOwnershipType.felleseie,\r\n          },\r\n\r\n          netWealth: state.undividedEstate.totalEstateValue / 2,\r\n        };\r\n        if (state.undividedEstate.undividedEstateSeparateWealth > 0) {\r\n          const undividedEstateSpouseQuestion = this.createChatBotMessage(\r\n            this.QuestionConsts.UndividedEstateSpouseQuestion\r\n          );\r\n          this.addMessageToBotState(undividedEstateSpouseQuestion);\r\n        } else {\r\n          if (\r\n            state.person !== state.testator &&\r\n            state.person._undividedEstateSpouse\r\n          ) {\r\n            const temp_class_undivided_spouse =\r\n              this.get_class_and_distance_closest_surviving_relative(\r\n                this.getNode(\r\n                  state.person._undividedEstateSpouse,\r\n                  state.nodeMap\r\n                ),\r\n                state\r\n              )[0];\r\n            if (temp_class_undivided_spouse === undefined) {\r\n              state.netWealth =\r\n                state.netWealth +\r\n                state.undividedEstate.undividedEstateSeparateWealth;\r\n              state.undividedEstate.undividedEstateSeparateWealth = 0;\r\n            }\r\n\r\n            if (state.netWealth <= 0) {\r\n              this.askFinalQuestion();\r\n            } else {\r\n              this.setState((state: ChatbotInterface) => {\r\n                state.stepID = ChatStepTypes.underAgeStep;\r\n              });\r\n              const underAgeQuestion = this.createChatBotMessage(\r\n                this.QuestionConsts.UnderAgeQuestion,\r\n                this.QuestionConsts.YesNoWidgetOptions\r\n              );\r\n              this.addMessageToBotState(underAgeQuestion);\r\n              return this.returnState(state);\r\n            }\r\n          }\r\n        }\r\n      } else if (ownershipResponse === \"DELVIS SÆREIE\") {\r\n        state = {\r\n          ...state,\r\n          undividedEstate: {\r\n            ...state.undividedEstate,\r\n            undivided_flag: QuestionType.part3,\r\n          },\r\n        };\r\n        const delvisFirstQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.DelvisFirstQuestion\r\n        );\r\n        this.addMessageToBotState(delvisFirstQuestion);\r\n      } else if (ownershipResponse === \"FULLT SÆREIE\") {\r\n        state = {\r\n          ...state,\r\n          undividedEstate: {\r\n            ...state.undividedEstate,\r\n            undivided_flag: QuestionType.part5,\r\n          },\r\n        };\r\n        const fulltSaereieQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.FulltSaereieQuestion\r\n        );\r\n        this.addMessageToBotState(fulltSaereieQuestion);\r\n      } else {\r\n        const ownershipTypeWarning = this.createChatBotMessage(\r\n          this.QuestionConsts.OwnershipTypeWarning\r\n        );\r\n        const ownershipTypeQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.OwnershipTypeQuestion,\r\n          this.QuestionConsts.OwnershipQuestionWidgetOptions\r\n        );\r\n        this.addMessageToBotState(ownershipTypeWarning);\r\n        this.addMessageToBotState(ownershipTypeQuestion);\r\n      }\r\n      return this.returnState(state);\r\n    });\r\n  };\r\n\r\n  handleDelvisFirstResponse = (delvisFirstResponse: string): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      const currencyIntResponse = CurrencyOutput(delvisFirstResponse);\r\n      const currencyStringResponse = ParseCurrencyStringForOutput(\r\n        currencyIntResponse[1]\r\n      );\r\n      const currencyJSX = <InfoMessagesWidget label={currencyStringResponse} />;\r\n      if (currencyIntResponse[0] === 5) {\r\n        const currencyCustom = this.createClientMessage(currencyJSX);\r\n        this.addMessageToBotState(currencyCustom);\r\n        state = {\r\n          ...state,\r\n          undividedEstate: {\r\n            ...state.undividedEstate,\r\n            undivided_flag: QuestionType.part4,\r\n            temp_first: parseInt(currencyIntResponse[1]),\r\n          },\r\n        };\r\n        const delvisSecondQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.DelvisSecondQuestion\r\n        );\r\n        this.addMessageToBotState(delvisSecondQuestion);\r\n      } else {\r\n        const netWealthWarning = this.createChatBotMessage(\r\n          this.QuestionConsts.NetWealthWarning\r\n        );\r\n        const delvisFirstQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.DelvisFirstQuestion\r\n        );\r\n        this.addMessageToBotState(netWealthWarning);\r\n        this.addMessageToBotState(delvisFirstQuestion);\r\n      }\r\n      return this.returnState(state);\r\n    });\r\n  };\r\n\r\n  handleDelvisSecondResponse = (delvisSecondResponse: string): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      const currencyIntResponse = CurrencyOutput(delvisSecondResponse);\r\n      const currencyStringResponse = ParseCurrencyStringForOutput(\r\n        currencyIntResponse[1]\r\n      );\r\n      const currencyJSX = <InfoMessagesWidget label={currencyStringResponse} />;\r\n      if (currencyIntResponse[0] === 5) {\r\n        const currencyCustom = this.createClientMessage(currencyJSX);\r\n        this.addMessageToBotState(currencyCustom);\r\n        state.undividedEstate.temp_last = parseInt(currencyIntResponse[1]);\r\n        state = {\r\n          ...state,\r\n          undividedEstate: {\r\n            ...state.undividedEstate,\r\n            undivided_flag: QuestionType.part6,\r\n            undividedEstateSeparateWealth:\r\n              (state.undividedEstate.totalEstateValue -\r\n                state.undividedEstate.temp_last -\r\n                state.undividedEstate.temp_first) /\r\n                2 +\r\n              state.undividedEstate.temp_first,\r\n          },\r\n          netWealth:\r\n            (state.undividedEstate.totalEstateValue -\r\n              state.undividedEstate.temp_last -\r\n              state.undividedEstate.temp_first) /\r\n              2 +\r\n            state.undividedEstate.temp_last,\r\n        };\r\n        const undividedEstateSpouseQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.UndividedEstateSpouseQuestion\r\n        );\r\n        this.addMessageToBotState(undividedEstateSpouseQuestion);\r\n      } else {\r\n        const netWealthWarning = this.createChatBotMessage(\r\n          this.QuestionConsts.NetWealthWarning\r\n        );\r\n        const delvisSecondQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.DelvisSecondQuestion\r\n        );\r\n        this.addMessageToBotState(netWealthWarning);\r\n        this.addMessageToBotState(delvisSecondQuestion);\r\n      }\r\n      return this.returnState(state);\r\n    });\r\n  };\r\n\r\n  handleFulltSaereieResponse = (fulltSaereieResponse: string): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      const currencyIntResponse = CurrencyOutput(fulltSaereieResponse);\r\n      const currencyStringResponse = ParseCurrencyStringForOutput(\r\n        currencyIntResponse[1]\r\n      );\r\n      const currencyJSX = <InfoMessagesWidget label={currencyStringResponse} />;\r\n      if (currencyIntResponse[0] === 5) {\r\n        const currencyCustom = this.createClientMessage(currencyJSX);\r\n        this.addMessageToBotState(currencyCustom);\r\n        state = {\r\n          ...state,\r\n          undividedEstate: {\r\n            ...state.undividedEstate,\r\n            undivided_flag: QuestionType.part6,\r\n            undividedEstateSeparateWealth:\r\n              state.undividedEstate.totalEstateValue -\r\n              parseInt(fulltSaereieResponse),\r\n          },\r\n          netWealth: parseInt(fulltSaereieResponse),\r\n        };\r\n        if (state.undividedEstate.undividedEstateSeparateWealth > 0) {\r\n          const undividedEstateSpouseQuestion = this.createChatBotMessage(\r\n            this.QuestionConsts.UndividedEstateSpouseQuestion\r\n          );\r\n          this.addMessageToBotState(undividedEstateSpouseQuestion);\r\n        }\r\n      } else {\r\n        const netWealthWarning = this.createChatBotMessage(\r\n          this.QuestionConsts.NetWealthWarning\r\n        );\r\n        const fulltSaereieQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.FulltSaereieQuestion\r\n        );\r\n        this.addMessageToBotState(netWealthWarning);\r\n        this.addMessageToBotState(fulltSaereieQuestion);\r\n      }\r\n      return this.returnState(state);\r\n    });\r\n  };\r\n\r\n  handleUndividedEstateSpouse = (\r\n    undividedEstateSpouseResponse: string\r\n  ): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      const undividedSpouseID = undividedEstateSpouseResponse;\r\n      if (undividedEstateSpouseResponse !== \"\") {\r\n        const newUndividedSpouse = this.createNewPerson(\r\n          undividedSpouseID,\r\n          state\r\n        );\r\n        state.person = newUndividedSpouse;\r\n        state.testator._undividedEstateSpouse = newUndividedSpouse._id;\r\n        state.testator.setPathforPartner(\r\n          ParentChildSelector.undividedSpouse,\r\n          newUndividedSpouse\r\n        );\r\n        const newUndividedSpouseDetail = Person.getPerson(\r\n          newUndividedSpouse._id,\r\n          state.personsMap\r\n        );\r\n        newUndividedSpouseDetail._deceased = true;\r\n        const textBeforeSucsrUndvdSpouse = this.createChatBotMessage(\r\n          this.QuestionConsts.TextBeforeSucsrUndvdSpouse\r\n        );\r\n        this.addMessageToBotState(textBeforeSucsrUndvdSpouse);\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.undividedEstateStep,\r\n          successor_flag: QuestionType.part3,\r\n          temp_person: newUndividedSpouse,\r\n          undividedSpouseId: newUndividedSpouse._id,\r\n        };\r\n\r\n        const newSuccessorQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.addSuccessorCount(\r\n            newUndividedSpouseDetail._personName\r\n          )\r\n        );\r\n        this.addMessageToBotState(newSuccessorQuestion);\r\n        return this.returnState(state);\r\n      } else {\r\n        const spouseChoiceQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.SpouseChoiceQuestion,\r\n          this.QuestionConsts.YesNoWidgetOptions\r\n        );\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.spouseChoice,\r\n        };\r\n        this.addMessageToBotState(spouseChoiceQuestion);\r\n      }\r\n      return this.returnState(state);\r\n    });\r\n  };\r\n\r\n  handleNetWealth(currencyResponse: string): void {\r\n    /**\r\n     *  * function for handling wealth replies.\r\n     *  * stepID is updated to 3 and then proceed to underage question.\r\n     *  * conditions for reply in currencyDisplayValue function.\r\n     */\r\n    this.setState((state: ChatbotInterface) => {\r\n      const netWealthQuestion = this.createChatBotMessage(\r\n        this.QuestionConsts.NetWealthQuestion\r\n      );\r\n      const currencyIntResponse = CurrencyOutput(currencyResponse);\r\n      const currencyStringResponse = ParseCurrencyStringForOutput(\r\n        currencyIntResponse[1]\r\n      );\r\n      const currencyJSX = <InfoMessagesWidget label={currencyStringResponse} />;\r\n      if (currencyIntResponse[0] === 5) {\r\n        const underAgeQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.UnderAgeQuestion,\r\n          this.QuestionConsts.YesNoWidgetOptions\r\n        );\r\n        const currencyCustom = this.createClientMessage(currencyJSX);\r\n        this.addMessageToBotState(currencyCustom);\r\n\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.underAgeStep,\r\n          netWealth: parseInt(currencyIntResponse[1]),\r\n        };\r\n        if (state.netWealth <= 0) {\r\n          this.askFinalQuestion();\r\n        }\r\n        this.addMessageToBotState(underAgeQuestion);\r\n      } else {\r\n        const netWealthWarning = this.createChatBotMessage(\r\n          this.QuestionConsts.NetWealthWarning\r\n        );\r\n\r\n        this.addMessageToBotState(netWealthWarning);\r\n        this.addMessageToBotState(netWealthQuestion);\r\n      }\r\n\r\n      return this.returnState(state);\r\n    });\r\n  }\r\n\r\n  handleUnderAge = (selectedOption: boolean): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      state.person = state.testator;\r\n      state.temp_person = state.testator;\r\n      this.getPerson(state.person._id, state.personsMap)._underAge =\r\n        selectedOption;\r\n      if (selectedOption) {\r\n        const cohabitantChoiceQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.CohabitantChoiceQuestion,\r\n          this.QuestionConsts.YesNoWidgetOptions\r\n        );\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.cohabitantChoice,\r\n        };\r\n        this.addMessageToBotState(cohabitantChoiceQuestion);\r\n\r\n        return this.returnState(state);\r\n      }\r\n\r\n      const spouseChoiceQuestion = this.createChatBotMessage(\r\n        this.QuestionConsts.SpouseChoiceQuestion,\r\n        this.QuestionConsts.YesNoWidgetOptions\r\n      );\r\n      state = {\r\n        ...state,\r\n        stepID: ChatStepTypes.spouseChoice,\r\n      };\r\n      this.addMessageToBotState(spouseChoiceQuestion);\r\n\r\n      return this.returnState(state);\r\n    });\r\n  };\r\n\r\n  handleSpouseChoice = (spouseChoice: boolean): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      // Spouse present\r\n      if (spouseChoice) {\r\n        state.stepID = ChatStepTypes.spouseStep;\r\n\r\n        const spouseQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.SpouseQuestion\r\n        );\r\n        this.addMessageToBotState(spouseQuestion);\r\n      }\r\n      // No spouse\r\n      else {\r\n        const testator = Person.getPerson(state.person._id, state.personsMap);\r\n        // is Adult, then ask for cohabitant\r\n        if (!testator._underAge && testator.spouse === undefined) {\r\n          state = {\r\n            ...state,\r\n            stepID: ChatStepTypes.cohabitantChoice,\r\n          };\r\n          const cohabitantChoiceQuestion = this.createChatBotMessage(\r\n            this.QuestionConsts.CohabitantChoiceQuestion,\r\n            this.QuestionConsts.YesNoWidgetOptions\r\n          );\r\n          this.addMessageToBotState(cohabitantChoiceQuestion);\r\n        } else {\r\n          state = {\r\n            ...state,\r\n            stepID: ChatStepTypes.successorStep,\r\n            successor_flag: QuestionType.part3,\r\n          };\r\n          const newSuccessorQuestion = this.createChatBotMessage(\r\n            this.QuestionConsts.addSuccessorCount(testator._personName)\r\n          );\r\n          this.addMessageToBotState(newSuccessorQuestion);\r\n        }\r\n      }\r\n      return this.returnState(state);\r\n    });\r\n  };\r\n\r\n  handleSpouseInput = (spouseResponse: string): void => {\r\n    /**\r\n     *  * function for handling spouseID replies.\r\n     *  * stepID is updated to 6 and then further conditions are evaluated next.\r\n     *  * open reply, no conditions for now.\r\n     */\r\n    const spouseID = spouseResponse;\r\n    this.setState((state: ChatbotInterface) => {\r\n      const testator = Person.getPerson(state.person._id, state.personsMap);\r\n      const newSpouse = this.createNewPerson(spouseID, state);\r\n      state.person._spouse = newSpouse._id;\r\n      state.person.setPathforPartner(ParentChildSelector.spouse, newSpouse);\r\n      if (\r\n        state.netWealth <=\r\n        this.InheritanceConstants.MINIMUM_INHERITANCE_SPOUSE_VS_CHILDREN\r\n      ) {\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.rearChildrenStep,\r\n        };\r\n        this.askFinalQuestion();\r\n        return this.returnState(state);\r\n      }\r\n\r\n      state = {\r\n        ...state,\r\n        stepID: ChatStepTypes.successorStep,\r\n        successor_flag: QuestionType.part3,\r\n      };\r\n      const newSuccessorQuestion = this.createChatBotMessage(\r\n        this.QuestionConsts.addSuccessorCount(testator._personName)\r\n      );\r\n      this.addMessageToBotState(newSuccessorQuestion);\r\n      return this.returnState(state);\r\n    });\r\n  };\r\n\r\n  handleCohabitantChoice = (cohabitantChoiceResponse: boolean): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      // if cohabitant choice is yes\r\n      if (cohabitantChoiceResponse) {\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.cohabitantStep,\r\n        };\r\n        const cohabitantQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.CohabitantQuestion\r\n        );\r\n        this.addMessageToBotState(cohabitantQuestion);\r\n      }\r\n      // if cohabitant choice is no\r\n      else {\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.successorStep,\r\n          successor_flag: QuestionType.part3,\r\n        };\r\n        const testator = Person.getPerson(state.person._id, state.personsMap);\r\n        const newSuccessorQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.addSuccessorCount(testator._personName)\r\n        );\r\n        this.addMessageToBotState(newSuccessorQuestion);\r\n      }\r\n      return this.returnState(state);\r\n    });\r\n  };\r\n\r\n  handleCohabitantInput = (cohabitantResponse: string): void => {\r\n    /**\r\n     *  * function for handling cohabitant replies.\r\n     *  * stepID is updated to 7 and then further conditions are evaluated next.\r\n     *  * open reply, no conditions for now.\r\n     */\r\n    // NodeEntity.setPathforPartner(ParentChildSelector.cohabitant, state.person._cohabitant)\r\n    const cohabitantID = cohabitantResponse;\r\n    this.setState((state: ChatbotInterface) => {\r\n      const testator = Person.getPerson(state.person._id, state.personsMap);\r\n      const newCohabitant = this.createNewPerson(cohabitantID, state);\r\n      state.person._cohabitant = newCohabitant._id;\r\n      state.person.setPathforPartner(\r\n        ParentChildSelector.cohabitant,\r\n        newCohabitant\r\n      );\r\n\r\n      if (\r\n        state.netWealth <=\r\n        this.InheritanceConstants.MINIMUM_INHERITANCE_SPOUSE_VS_CHILDREN\r\n      ) {\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.rearChildrenStep,\r\n        };\r\n        this.askFinalQuestion();\r\n        return this.returnState(state);\r\n      }\r\n      state = {\r\n        ...state,\r\n        stepID: ChatStepTypes.successorStep,\r\n        successor_flag: QuestionType.part3,\r\n      };\r\n      const newSuccessorQuestion = this.createChatBotMessage(\r\n        this.QuestionConsts.addSuccessorCount(testator._personName)\r\n      );\r\n      this.addMessageToBotState(newSuccessorQuestion);\r\n      return this.returnState(state);\r\n    });\r\n  };\r\n\r\n  handleSuccessorCount(message: string): void {\r\n    const successorCount = parseInt(message);\r\n    this.setState((state: ChatbotInterface) => {\r\n      state.temp_person._childCount = successorCount;\r\n      if (successorCount === 0) {\r\n        const parentID = state.temp_person.getParentId(state.nodeMap);\r\n        if (parentID) {\r\n          const parent = this.getNode(parentID, state.nodeMap);\r\n          state.temp_person = parent;\r\n          const successorProcessArray = state.successorProcessArray;\r\n          this.handleNoSuccessorCase(state, successorProcessArray);\r\n        } else {\r\n          this.handleClosingStep(state);\r\n        }\r\n        return this.returnState(state);\r\n      }\r\n\r\n      const questionType = state.temp_person._children.length === 0;\r\n      let itr_id = state.id;\r\n      for (let i = 0; i < state.temp_person._childCount; i++) {\r\n        const child = this.createEmptyNode(state, itr_id++);\r\n        state.temp_person.add_child(child, true);\r\n      }\r\n      state.id = itr_id;\r\n      if (\r\n        state.successorProcessArray.filter(\r\n          (t) => t[0] === state.temp_person._level\r\n        ).length === 0\r\n      ) {\r\n        state.successorProcessArray.push([state.temp_person._level, 1]);\r\n      }\r\n\r\n      state.successor_flag = QuestionType.part1;\r\n      const personName = this.getPerson(\r\n        state.temp_person._id,\r\n        state.personsMap\r\n      )._personName;\r\n      if (questionType) {\r\n        const newSuccessorQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.addSuccessorQuestion1(personName)\r\n        );\r\n        this.addMessageToBotState(newSuccessorQuestion);\r\n      } else {\r\n        const allChildrenID = this.getParentChildrenIDStrings(\r\n          state.temp_person._children,\r\n          state\r\n        );\r\n        const newSuccessorQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.addSuccessorQuestion2(personName, allChildrenID)\r\n        );\r\n        this.addMessageToBotState(newSuccessorQuestion);\r\n      }\r\n\r\n      return this.returnState(state);\r\n    });\r\n  }\r\n  handleSuccessorInput = (successorResponse: string): void => {\r\n    const child_name = successorResponse;\r\n    this.setState((state: ChatbotInterface) => {\r\n      const childID = state.temp_person.getChildUnprocessedNode();\r\n      if (childID) {\r\n        const child = this.getNode(childID, state.nodeMap);\r\n        const childDetail = this.getPerson(childID, state.personsMap);\r\n        childDetail._personName = child_name;\r\n        state = {\r\n          ...state,\r\n          successor_flag: QuestionType.part2,\r\n          temp_child: child,\r\n        };\r\n\r\n        const personId: any = Person.getPerson(\r\n          child._id,\r\n          state.personsMap\r\n        )?._personName;\r\n        const aliveQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.AliveQuestion(personId),\r\n          this.QuestionConsts.YesNoWidgetOptions\r\n        );\r\n        this.addMessageToBotState(aliveQuestion);\r\n        // }\r\n        return this.returnState(state);\r\n      } else {\r\n        // error case\r\n        console.log(\"Count of children exceeded\");\r\n      }\r\n    });\r\n  };\r\n\r\n  handleChildAliveOption = (alive: boolean): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      const child = state.temp_child;\r\n      const childDetail = this.getPerson(child._id, state.personsMap);\r\n      // const temp_person: NodeEntity = state.temp_person\r\n      const successorProcessArray = state.successorProcessArray;\r\n      if (alive) {\r\n        childDetail._deceased = false;\r\n        this.handleNoSuccessorCase(state, successorProcessArray);\r\n      } else {\r\n        // not alive\r\n        childDetail._deceased = true;\r\n        if (state.stepID === ChatStepTypes.grandParentStep) {\r\n          const generationCount = child.getGenerationCount();\r\n          if (generationCount === 2) {\r\n            this.handleNoSuccessorCase(state, successorProcessArray);\r\n            return this.returnState(state);\r\n          }\r\n        }\r\n        state = {\r\n          ...state,\r\n          successor_flag: QuestionType.part3,\r\n          temp_person: child,\r\n        };\r\n        const newSuccessorQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.addSuccessorCount(childDetail._personName)\r\n        );\r\n        this.addMessageToBotState(newSuccessorQuestion);\r\n        return this.returnState(state);\r\n      }\r\n      return this.returnState(state);\r\n    });\r\n  };\r\n\r\n  handleNoSuccessorCase = (\r\n    state: ChatbotInterface,\r\n    successorProcessArray: Array<[number, number]>\r\n  ) => {\r\n    const childItrPos =\r\n      successorProcessArray[successorProcessArray.length - 1][1];\r\n    if (childItrPos) {\r\n      if (state.temp_person._childCount > childItrPos) {\r\n        successorProcessArray[successorProcessArray.length - 1][1] =\r\n          childItrPos + 1;\r\n        // ask childid question\r\n        state.successor_flag = QuestionType.part1;\r\n        const allChildrenID = this.getParentChildrenIDStrings(\r\n          state.temp_person._children,\r\n          state\r\n        );\r\n        const newSuccessorQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.addSuccessorQuestion2(\r\n            this.getPerson(state.temp_person._id, state.personsMap)._personName,\r\n            allChildrenID\r\n          )\r\n        );\r\n        this.addMessageToBotState(newSuccessorQuestion);\r\n        return this.returnState(state);\r\n      } else if (state.temp_person._childCount === childItrPos) {\r\n        let currentParentID = state.temp_person._id;\r\n        let currentParent = NodeEntity.getNode(currentParentID, state.nodeMap);\r\n\r\n        let isCurrentParentID = true;\r\n        while (\r\n          successorProcessArray[successorProcessArray.length - 1][1] ===\r\n          currentParent._childCount\r\n        ) {\r\n          successorProcessArray.pop();\r\n          // current parent update\r\n          const currentId = currentParent.getParentId(state.nodeMap);\r\n          if (currentId) {\r\n            currentParentID = currentId;\r\n            currentParent = NodeEntity.getNode(currentParentID, state.nodeMap);\r\n          } else {\r\n            isCurrentParentID = false;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (!isCurrentParentID) {\r\n          // exit case\r\n          this.handleClosingStep(state);\r\n        } else {\r\n          successorProcessArray[successorProcessArray.length - 1][1] =\r\n            successorProcessArray[successorProcessArray.length - 1][1] + 1;\r\n          // ask childid question\r\n          state.temp_person = currentParent;\r\n          const currentParentDetail = this.getPerson(\r\n            currentParentID,\r\n            state.personsMap\r\n          );\r\n          state.successor_flag = QuestionType.part1;\r\n          const allChildrenID = this.getParentChildrenIDStrings(\r\n            currentParent._children,\r\n            state\r\n          );\r\n          const newSuccessorQuestion = this.createChatBotMessage(\r\n            this.QuestionConsts.addSuccessorQuestion2(\r\n              currentParentDetail._personName,\r\n              allChildrenID\r\n            )\r\n          );\r\n          this.addMessageToBotState(newSuccessorQuestion);\r\n          return this.returnState(state);\r\n        }\r\n      } else {\r\n        throw new Error(\"state.temp_person._childCount < childItrPos case\");\r\n      }\r\n    } else {\r\n      throw new Error(\"childItrPos is null\");\r\n    }\r\n  };\r\n\r\n  handleSecondParentExists = (secondParentChoice: boolean): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      if (secondParentChoice) {\r\n        const temp_person = state.temp_person;\r\n        state = {\r\n          ...state,\r\n          parent_flag: QuestionType.part1,\r\n        };\r\n        const allParentsID = this.getParentChildrenIDStrings(\r\n          temp_person._parents,\r\n          state\r\n        );\r\n        const temp_person_detail = this.getPerson(\r\n          temp_person._id,\r\n          state.personsMap\r\n        );\r\n        const newParentQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.addParentsQuestion2(\r\n            temp_person_detail._personName,\r\n            allParentsID\r\n          )\r\n        );\r\n        this.addMessageToBotState(newParentQuestion);\r\n      } else {\r\n        if (state.stepID !== ChatStepTypes.grandParentStep) {\r\n          this.closestSurvivingRelativeParents(false);\r\n        } else {\r\n          this.closestSurvivingRelativeGrandParents(false);\r\n        }\r\n      }\r\n      return state;\r\n    });\r\n  };\r\n\r\n  handleParentsInput = (parentResponse: string): void => {\r\n    const predecessor_id = parentResponse;\r\n    this.setState((state: ChatbotInterface) => {\r\n      const predecessor = this.createNewPerson(predecessor_id, state);\r\n      state = {\r\n        ...state,\r\n        parent_flag: QuestionType.part2,\r\n        temp_parent: predecessor,\r\n      };\r\n\r\n      state.temp_person.add_parent(predecessor, true);\r\n\r\n      const aliveQuestion = this.createChatBotMessage(\r\n        this.QuestionConsts.AliveQuestion(\r\n          Person.getPerson(predecessor._id, state.personsMap)._personName\r\n        ),\r\n        this.QuestionConsts.YesNoWidgetOptions\r\n      );\r\n      this.addMessageToBotState(aliveQuestion);\r\n\r\n      return this.returnState(state);\r\n    });\r\n  };\r\n\r\n  handleParentAliveOption = (alive: boolean): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      const temp_parent = state.temp_parent;\r\n      const temp_parent_detail = Person.getPerson(\r\n        temp_parent._id,\r\n        state.personsMap\r\n      );\r\n      if (!alive) {\r\n        temp_parent_detail._deceased = true;\r\n        state = {\r\n          ...state,\r\n          temp_person: temp_parent,\r\n          successor_flag: QuestionType.part3,\r\n        };\r\n        temp_parent._processChildNodePos += 1;\r\n        const allChildrenID = this.getParentChildrenIDStrings(\r\n          temp_parent._children,\r\n          state\r\n        );\r\n        const newSuccessorQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.addSuccessorOfParentCount(\r\n            temp_parent_detail._personName,\r\n            allChildrenID\r\n          )\r\n        );\r\n        this.addMessageToBotState(newSuccessorQuestion);\r\n        return this.returnState(state);\r\n      } else {\r\n        temp_parent_detail._deceased = false;\r\n        if (state.stepID !== ChatStepTypes.grandParentStep) {\r\n          this.closestSurvivingRelativeParents();\r\n        } else {\r\n          this.closestSurvivingRelativeGrandParents();\r\n        }\r\n      }\r\n      return this.returnState(state);\r\n    });\r\n  };\r\n\r\n  grandParentFirst = () => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      const testatorNode = NodeEntity.getNode(state.person._id, state.nodeMap);\r\n      if (!state.deceasedParentsArray) state.deceasedParentsArray = [];\r\n\r\n      for (const parent_id of testatorNode._parents) {\r\n        if (Person.getPerson(parent_id, state.personsMap)._deceased) {\r\n          const temp_class =\r\n            this.get_class_and_distance_closest_surviving_relative(\r\n              NodeEntity.getNode(parent_id, state.nodeMap),\r\n              state\r\n            )[0];\r\n          if (temp_class !== 1) {\r\n            if (!state.deceasedParentsArray.includes(parent_id))\r\n              state.deceasedParentsArray.push(parent_id);\r\n          }\r\n        }\r\n      }\r\n      if (state.deceasedParentsArray.length !== 0) {\r\n        const temp_person = this.getNode(\r\n          state.deceasedParentsArray[0],\r\n          state.nodeMap\r\n        );\r\n        const temp_person_detail = this.getPerson(\r\n          state.deceasedParentsArray[0],\r\n          state.personsMap\r\n        );\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.grandParentStep,\r\n          parent_flag: QuestionType.part1,\r\n          temp_person: temp_person,\r\n          successor_flag: QuestionType.initialQuestion,\r\n        };\r\n        const newParentQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.addParentsQuestion1(\r\n            temp_person_detail._personName\r\n          )\r\n        );\r\n        this.addMessageToBotState(newParentQuestion);\r\n      } else {\r\n        console.log(\"check situation if it arrives here\");\r\n        this.askFinalQuestion();\r\n      }\r\n      return this.returnState(state);\r\n    });\r\n  };\r\n  askForNextGrandParent = () => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      if (state.deceasedParentsArray.length !== 0) {\r\n        const temp_person = this.getNode(\r\n          state.deceasedParentsArray[0],\r\n          state.nodeMap\r\n        );\r\n        const temp_person_detail = this.getPerson(\r\n          state.deceasedParentsArray[0],\r\n          state.personsMap\r\n        );\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.grandParentStep,\r\n          parent_flag: QuestionType.part1,\r\n          temp_person: temp_person,\r\n          successor_flag: QuestionType.initialQuestion,\r\n        };\r\n        const newParentQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.addParentsQuestion1(\r\n            temp_person_detail._personName\r\n          )\r\n        );\r\n        this.addMessageToBotState(newParentQuestion);\r\n      } else {\r\n        this.askFinalQuestion();\r\n      }\r\n      return this.returnState(state);\r\n    });\r\n  };\r\n\r\n  // TODO check options\r\n  handleMarriedParents = (marriedParentsResponse: boolean): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      if (marriedParentsResponse) {\r\n        this.set_spouse(\r\n          state.person._parents[0],\r\n          state.person._parents[1],\r\n          true\r\n        );\r\n        this.askFinalQuestion();\r\n      } else {\r\n        this.grandParentFirst();\r\n      }\r\n      return this.returnState(state);\r\n    });\r\n  };\r\n  // eslint-disable-next-line\r\n  handleFinalQuestion = (finalOption: boolean): any => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      if (finalOption) {\r\n        const inheritanceCalculation = new InheritanceCalculation(\r\n          state.person,\r\n          this,\r\n          state,\r\n          new InheritanceConstants()\r\n        );\r\n        inheritanceCalculation.computeInheritance();\r\n        inheritanceCalculation.computeGenealogyInheritance(state.testator._id);\r\n\r\n        const pliktdelsarvCalculation = new PliktdelsarvCalculation(\r\n          state.person,\r\n          this,\r\n          state,\r\n          new InheritanceConstants()\r\n        );\r\n        pliktdelsarvCalculation.computeInheritance();\r\n        pliktdelsarvCalculation.computeGenealogyInheritance(state.testator._id);\r\n        const document = (\r\n          <FinalDocument\r\n            inputData={{\r\n              inheritanceCalculation: inheritanceCalculation,\r\n              pliktdelsarvCalculation: pliktdelsarvCalculation,\r\n            }}\r\n          />\r\n        );\r\n        const pdfDownloadLink = (\r\n          <div>\r\n            <PDFDownloadLink document={document} fileName=\"somename.pdf\">\r\n              {({ blob, url, loading, error }) =>\r\n                loading ? \"Loading document...\" : \"Download now!\"\r\n              }\r\n            </PDFDownloadLink>\r\n          </div>\r\n        );\r\n        const pdfLink = this.createChatBotMessage(pdfDownloadLink);\r\n        this.addMessageToBotState(pdfLink);\r\n\r\n        console.log(\"prepare report and download\");\r\n      } else {\r\n        console.log(\"retry\");\r\n      }\r\n      return this.returnState(state);\r\n    });\r\n  };\r\n\r\n  handleRearChildrenResult = (rearChildrenResponse: boolean): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      state = {\r\n        ...state,\r\n        rearChildrenResponse: rearChildrenResponse,\r\n      };\r\n      this.askFinalQuestion();\r\n      return this.returnState(state);\r\n    });\r\n  };\r\n  handleClosingStep = (state: ChatbotInterface) => {\r\n    switch (state.stepID) {\r\n      case ChatStepTypes.successorStep:\r\n        this.closestSurvivingRelativeChildren();\r\n        break;\r\n      case ChatStepTypes.parentsStep:\r\n        state.temp_person = state.person;\r\n        this.closestSurvivingRelativeParents();\r\n        break;\r\n      case ChatStepTypes.undividedEstateStep:\r\n        state.temp_person = state.person;\r\n        if (!state.isUndividedParent) {\r\n          this.closestSurvivingRelativeChildren();\r\n        } else {\r\n          this.closestSurvivingRelativeParents();\r\n        }\r\n\r\n        break;\r\n      case ChatStepTypes.grandParentStep:\r\n        state.temp_person = this.getNode(\r\n          state.deceasedParentsArray[0],\r\n          state.nodeMap\r\n        );\r\n        this.closestSurvivingRelativeGrandParents();\r\n        break;\r\n    }\r\n  };\r\n\r\n  closestSurvivingRelativeChildren = () => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      const testator = state.person;\r\n      const testatorDetail = Person.getPerson(testator._id, state.personsMap);\r\n      const temp_class_testator =\r\n        this.get_class_and_distance_closest_surviving_relative(\r\n          state.testator,\r\n          state\r\n        )[0];\r\n\r\n      if (\r\n        state.person !== state.testator &&\r\n        state.testator._undividedEstateSpouse\r\n      ) {\r\n        const temp_class_undivided_spouse =\r\n          this.get_class_and_distance_closest_surviving_relative(\r\n            this.getNode(state.testator._id, state.nodeMap),\r\n            state\r\n          )[0];\r\n        if (!(temp_class_testator && temp_class_testator !== 1)) {\r\n          state = {\r\n            ...state,\r\n            parent_flag: QuestionType.part1,\r\n            successor_flag: QuestionType.initialQuestion,\r\n            isUndividedParent: true,\r\n          };\r\n          const newParentQuestion = this.createChatBotMessage(\r\n            this.QuestionConsts.addParentsQuestion1(testatorDetail._personName)\r\n          );\r\n          this.addMessageToBotState(newParentQuestion);\r\n          return this.returnState(state);\r\n        }\r\n        if (temp_class_undivided_spouse === undefined) {\r\n          state.netWealth =\r\n            state.netWealth +\r\n            state.undividedEstate.undividedEstateSeparateWealth;\r\n          state.undividedEstate.undividedEstateSeparateWealth = 0;\r\n        }\r\n\r\n        if (state.netWealth <= 0) {\r\n          this.askFinalQuestion();\r\n        } else {\r\n          state.stepID = ChatStepTypes.underAgeStep;\r\n          const underAgeQuestion = this.createChatBotMessage(\r\n            this.QuestionConsts.UnderAgeQuestion,\r\n            this.QuestionConsts.YesNoWidgetOptions\r\n          );\r\n          this.addMessageToBotState(underAgeQuestion);\r\n          return this.returnState(state);\r\n        }\r\n      }\r\n\r\n      if (temp_class_testator === 1) {\r\n        state = {\r\n          ...state,\r\n          stepID: ChatStepTypes.rearChildrenStep,\r\n        };\r\n        // const possiblyChildrenRearing = this.createChatBotMessage(this.QuestionConsts.RearChildrenQuestion, this.QuestionConsts.RearChildrenWidgetOptions)\r\n        // this.addMessageToBotState(possiblyChildrenRearing)\r\n        this.askFinalQuestion();\r\n        return this.returnState(state);\r\n      }\r\n\r\n      if (\r\n        testator._spouse !== null &&\r\n        state.netWealth <=\r\n          this.InheritanceConstants.MINIMUM_INHERITANCE_SPOUSE_VS_PARENTS\r\n      ) {\r\n        this.askFinalQuestion();\r\n        return this.returnState(state);\r\n      }\r\n\r\n      if (\r\n        testator._cohabitant !== null &&\r\n        state.netWealth <=\r\n          this.InheritanceConstants.MINIMUM_INHERITANCE_COHABITANT_VS_PARENTS\r\n      ) {\r\n        this.askFinalQuestion();\r\n        return this.returnState(state);\r\n      }\r\n      state = {\r\n        ...state,\r\n        stepID: ChatStepTypes.parentsStep,\r\n        parent_flag: QuestionType.part1,\r\n        temp_person: state.testator,\r\n        successor_flag: QuestionType.initialQuestion,\r\n      };\r\n      const newParentQuestion = this.createChatBotMessage(\r\n        this.QuestionConsts.addParentsQuestion1(testatorDetail._personName)\r\n      );\r\n      this.addMessageToBotState(newParentQuestion);\r\n      return this.returnState(state);\r\n    });\r\n  };\r\n\r\n  getParentChildrenIDStrings = (\r\n    collection: Array<number>,\r\n    state: ChatbotInterface\r\n  ): ReactElement => {\r\n    return (\r\n      <strong>{`{{ ${collection\r\n        .map(\r\n          (child_id) => Person.getPerson(child_id, state.personsMap)._personName\r\n        )\r\n        .filter((name) => name !== \"\")\r\n        .join(\", \")} }}`}</strong>\r\n    );\r\n  };\r\n\r\n  askFinalQuestion = (): void => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      state = {\r\n        ...state,\r\n        stepID: ChatStepTypes.finalStep,\r\n      };\r\n      const finalQuestion = this.createChatBotMessage(\r\n        this.QuestionConsts.FinalQuestion,\r\n        this.QuestionConsts.YesNoWidgetOptions\r\n      );\r\n      this.addMessageToBotState(finalQuestion);\r\n      return this.returnState(state);\r\n    });\r\n  };\r\n\r\n  closestSurvivingRelativeParents = (isTwoParent = true) => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      if (isTwoParent && state.temp_person._parents.length < 2) {\r\n        // TODO\r\n        state.successor_flag = QuestionType.initialQuestion;\r\n        state.parent_flag = QuestionType.part3;\r\n        const personName = this.getPerson(\r\n          state.temp_person._id,\r\n          state.personsMap\r\n        )._personName;\r\n        const secondParentChoiceQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.askSecondParentChoiceQuestion(`${personName}`),\r\n          this.QuestionConsts.YesNoWidgetOptions\r\n        );\r\n        this.addMessageToBotState(secondParentChoiceQuestion);\r\n        return this.returnState(state);\r\n      }\r\n\r\n      if (state.person._spouse !== null) {\r\n        this.askFinalQuestion();\r\n        return this.returnState(state);\r\n      }\r\n      const temp_class = this.get_class_and_distance_closest_surviving_relative(\r\n        state.person,\r\n        state\r\n      )[0];\r\n      const eitherParentsDeceased =\r\n        state.person._parents.filter((p_id) => {\r\n          return Person.getPerson(p_id, state.personsMap)._deceased;\r\n        }).length !== 0;\r\n      const personDetail = Person.getPerson(state.person._id, state.personsMap);\r\n\r\n      // TODO change condition to stepID\r\n      if (\r\n        state.person !== state.testator &&\r\n        state.testator._undividedEstateSpouse !== null\r\n      ) {\r\n        const temp_class_undivided_spouse =\r\n          this.get_class_and_distance_closest_surviving_relative(\r\n            this.getNode(state.testator._undividedEstateSpouse, state.nodeMap),\r\n            state\r\n          )[0];\r\n        if (temp_class_undivided_spouse === undefined) {\r\n          state.netWealth =\r\n            state.netWealth +\r\n            state.undividedEstate.undividedEstateSeparateWealth;\r\n          state.undividedEstate.undividedEstateSeparateWealth = 0;\r\n        }\r\n\r\n        if (state.netWealth <= 0) {\r\n          this.askFinalQuestion();\r\n          return state;\r\n        } else {\r\n          state.stepID = ChatStepTypes.underAgeStep;\r\n          const underAgeQuestion = this.createChatBotMessage(\r\n            this.QuestionConsts.UnderAgeQuestion,\r\n            this.QuestionConsts.YesNoWidgetOptions\r\n          );\r\n          this.addMessageToBotState(underAgeQuestion);\r\n          return this.returnState(state);\r\n        }\r\n      }\r\n      if (\r\n        state.person._parents.length === 2 &&\r\n        eitherParentsDeceased &&\r\n        temp_class === 2\r\n      ) {\r\n        const parent1Detail = Person.getPerson(\r\n          state.person._parents[0],\r\n          state.personsMap\r\n        );\r\n        const parent2Detail = Person.getPerson(\r\n          state.person._parents[1],\r\n          state.personsMap\r\n        );\r\n        if (!personDetail._underAge) {\r\n          this.askFinalQuestion();\r\n          return this.returnState(state);\r\n        }\r\n        if (state.person._parents.length !== 2) {\r\n          this.askFinalQuestion();\r\n          return this.returnState(state);\r\n        }\r\n\r\n        if (parent1Detail._deceased) {\r\n          state = {\r\n            ...state,\r\n            stepID: ChatStepTypes.marriedParentsStep,\r\n          };\r\n          const marriedParentsQn = this.createChatBotMessage(\r\n            this.QuestionConsts.MarriedParents1(\r\n              parent1Detail._personName,\r\n              parent2Detail._personName\r\n            )\r\n          );\r\n          this.addMessageToBotState(marriedParentsQn);\r\n          return this.returnState(state);\r\n        } else {\r\n          state = {\r\n            ...state,\r\n            stepID: ChatStepTypes.marriedParentsStep,\r\n          };\r\n          const marriedParentsQn = this.createChatBotMessage(\r\n            this.QuestionConsts.MarriedParents2(\r\n              parent1Detail._personName,\r\n              parent2Detail._personName\r\n            )\r\n          );\r\n          this.addMessageToBotState(marriedParentsQn);\r\n          return this.returnState(state);\r\n        }\r\n      } else {\r\n        this.grandParentFirst();\r\n        return this.returnState(state);\r\n      }\r\n    });\r\n  };\r\n\r\n  closestSurvivingRelativeGrandParents = (isTwoParent = true) => {\r\n    this.setState((state: ChatbotInterface) => {\r\n      if (isTwoParent && state.temp_person._parents.length < 2) {\r\n        // TODO\r\n        state.successor_flag = QuestionType.initialQuestion;\r\n        state.parent_flag = QuestionType.part3;\r\n\r\n        const secondParentChoiceQuestion = this.createChatBotMessage(\r\n          this.QuestionConsts.askSecondParentChoiceQuestion(\r\n            `${state.temp_person._id}`\r\n          ),\r\n          this.QuestionConsts.YesNoWidgetOptions\r\n        );\r\n        this.addMessageToBotState(secondParentChoiceQuestion);\r\n        return this.returnState(state);\r\n      }\r\n      state.deceasedParentsArray = state.deceasedParentsArray.filter(\r\n        (item) => item !== state.deceasedParentsArray[0]\r\n      );\r\n      this.askForNextGrandParent();\r\n      return state;\r\n    });\r\n  };\r\n\r\n  // Generic functions\r\n  addMessageToBotState = (messages: any): void => {\r\n    this.setState((state: any) => {\r\n      if (Array.isArray(messages)) {\r\n        state.messages = [...state.messages, ...messages];\r\n      } else {\r\n        state.messages = [...state.messages, messages];\r\n      }\r\n      // const messageCopy = _.cloneDeep(state.messages)\r\n      // state.tempMessages = messageCopy;\r\n      return this.returnState(state);\r\n    });\r\n  };\r\n\r\n  handleDefault = (): void => {\r\n    const message = this.createChatBotMessage(this.QuestionConsts.DefaultText, {\r\n      withAvatar: true,\r\n    });\r\n\r\n    this.addMessageToBotState(message);\r\n  };\r\n\r\n  createNewPerson = (personID: string, state: any) => {\r\n    const newPerson = new Person(personID, this.generateNextID(state.id));\r\n    state.personsMap.set(newPerson._id, newPerson);\r\n    const newNode = new NodeEntity(newPerson._id, 0);\r\n    state.nodeMap.set(newNode._id, newNode);\r\n    return newNode;\r\n  };\r\n  createEmptyNode = (state: any, id: number) => {\r\n    const newPerson = new Person(\"\", id);\r\n    state.personsMap.set(newPerson._id, newPerson);\r\n    const newNode = new NodeEntity(newPerson._id, 0);\r\n    state.nodeMap.set(newNode._id, newNode);\r\n    return newNode;\r\n  };\r\n  createTestator = (personID: string, state: any) => {\r\n    const newPerson = new Person(personID, this.generateNextID(state.id));\r\n    newPerson._deceased = true;\r\n    state.personsMap.set(newPerson._id, newPerson);\r\n    const newNode = new NodeEntity(newPerson._id, 0);\r\n    newNode._path.push([ParentChildSelector.testator, newPerson._id]);\r\n    state.nodeMap.set(newNode._id, newNode);\r\n    return newNode;\r\n  };\r\n\r\n  public getPerson = (id: number, personMap: Map<number, Person>) => {\r\n    const person: Person | undefined = personMap.get(id);\r\n    if (person == undefined) {\r\n      throw new Error(\"Person not found with given id:\" + id);\r\n    }\r\n    return person;\r\n  };\r\n\r\n  getNode = (id: number, nodeMap: Map<number, NodeEntity>) => {\r\n    const node: NodeEntity | undefined = nodeMap.get(id);\r\n    if (node == undefined) {\r\n      throw new Error(\"Node not found with given id:\" + id);\r\n    }\r\n    return node;\r\n  };\r\n\r\n  generateNextID = (id: number) => {\r\n    this.setState((state: any) => {\r\n      state.id = state.id + 1;\r\n      return this.returnState(state);\r\n    });\r\n    return id;\r\n  };\r\n\r\n  set_spouse = (\r\n    firstSpouse_id: number,\r\n    secondSpouse_id: number,\r\n    add_for_both: boolean\r\n  ): void => {\r\n    this.setState((state: any) => {\r\n      NodeEntity.getNode(firstSpouse_id, state.nodeMap)._spouse =\r\n        secondSpouse_id;\r\n      if (add_for_both) {\r\n        NodeEntity.getNode(secondSpouse_id, state.nodeMap)._spouse =\r\n          firstSpouse_id;\r\n      }\r\n      return this.returnState(state);\r\n    });\r\n  };\r\n\r\n  surviving_successor_distance = (\r\n    node: NodeEntity,\r\n    state: any\r\n  ): number | undefined => {\r\n    const nodeDetail: Person = Person.getPerson(node._id, state.personsMap);\r\n\r\n    if (nodeDetail._deceased === false) return 0;\r\n    else if (node._children.length === 0) return undefined;\r\n    else {\r\n      const possible_distances: Array<number> = [];\r\n      for (const child_id of node._children) {\r\n        const temp = this.surviving_successor_distance(\r\n          NodeEntity.getNode(child_id, state.nodeMap),\r\n          state\r\n        );\r\n        if (temp != undefined) {\r\n          possible_distances.push(1 + temp);\r\n        }\r\n      }\r\n      if (possible_distances.length === 0) return undefined;\r\n      else return Math.min(...possible_distances);\r\n    }\r\n  };\r\n\r\n  get_class_and_distance_closest_surviving_relative = (\r\n    testatorNode: NodeEntity,\r\n    state: any\r\n  ): [number | undefined, number | undefined] => {\r\n    const distance = this.surviving_successor_distance(testatorNode, state);\r\n    if (distance !== undefined) return [1, distance];\r\n    else if (testatorNode._parents.length == 0) return [undefined, undefined];\r\n    else {\r\n      const alternatives: Array<Array<number | undefined>> = [];\r\n      for (const parent_id of testatorNode._parents) {\r\n        alternatives.push(\r\n          this.get_class_and_distance_closest_surviving_relative(\r\n            NodeEntity.getNode(parent_id, state.nodeMap),\r\n            state\r\n          )\r\n        );\r\n      }\r\n\r\n      alternatives.sort((a, b) => {\r\n        if (a[0] != undefined && b[0] != undefined) return a[0] - b[0];\r\n        if (a[0] == undefined && b[0] != undefined) return 1;\r\n        return -1;\r\n      });\r\n      const [closest_alternative_class, closest_alternative_distance] =\r\n        alternatives[0];\r\n\r\n      if (closest_alternative_class == undefined) {\r\n        return [undefined, undefined];\r\n      }\r\n      return [closest_alternative_class + 1, closest_alternative_distance];\r\n    }\r\n  };\r\n  check = () => {\r\n    const self = this;\r\n    if (this.isStarted) {\r\n      this.checkstate = setInterval(() => {\r\n        if (self.glb_state !== null) {\r\n          self.isStarted = false;\r\n          messageService.sendMessageFromChatbot({ detail: self.glb_state });\r\n          // close the interval\r\n          self.glb_state = null;\r\n          clearInterval(this.checkstate);\r\n        }\r\n      }, 200);\r\n    }\r\n  };\r\n  returnState = (state: any) => {\r\n    this.check();\r\n    this.glb_state = chartSelector(state);\r\n    return state;\r\n  };\r\n  handleValidation = (tempMessages: any) => {\r\n    this.setState((state: any) => {\r\n      if (tempMessages && tempMessages.length !== 0) {\r\n        state.messages = tempMessages;\r\n        return state;\r\n      }\r\n      return state;\r\n    });\r\n  };\r\n  resetChatbot = () => {\r\n    this.setState((state: any) => {\r\n      state = InitialChatbotState;\r\n\r\n      return this.returnState(state);\r\n    });\r\n    const initialQuestion = this.createChatBotMessage(\r\n      this.QuestionConsts.TestatorQuestion\r\n    );\r\n    this.addMessageToBotState(initialQuestion);\r\n  };\r\n\r\n  delay = (n: number) => {\r\n    return new Promise(function (resolve) {\r\n      setTimeout(resolve, n * 1000);\r\n    });\r\n  };\r\n}\r\n\r\nexport default ActionProvider;\r\n","export default function chartSelector(state) {\r\n  return {\r\n    nodeMap: state.nodeMap,\r\n    personsMap: state.personsMap,\r\n    testator: state.testator,\r\n  };\r\n}\r\n\r\nexport function messageSelector(state) {\r\n  return {\r\n    messages: state.messages,\r\n  };\r\n}\r\n","class ChartNode {\r\n  id: string;\r\n  type: string;\r\n  data: NodeData;\r\n  position: { x: number; y: number };\r\n  xLevel: number;\r\n  draggable = false;\r\n  connectable = false;\r\n  constructor(\r\n    id: string,\r\n    type: string,\r\n    data: NodeData,\r\n    position: { x: number; y: number },\r\n    xLevel: number\r\n  ) {\r\n    this.id = id;\r\n    this.type = type;\r\n    this.data = data;\r\n    this.position = position;\r\n    this.xLevel = xLevel;\r\n  }\r\n}\r\nexport class NodeData {\r\n  label = \"\";\r\n  showDialog: boolean;\r\n  pos: {\r\n    left?: null | string;\r\n    right?: null | string;\r\n    top?: null | string;\r\n    bottom?: null | string;\r\n  };\r\n\r\n  constructor(label: string, data?: any) {\r\n    this.label = label;\r\n    this.pos = data;\r\n    this.showDialog = false;\r\n  }\r\n}\r\nexport default ChartNode;\r\n","class ChartConnector {\r\n  id: string;\r\n  type = \"smoothstep\";\r\n  source: string;\r\n  target: string;\r\n  label: string;\r\n  animated = false;\r\n  // arrowHeadType = \"arrowclosed\";\r\n  sourceHandle: string;\r\n  targetHandle: string;\r\n\r\n  constructor(\r\n    id: string,\r\n    type: string,\r\n    source: string,\r\n    target: string,\r\n    label: string,\r\n    sourceHandle = \"\",\r\n    targetHandle = \"\"\r\n  ) {\r\n    this.id = id;\r\n    this.type = type;\r\n    this.source = source;\r\n    this.target = target;\r\n    this.label = label;\r\n    this.sourceHandle = sourceHandle;\r\n    this.targetHandle = targetHandle;\r\n  }\r\n}\r\n\r\nexport default ChartConnector;\r\n","export class Bubble {\r\n  parent: number | undefined;\r\n  elements: Array<number>;\r\n  constructor(elements: Array<number>, parent?: number) {\r\n    this.elements = elements;\r\n    this.parent = parent;\r\n  }\r\n}\r\n","import { Subject, Subscription } from 'rxjs';\r\n\r\nconst chatBotDataSubject = new Subject();\r\nconst chatbotMessageSubscriptionList = new Array<Subscription>()\r\nexport const componentCommunicatorService = {\r\n\r\n    sendChatbotMessage: (message: any) => chatBotDataSubject.next(message),\r\n\r\n\r\n    getChatbotMessage: () => chatBotDataSubject.asObservable(),\r\n\r\n    addSubscription: (subscription: Subscription) => chatbotMessageSubscriptionList.push(subscription),\r\n\r\n\r\n    clearAllSubscription: () => {\r\n        chatbotMessageSubscriptionList.forEach((subscription: Subscription) => {\r\n            subscription.unsubscribe();\r\n        })\r\n    },\r\n\r\n\r\n};","import ReactFlow, {\r\n  Background,\r\n  BackgroundVariant,\r\n  Controls,\r\n} from \"react-flow-renderer\";\r\nimport { processData } from \"./ProcessDataForChart\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { useZoomPanHelper, useUpdateNodeInternals } from \"react-flow-renderer\";\r\nimport CustomNode from \"./CustomNode\";\r\nimport ChartNode from \"./Classes/ChartNode\";\r\nimport ChartConnector from \"./Classes/ChartConnector\";\r\nimport { componentCommunicatorService } from \"../../ChatbotComponent/services/ComponentCommunicatorService\";\r\n\r\n// import { CustomDetailDialog } from \"./Classes/CustomDetailDialog\";\r\n\r\nconst flowStyles = { height: \"80vh\", width: \"60%\" };\r\nlet isHandleChange = true;\r\nconst OrgChartTree = () => {\r\n  // const result = useSelector(chartSelector);\r\n  const [result, setResult] = useState({\r\n    nodeMap: new Map(),\r\n    personMap: new Map(),\r\n    testator: null,\r\n  });\r\n  const [chartContent, setChartContent] = useState([]);\r\n  const componentWillUnmount = useRef(false);\r\n  const updateNodeInternals = useUpdateNodeInternals();\r\n\r\n  const getNodeData = () =>\r\n    chartContent.forEach((chartData: ChartNode | ChartConnector) => {\r\n      //\r\n      if (chartData instanceof ChartNode) {\r\n        updateNodeInternals(chartData.id);\r\n      }\r\n    });\r\n  useEffect(() => {\r\n    return () => {\r\n      componentWillUnmount.current = true;\r\n    };\r\n  }, []);\r\n  useEffect(() => {\r\n    componentCommunicatorService.clearAllSubscription();\r\n    const subscription = componentCommunicatorService\r\n      .getChatbotMessage()\r\n      .subscribe((data: any) => setResult(data));\r\n    componentCommunicatorService.addSubscription(subscription);\r\n    if (componentWillUnmount.current) {\r\n      componentCommunicatorService.clearAllSubscription();\r\n    }\r\n  }, [1]);\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      getNodeData();\r\n    }, 500);\r\n  }, [chartContent]);\r\n  useEffect(() => {\r\n    setChartContent(processData(result));\r\n    isHandleChange = true;\r\n  }, [result]);\r\n  const { fitView } = useZoomPanHelper();\r\n  const nodeTypes = {\r\n    specialNode: CustomNode,\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isHandleChange) {\r\n      fitView();\r\n    }\r\n  });\r\n\r\n  return (\r\n    <div id=\"ChartContainer\" style={{ height: \"100%\", paddingTop: \"3rem\" }}>\r\n      <ReactFlow\r\n        elements={chartContent}\r\n        style={flowStyles}\r\n        nodeTypes={nodeTypes}\r\n        nodesConnectable={false}\r\n        paneMoveable={false}\r\n        selectNodesOnDrag={false}\r\n        elementsSelectable={false}\r\n        nodesDraggable={false}\r\n      >\r\n        <Background variant={BackgroundVariant.Dots} gap={1} size={2} />\r\n        <Controls />\r\n      </ReactFlow>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrgChartTree;\r\n","export default __webpack_public_path__ + \"static/media/chat_button_logo.6fc97b77.svg\";","import { useEffect, useRef } from \"react\";\r\nimport { Typography } from \"@mui/material\";\r\nimport { Chatbot } from \"react-chatbot-kit\";\r\nimport Config from \"../Components/InheritanceCalculatorComponents/ChatbotComponent/Config.js\";\r\nimport MessageParser from \"../Components/InheritanceCalculatorComponents/ChatbotComponent/MessageParser\";\r\nimport ActionProvider from \"../Components/InheritanceCalculatorComponents/ChatbotComponent/ActionProvider\";\r\nimport OrgChartTree from \"../Components/InheritanceCalculatorComponents/OtherComponent/FamilyChart/ChartComponent\";\r\nimport \"../Components/InheritanceCalculatorComponents/OtherComponent/ChatbotToggleButton/ChatbotToggleButton.scss\";\r\nimport botIcon from \"../assets/images/chat_button_logo.svg\";\r\nimport { ReactFlowProvider } from \"react-flow-renderer\";\r\nimport { messageService } from \"../Components/InheritanceCalculatorComponents/ChatbotComponent/services/ChatbotCommunicator.tsx\";\r\nimport { componentCommunicatorService } from \"../Components/InheritanceCalculatorComponents/ChatbotComponent/services/ComponentCommunicatorService.tsx\";\r\n\r\nconst InheritanceCalculatorPage = () => {\r\n  let prev = \"block\";\r\n  const componentWillUnmount = useRef(false);\r\n  useEffect(() => {\r\n    messageService.clearAllExternalSubscription();\r\n    const subscription = messageService\r\n      .getMessageOutChatbot()\r\n      .subscribe(({ detail }) => {\r\n        componentCommunicatorService.sendChatbotMessage(detail);\r\n        // dispatch({\r\n        //   type: \"UPDATE_GENERIC\",\r\n        //   payload: detail,\r\n        // });\r\n      });\r\n    messageService.addExternalSubscription(subscription);\r\n    setWarningDiv();\r\n    // setRevertDiv();\r\n    addListenerToChatInputField();\r\n  }, [1]);\r\n  // useEffect(() => {\r\n  //   return () => {\r\n  //     componentWillUnmount.current = true;\r\n  //   };\r\n  // }, []);\r\n  // useEffect(() => {\r\n  //   if (componentWillUnmount.current) {\r\n  //     messageService.clearAllExternalSubscription();\r\n  //     messageService.clearAllInternalSubscription();\r\n  //   }\r\n  // }, [1]);\r\n\r\n  // localStorage.setItem(\"isRevertListenerSet\", \"false\");\r\n  // document.removeEventListener(\"revert\");\r\n  const toggleBot = () => {\r\n    const divChatBot = document.getElementsByClassName(\r\n      \"react-chatbot-kit-chat-container\"\r\n    )[0];\r\n    if (prev === \"block\") {\r\n      divChatBot.style.display = \"none\";\r\n      prev = \"none\";\r\n    } else {\r\n      divChatBot.style.display = \"block\";\r\n      prev = \"block\";\r\n    }\r\n  };\r\n  return (\r\n    <div id=\"InheritanceCalculatorMain\" style={{ height: \"100%\" }}>\r\n      <Typography variant=\"h2\" align=\"center\">\r\n        Inheritance Calculator\r\n      </Typography>\r\n      <ReactFlowProvider>\r\n        <OrgChartTree />\r\n      </ReactFlowProvider>\r\n      {\r\n        <div className=\"chatbotContainer\">\r\n          <Chatbot\r\n            config={Config}\r\n            actionProvider={ActionProvider}\r\n            messageParser={MessageParser}\r\n          />\r\n        </div>\r\n      }\r\n      <button className=\"ChatbotToggleButton\" onClick={toggleBot}>\r\n        <img src={botIcon} />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\nconst setRevertDiv = () => {\r\n  const chatParentElement = document.getElementsByClassName(\r\n    \"react-chatbot-kit-chat-input-container\"\r\n  )[0];\r\n  if (!document.getElementById(\"revert-div\")) {\r\n    const chatContainer = document.getElementsByClassName(\r\n      \"react-chatbot-kit-chat-container\"\r\n    )[0];\r\n    chatContainer.id = \"chat_container\";\r\n    const newDiv = document.createElement(\"div\");\r\n    newDiv.id = \"revert-div\";\r\n    const revertButton = document.createElement(\"button\");\r\n    revertButton.innerText = \"Revert\";\r\n    newDiv.appendChild(revertButton);\r\n    chatParentElement.prepend(newDiv);\r\n    revertButton.addEventListener(\"click\", ({ event }) => {\r\n      messageService.sendMessageToChatbot(\"ON CLICK\");\r\n    });\r\n  }\r\n};\r\nconst setWarningDiv = () => {\r\n  // const chatParentElement = document.getElementsByClassName(\r\n  //   \"react-chatbot-kit-chat-container\"\r\n  // )[0];\r\n\r\n  const chatParentElement = document.getElementsByClassName(\r\n    \"react-chatbot-kit-chat-input-form\"\r\n  )[0];\r\n  const newDiv = document.createElement(\"div\");\r\n  newDiv.id = \"chatbot-warning-div\";\r\n  newDiv.innerHTML = \"warning\";\r\n  newDiv.style.backgroundColor = \"red\";\r\n  newDiv.style.position = \"absolute\";\r\n  newDiv.style.bottom = \"2.5rem\";\r\n  newDiv.style.width = \"100%\";\r\n  newDiv.style.display = \"none\";\r\n  chatParentElement.prepend(newDiv);\r\n};\r\n\r\nconst addListenerToChatInputField = () => {\r\n  const chatInputField = document.getElementsByClassName(\r\n    \"react-chatbot-kit-chat-input\"\r\n  )[0];\r\n  chatInputField.addEventListener(\"input\", () => {\r\n    const warningDiv = document.getElementById(\"chatbot-warning-div\");\r\n    if (warningDiv) {\r\n      if (warningDiv.style.display === \"block\") {\r\n        warningDiv.style.display = \"none\";\r\n      }\r\n    }\r\n  });\r\n};\r\nexport default InheritanceCalculatorPage;\r\n","import { ReactElement } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport makeStyles from '@mui/styles/makeStyles';\r\nimport Paper from \"@mui/material/Paper\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport Link from \"@mui/material/Link\";\r\nimport { useTheme } from \"@mui/material/styles\";\r\n// import LangButton from \"./LangButton/LangButton\";\r\n\r\ninterface propsTypes {\r\n  description: string;\r\n  title: string;\r\n}\r\n\r\nconst Copyright = (): ReactElement => {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {\"Copyright © \"}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Arvebot\r\n      </Link>{\" \"}\r\n      {new Date().getFullYear()}\r\n      {\".\"}\r\n    </Typography>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  footer: {\r\n    // backgroundColor: theme.palette.background.paper,\r\n    padding: useTheme().spacing(6),\r\n    backgroundColor: \"silver\"\r\n  },\r\n}));\r\n\r\nconst Footer = (props: propsTypes): ReactElement => {\r\n  const classes = useStyles();\r\n  const { description, title } = props;\r\n\r\n  return (\r\n    <Paper className={classes.footer}>\r\n      <Typography variant=\"h6\" align=\"center\" gutterBottom>\r\n        {title}\r\n      </Typography>\r\n      <Typography\r\n        variant=\"subtitle1\"\r\n        align=\"center\"\r\n        color=\"textSecondary\"\r\n        component=\"p\"\r\n      >\r\n        {description}\r\n      </Typography>\r\n      <Copyright />\r\n\r\n      {/* {Object.keys(props.langValue).map((lang) => (\r\n        <LangButton\r\n          key={lang}\r\n          langButtonValue={props.langValue[lang]}\r\n          sendDataToParent={props.sendDataToParent}\r\n        />\r\n      ))} */}\r\n    </Paper>\r\n  );\r\n};\r\n\r\nFooter.propTypes = {\r\n  description: PropTypes.string,\r\n  title: PropTypes.string,\r\n};\r\n\r\nexport default Footer;\r\n","import { ReactElement } from \"react\";\r\nimport { Typography } from \"@mui/material\";\r\n\r\nconst ResourcesPage = (): ReactElement => {\r\n  return (\r\n    <Typography variant=\"h2\" align=\"center\">\r\n      ResourcesPage\r\n    </Typography>\r\n  );\r\n};\r\n\r\nexport default ResourcesPage;\r\n","import { ChatbotState } from \"../Components/InheritanceCalculatorComponents/ChatbotComponent/Generics\";\r\n\r\nconst initialState = ChatbotState;\r\n\r\nconst genericReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case \"UPDATE_GENERIC\":\r\n      return action.payload;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default genericReducer;\r\n","import { createStore } from \"redux\";\r\nimport genericReducer from \"./genericReducer\";\r\n\r\nconst store = createStore(genericReducer);\r\nexport default store;\r\n","// React\r\nimport { ReactElement } from \"react\";\r\n// material-ui\r\nimport { Paper } from \"@mui/material\";\r\nimport { createTheme, ThemeProvider, StyledEngineProvider } from \"@mui/material/styles\";\r\nimport makeStyles from '@mui/styles/makeStyles';\r\n// react-router\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport { IntlProvider } from \"react-intl\";\r\n// local - check in newer chrome version and remove. added polyfill because nb locale not supported in chromium>92\r\n// https://github.com/formatjs/formatjs/issues/3066\r\nimport \"@formatjs/intl-datetimeformat/polyfill-force\";\r\nimport \"@formatjs/intl-datetimeformat/locale-data/nb\";\r\nimport \"@formatjs/intl-numberformat/polyfill-force\";\r\nimport \"@formatjs/intl-numberformat/locale-data/nb\";\r\nimport \"@formatjs/intl-numberformat/locale-data/en\";\r\n//\r\n// import theme from \"./theme\";\r\nimport Header from \"./Components/Generic/Header/Header\";\r\nimport HomePage from \"./Pages/HomePage\";\r\nimport AboutPage from \"./Pages/AboutPage\";\r\nimport InheritanceCalculatorPage from \"./Pages/InheritanceCalculatorPage.js\";\r\nimport Footer from \"./Components/Generic/Footer/Footer\";\r\n// import HomePageImage from \"./assets/images/homepage-image.jpg\";\r\nimport ResourcesPage from \"./Pages/ResourcesPage\";\r\n\r\nimport Norsk from \"./languages/translationNO.json\";\r\n// import English from \"./languages/translationEN.json\";\r\nimport store from './store/store'\r\nimport { Provider } from \"react-redux\";\r\n\r\nconst theme = createTheme();\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    // backgroundImage: `url(${HomePageImage})`,\r\n    // backgroundPosition: \"center\",\r\n    // backgroundSize: \"cover\",\r\n    // backgroundRepeat: \"no-repeat\",\r\n    height: \"100vh\",\r\n  },\r\n  rootPaper: {\r\n    marginTop: \"5rem\",\r\n    minHeight: \"100vh\",\r\n    background:\r\n      \"radial-gradient( circle farthest-corner at 10% 20%,  #FCCABD 0%, #4151C9 45.5% )\",\r\n    opacity: \"1\",\r\n  },\r\n});\r\n\r\nconst menuItems = (\r\n  <Switch>\r\n    <Route exact path=\"/\" component={HomePage} />\r\n    <Route path=\"/about\" component={AboutPage} />\r\n    <Route path=\"/calculator\" component={InheritanceCalculatorPage} />\r\n    <Route path=\"/resources\" component={ResourcesPage} />\r\n  </Switch>\r\n);\r\n\r\nconst App = (): ReactElement => {\r\n  const classes = useStyles();\r\n  const lang = \"nb-NO\";\r\n  const langMessages = Norsk;\r\n  // const [lang, setLang] = useState(\"nb-NO\");\r\n  // const [langMessages, setLangMessages] = useState(Norsk);\r\n  // const sendDataToParent = (index) => {\r\n  //   setLang(index.code);\r\n  //   if (index.code === \"nb-NO\") {\r\n  //     setLangMessages(Norsk);\r\n  //   } else {\r\n  //     setLangMessages(English);\r\n  //   }\r\n  // };\r\n\r\n  // const LangValue = {\r\n  //   no: {\r\n  //     code: \"nb-NO\",\r\n  //     name: \"Norsk\",\r\n  //   },\r\n  //   en: {\r\n  //     code: \"en-US\",\r\n  //     name: \"English\",\r\n  //   },\r\n  // };\r\n  return (\r\n\r\n    <StyledEngineProvider injectFirst>\r\n      <ThemeProvider theme={theme}>\r\n        <IntlProvider locale={lang} messages={langMessages}>\r\n\r\n          <Paper\r\n            role=\"img\"\r\n            // className={classes.root}\r\n            aria-label=\"Image by Free-Photos from Pixabay\"\r\n          >\r\n            <Header />\r\n            <Provider store={store}>\r\n              <Paper className={classes.rootPaper}>{menuItems}</Paper>\r\n            </Provider>\r\n          </Paper>\r\n          {/* <Footer langValue={LangValue} sendDataToParent={sendDataToParent} /> */}\r\n          <Footer description=\"Arvebot\" title=\"Arvebot\" />\r\n\r\n          {/* Route components are rendered if the path prop matches the current URL */}\r\n\r\n        </IntlProvider>\r\n      </ThemeProvider>\r\n    </StyledEngineProvider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n\r\n// react-spring -> animations\r\n// nivo for visualisation\r\n// primary - 003049   , 264653 , 031d44\r\n// secondary - EAE2B7   ,e76f51 , d5896f\r\n","// import { StrictMode } from \"react\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport \"./index.scss\";\r\n// import * as Sentry from \"@sentry/react\";\r\n// import { BrowserTracing } from \"@sentry/tracing\";\r\nimport App from \"./App\";\r\nimport { render } from \"react-dom\";\r\n\r\n/***\r\n** Uncomment for sentry logging\r\nSentry.init({\r\n  dsn: \"https://4ee9eb855a3d475eba0981e5e96f4090@o1245495.ingest.sentry.io/6402725\",\r\n  integrations: [new BrowserTracing()],\r\n\r\n  tracesSampleRate: 1.0,\r\n});\r\n*/\r\nrender(\r\n  // <StrictMode>\r\n  <Router>\r\n    <App />\r\n  </Router>,\r\n  // </StrictMode>,\r\n  document.getElementById(\"app\")\r\n);\r\n"],"sourceRoot":""}