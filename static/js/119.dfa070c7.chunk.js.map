{"version":3,"file":"static/js/119.dfa070c7.chunk.js","mappings":"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","sources":["Components/InheritanceCalculatorComponents/ChatbotComponent/services/ChatbotCommunicator.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Enums/BinaryAnswerTypes.ts","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Enums/ValidationType.ts","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Methods/ChatbotValidation.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Methods/NumberInput.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Methods/OtherMethods.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Methods/HandleCurrency.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Custom/Widgets/ShowInfoWidget/ShowInfoWidget.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Methods/QuestionConstants.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Methods/InheritanceConstants.ts","Components/InheritanceCalculatorComponents/Reports/ReportUtils.ts","Components/InheritanceCalculatorComponents/Reports/ReportCalculationBase.ts","Components/InheritanceCalculatorComponents/Reports/InheritanceCalculation.ts","Components/InheritanceCalculatorComponents/Reports/PDF/styles.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/text-styles/Bold.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/text-styles/Italic.tsx","Components/InheritanceCalculatorComponents/Reports/pdf_utils.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/genealogy/CommonMethods.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/genealogy/Genealogy.utils.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/genealogy/GenealogyPlikt.utils.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/genealogy/Genealogy.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/introSection/IntroductionPlikt.utils.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/introSection/IntroductionPage.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/introSection/Introduction.utils.ts","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/react-pdf-table/Table.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/summary/Summary.utils.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/summary/Summary.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/survivingPartner/SurvivingPartner.utils.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/survivingPartner/SurvivingPartner.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/firstSection/FirstSection.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/secondSection/UndividedEstateCalculation/UndividedEstateCalculationUtils.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/secondSection/UndividedEstateCalculation/UndividedEstateCalculation.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/secondSection/SecondSection.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/thirdSection/ThirdSection.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/fourthSection/generalReservations/GeneralReservationsUtils.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/fourthSection/generalReservations/GeneralReservations.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/fourthSection/nationalInsurance/NationalInsurance.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/fourthSection/FourthSection.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/fixedSection/Footer.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/common/fixedSection/Header.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/Sections/fifthSection/fifthSection.tsx","Components/InheritanceCalculatorComponents/Reports/PDF/FinalDocument.tsx","Components/InheritanceCalculatorComponents/Reports/PliktdelsarvCalculation.ts","Components/InheritanceCalculatorComponents/Reports/UndividedCalculation.ts","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Classes/Person.ts","Components/InheritanceCalculatorComponents/ChatbotComponent/ActionProviderMethods/NodeEntityAlternativeMethods.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/ActionProviderMethods/RelativeMethods.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/ActionProviderMethods/UndividedEstateMethods.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/ActionProviderMethods/OtherChatbotMethods.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/ActionProviderMethods/TestatorInformationMethods.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/ActionProviderMethods/PartnerMethods.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Helper/Methods/CommonMethods.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Custom/Widgets/OptionSelector/OptionSelector.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Custom/Widgets/InfoMessagesWidget/InfoMessagesWidget.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Custom/Widgets/UndividedEstateWidget/UndividedEstateWidget.tsx","Components/InheritanceCalculatorComponents/OtherComponent/ChatHeader/ChatHeader.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Custom/Messages/CustomFinalMessage.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/Config.js","Components/InheritanceCalculatorComponents/ChatbotComponent/MessageParser.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/ActionProvider.tsx","Components/InheritanceCalculatorComponents/OtherComponent/FamilyChart/ProcessDataForChart.tsx","store/chartSelector.js","Components/InheritanceCalculatorComponents/OtherComponent/FamilyChart/Classes/ChartNode.ts","Components/InheritanceCalculatorComponents/OtherComponent/FamilyChart/Classes/ChartConnector.ts","Components/InheritanceCalculatorComponents/OtherComponent/FamilyChart/Classes/Bubble.ts","Components/InheritanceCalculatorComponents/OtherComponent/FamilyChart/CustomNode.tsx","Components/InheritanceCalculatorComponents/ChatbotComponent/services/ComponentCommunicatorService.tsx","Components/InheritanceCalculatorComponents/OtherComponent/FamilyChart/ChartComponent.tsx","assets/images/chat_button_logo.svg","Pages/InheritanceCalculatorPage.js"],"sourcesContent":["import { Subject, Subscription } from 'rxjs';\nimport _ from 'lodash';\nimport { InitialChatbotState } from '../Generics';\n\nconst inSubject = new Subject();\nconst outSubject = new Subject();\nconst internalSubscriptionList = new Array<Subscription>();\nconst externalSubscriptionList = new Array<Subscription>();\nconst previousStates = new Array<any>();\nlet revertCnt = 0;\nlet isRevert = false;\n\nexport const messageService = {\n    sendMessageToChatbot: (message: any) => inSubject.next(message),\n\n    sendMessageFromChatbot: (message: any) => outSubject.next(message),\n\n    getMessageInChatbot: () => inSubject.asObservable(),\n\n    getMessageOutChatbot: () => outSubject.asObservable(),\n\n    addInternalSubscription: (subscription: Subscription) =>\n        internalSubscriptionList.push(subscription),\n\n    addExternalSubscription: (subscription: Subscription) =>\n        externalSubscriptionList.push(subscription),\n\n    addPreviousState: (data: any) => {\n        const stateCopy = _.cloneDeep(data);\n        if (\n            previousStates.filter(\n                (previousState) =>\n                    Object.entries(previousState) == Object.entries(stateCopy),\n            ).length === 0\n        ) {\n            previousStates.push(stateCopy);\n        }\n    },\n    printPreviousStates: () => {\n        console.log(previousStates);\n    },\n    removePreviousState: () => {\n        if (previousStates.length === 0) {\n            return null;\n        }\n        return previousStates.pop();\n    },\n    removePreviousStates: (cnt: number) => {\n        let finalState = {};\n        for (let i = 0; i < cnt; i++) {\n            if (previousStates.length === 0) {\n                return InitialChatbotState;\n            }\n            finalState = previousStates.pop();\n        }\n        return finalState;\n    },\n    getPreviousStates: () => previousStates,\n\n    getPreviousState: (reverseCount: number) => {\n        if (previousStates.length === 0) return null;\n        return previousStates[previousStates.length - 1 - reverseCount];\n    },\n\n    clearAllInternalSubscription: () => {\n        internalSubscriptionList.forEach((subscription: Subscription) => {\n            subscription.unsubscribe();\n        });\n    },\n\n    clearAllExternalSubscription: () => {\n        externalSubscriptionList.forEach((subscription: Subscription) => {\n            subscription.unsubscribe();\n        });\n    },\n    addRevertCnt: () => {\n        revertCnt += 1;\n    },\n    getRevertCnt: () => {\n        return revertCnt;\n    },\n    resetRevertCnt: () => {\n        revertCnt = 0;\n    },\n    setRevert: () => {\n        isRevert = true;\n    },\n    resetRevert: () => {\n        isRevert = false;\n    },\n    getRevert: () => {\n        return isRevert;\n    },\n    resetChatbotState: () => {\n        while (previousStates.length > 0) {\n            previousStates.shift();\n        }\n        revertCnt = 0;\n        isRevert = false;\n    },\n};\n","export enum BinaryAnswerTypeYes {\n  \"yes\",\n  \"ja\",\n}\n\nexport enum BinaryAnswerTypeNo {\n  \"no\",\n  \"nei\",\n}\n","export enum ValidationType {\n    emptyValue = 0,\n    invalidAmount = 1,\n    onlyDigit = 2,\n    incorrectValueForBoolean = 3,\n    incorrectValueForUndividedOptions = 4,\n}\nexport enum DefaultWarningMessage {\n    emptyValueMessage = 'The field cannot be empty.',\n    onlyDigitMessage = 'Only numerical values are allowed.',\n    errorForBooleanMessage = \"Please choose correct value or write 'yes/ja', 'no/nei'.\",\n    invalidAmountMessage = 'Please enter the amount in correct format.',\n    incorrectValueForUndividedMessage = 'Please choose one of the options or write them in the answer field.',\n}\n","import ActionProvider from '../../ActionProvider';\nimport {\n    BinaryAnswerTypeNo,\n    BinaryAnswerTypeYes,\n} from '../Enums/BinaryAnswerTypes';\nimport { DefaultWarningMessage, ValidationType } from '../Enums/ValidationType';\nimport _ from 'lodash';\nimport { undividedOwnershipType } from '../Enums/ChatStepTypes';\n\nexport class ChatbotValidation {\n    constructor(\n        private actionProvider: ActionProvider,\n        private chatbotState: any,\n    ) {}\n    validate = (\n        message: string,\n        validationTypes: Array<number>,\n        warningMessage = '',\n    ): boolean => {\n        validationTypes = this.addEmptyRuleAndSortInc(validationTypes);\n        for (const validationType of validationTypes) {\n            let validationResult = false;\n            switch (validationType) {\n                case ValidationType.emptyValue:\n                    validationResult = this.validateEmpty(message);\n                    break;\n                case ValidationType.invalidAmount:\n                    validationResult = this.validateAmount(message);\n                    break;\n                case ValidationType.onlyDigit:\n                    validationResult = this.validateDigit(message);\n                    break;\n                case ValidationType.incorrectValueForBoolean:\n                    validationResult = this.validateValueForBoolean(message);\n                    break;\n                case ValidationType.incorrectValueForUndividedOptions:\n                    validationResult =\n                        this.validateValueForUndividedOptions(message);\n                    break;\n                default:\n                    console.error('Invalid Validation type');\n                    return false;\n            }\n            if (warningMessage === '' && !validationResult) {\n                warningMessage = this.getWarningMessage(validationType);\n            }\n            if (!validationResult && this.chatbotState) {\n                this.showWarning(warningMessage);\n                const messageCopy = _.cloneDeep(this.chatbotState.messages);\n                this.actionProvider.handleValidation(\n                    messageCopy,\n                    this.actionProvider.stateRef,\n                );\n                return false;\n            } else {\n                this.hideWarning();\n            }\n        }\n        return true;\n    };\n\n    validateEmpty = (message: string) => {\n        // if valid string, returns true\n        if (message.length !== 0) return true;\n        return false;\n    };\n\n    validateAmount = (message: string) => {\n        const re = /^\\d*(\\.\\d+)?$/;\n        if (message.match(re)) {\n            return true;\n        } else return false;\n    };\n\n    validateDigit = (message: string) => {\n        const checkNatural = /^(0|([1-9]\\d*))$/;\n        if (checkNatural.test(message)) return true;\n        return false;\n    };\n\n    validateValueForBoolean = (message: string) => {\n        if (\n            (message in BinaryAnswerTypeYes || message in BinaryAnswerTypeNo) &&\n            !(message in [0, 1])\n        ) {\n            return true;\n        }\n        return false;\n    };\n\n    // validateValueForUndividedOptions = (message: string) => {\n    //     if (\n    //         Object.values(undividedOwnershipType).includes(\n    //             message as undividedOwnershipType,\n    //         )\n    //     ) {\n    //         return true;\n    //     }\n    //     return false;\n    // };\n\n    validateValueForUndividedOptions = (message: string) => {\n        const ownershipTypes = Object.values(undividedOwnershipType);\n        for (const type of ownershipTypes) {\n            if (type.includes(message.toUpperCase())) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    private showWarning = (warningMessage: string) => {\n        const warningDiv = document.getElementById('chatbot-warning-div');\n        if (warningDiv) {\n            warningDiv.innerHTML = `<div id=\"chatbot-warning-innerDiv\"><p style=\"margin: 0.3rem\">${warningMessage}</p></div>`;\n            warningDiv.style.display = 'block';\n\n            const newDiv = document.getElementById('chatbot-warning-innerDiv');\n            const closeButton = document.createElement('button');\n            closeButton.innerHTML = 'x';\n            closeButton.style.cssText = 'position: absolute; top: 0; right: 0;';\n            closeButton.addEventListener('click', () => {\n                if (newDiv) newDiv.remove();\n            });\n            if (newDiv !== null) {\n                newDiv.appendChild(closeButton);\n            }\n            return;\n        }\n    };\n    private hideWarning = () => {\n        const warningDiv = document.getElementById('chatbot-warning-div');\n        if (warningDiv) {\n            warningDiv.style.display = 'none';\n            return;\n        }\n    };\n    getWarningMessage(validationType: ValidationType) {\n        switch (validationType) {\n            case ValidationType.emptyValue:\n                return DefaultWarningMessage.emptyValueMessage;\n            case ValidationType.incorrectValueForBoolean:\n                return DefaultWarningMessage.errorForBooleanMessage;\n            case ValidationType.invalidAmount:\n                return DefaultWarningMessage.invalidAmountMessage;\n            case ValidationType.onlyDigit:\n                return DefaultWarningMessage.onlyDigitMessage;\n            case ValidationType.incorrectValueForUndividedOptions:\n                return DefaultWarningMessage.incorrectValueForUndividedMessage;\n            default:\n                return 'Improve error message in ChatbotType.ts';\n        }\n    }\n\n    addEmptyRuleAndSortInc = (valArray: Array<number>): Array<number> => {\n        if (!valArray.includes(0)) valArray.push(0);\n        return valArray.sort((a, b) => a - b);\n    };\n}\n","const numberInputTypesObject = {\n    0: ['0', 'zero', 'null', 'ingen', 'None', 'ikkje nokon'],\n    1: ['1', 'one', 'en', 'ett', 'et', 'ein', 'eitt', 'eit'],\n    2: ['2', 'two', 'to'],\n    3: ['3', 'three', 'tre'],\n    4: ['4', 'four', 'fire'],\n    5: ['5', 'five', 'fem'],\n    6: ['6', 'six', 'seks'],\n    7: ['7', 'seven', 'syv', 'sju'],\n    8: ['8', 'eight', 'aatte', 'tte'],\n    9: ['9', 'nine', 'ni'],\n    10: ['10', 'ten', 'ti'],\n    11: ['11', 'eleven', 'elleve'],\n    12: ['12', 'twelve', 'tolv'],\n    13: ['13', 'thirteen', 'tretten'],\n    14: ['14', 'fourteen', 'fjorten'],\n    15: ['15', 'fifteen', 'femten'],\n    16: ['16', 'sixteen', 'seksten'],\n    17: ['17', 'seventeen', 'sytten', 'stten'],\n    18: ['18', 'eighteen', 'atten'],\n    19: ['19', 'nineeen', 'nitten'],\n    20: ['20', 'twenty', 'tyve', 'tjue'],\n    21: ['21'],\n    // until 40.\n};\n\nexport const returnKeyFromEnteredNumberText = (chosenValue: string) => {\n    const key = Object.keys(numberInputTypesObject).find((key) =>\n        (numberInputTypesObject as any)[key].includes(\n            chosenValue.toLowerCase(),\n        ),\n    );\n    return key ?? chosenValue;\n};\n","import { FormattedMessage } from 'react-intl';\nimport {\n    FormattedMessages,\n    undividedOwnershipType,\n} from '../Enums/ChatStepTypes';\nimport React, { ReactElement } from 'react';\nimport ActionProvider from '../../ActionProvider';\n\nexport const getReturnValueFromBooleanWidget = (\n    message: string,\n    state: any,\n) => {\n    state = {\n        ...state,\n        yesNoClickedFlag: true,\n    };\n    const returnValue =\n        message === 'yes' ? (\n            <FormattedMessage id=\"Chatbot.Yes\" />\n        ) : (\n            <FormattedMessage id=\"Chatbot.No\" />\n        );\n\n    return returnValue;\n};\n\nexport const getReturnValueFromUndividedWidget = (\n    message: string,\n    state: any,\n) => {\n    state = {\n        ...state,\n        yesNoClickedFlag: true,\n    };\n\n    const ownershipTypeWithFormattedMessages = {\n        [undividedOwnershipType.felleseie[0]]: (\n            <FormattedMessage id={FormattedMessages.FELLESEIE} />\n        ),\n        [undividedOwnershipType.delvis[0]]: (\n            <FormattedMessage id={FormattedMessages.DELVIS} />\n        ),\n        [undividedOwnershipType.fullt[0]]: (\n            <FormattedMessage id={FormattedMessages.FULLT} />\n        ),\n    };\n\n    return (\n        ownershipTypeWithFormattedMessages[\n            message as keyof typeof ownershipTypeWithFormattedMessages\n        ] ?? 'The message is not in the array'\n    );\n};\n\nexport const modifiedChoiceResponse = (\n    ownershipResponse: string,\n    actionProvider: ActionProvider,\n    state: any,\n): void => {\n    state.messages.pop();\n    const customOwnershipResponse = actionProvider.createClientMessage(\n        React.createElement('div', null, ownershipResponse),\n    );\n    state = actionProvider.addMessageToBotState(customOwnershipResponse, state);\n};\n","\n// error:\n// 1- no digits in input error\n// 2- separatorCount error\n// 3- digitsBeforeSeparatorValue error\n// 4- unknown error, debug\n// 5- normal pass\n//\nconst checkSeparatorCount = (initialCurrencyValue: string): number => {\n    let checkSeparatorCount = 0;\n    for (const i of initialCurrencyValue) {\n        if (i == \",\" || i == \" \" || i == \".\") {\n            checkSeparatorCount += 1;\n        }\n    }\n    if (checkSeparatorCount == 0) {\n        return 0 // no separators, valid input, format it.\n    }\n    else if (checkSeparatorCount > 1) {\n        // more than 1 symbol in the entered value, invalid input, error\n        return 2\n    }\n    else {\n        return 1 // one separator, valid input.\n    }\n}\n\n\nconst checkDigitsBeforeSeparatorValue = (initialCurrencyValue: string): string => {\n    let digitsBeforeSymbol = 0;\n    for (const i of initialCurrencyValue) {\n        if (digitsBeforeSymbol > 3) {\n            // more than 3 digits before symbol\n            return \"incorrect\"\n        }\n        else if (i !== \",\" && i !== \" \" && i !== \".\") {\n            digitsBeforeSymbol += 1;\n        }\n        else {\n            digitsBeforeSymbol = 0;\n        }\n\n    }\n    return \"correct\"\n}\n\nconst removeTextFromCurrencyString = (inputCurrency: string): string => {\n    let beginningValue = \"\";\n    let endValue = \"\"\n\n    // match and remove extra text at the beginning\n    const matchesStart: RegExpMatchArray | null = inputCurrency.match(/^[\\D]{0,}/)\n    if (matchesStart) {\n        const matchStartResult = matchesStart[0];\n        beginningValue = inputCurrency.substring(matchStartResult.length,)\n    }\n\n    // match and remove extra text at the end\n    const matchesEnd: RegExpMatchArray | null = beginningValue.match(/[^\\d]{0,}$/)\n    if (matchesEnd) {\n        const matchEndResult = matchesEnd[0];\n        endValue = beginningValue.substring(0, beginningValue.length - matchEndResult.length)\n    }\n\n    return endValue.replace(\" \", \"\").replace(\".\", \"\").replace(\",\", \"\")\n}\n\nexport const ParseCurrencyStringForOutput = (unformattedCurrency: string): string => {\n    return new Intl.NumberFormat(\"no-NO\", {\n        style: \"currency\",\n        currency: \"NOK\",\n        currencyDisplay: \"narrowSymbol\",\n        minimumFractionDigits: 0,\n        maximumFractionDigits: 0,\n    }).format(Number(unformattedCurrency.replace(/[^0-9.-]+/g, \"\"))).replace(\"kr\", \"kr.\").concat(\",-\");\n\n}\n\nexport const validateCurrency = (inputCurrency: string): boolean => {\n    // const currencyMatchExpression = /^((\\d{1,3},)*\\d{3}|\\d{1,3})\\.\\d{2}$|^((\\d{1,3}\\.)*\\d{3}|\\d{1,3})$/;\n    const currencyMatchExpression = /^\\d+$/;\n    if (inputCurrency.match(currencyMatchExpression)) {\n        return true;\n    } else {\n        return false;\n    }\n};\n\nexport const CurrencyOutput = (inputCurrency: string): [number, string] => {\n\n    if ((/\\d/).test(inputCurrency)) {\n        const initialCurrencyValue: string = removeTextFromCurrencyString(inputCurrency)\n\n        let digitsBeforeSeparatorValue = \"correct\"\n        const separatorCount = checkSeparatorCount(initialCurrencyValue);\n        if (separatorCount !== 0) {\n            digitsBeforeSeparatorValue = checkDigitsBeforeSeparatorValue(initialCurrencyValue)\n        }\n        if ((separatorCount === 0 || separatorCount === 1) && digitsBeforeSeparatorValue === \"correct\") {\n            return [5, initialCurrencyValue]\n        }\n\n        else {\n            if (separatorCount === 2) {\n                return [2, \"separatorCount\"]\n            }\n            else if (digitsBeforeSeparatorValue === \"incorrect\") {\n                return [3, \"digitsBeforeSeparatorValue\"]\n            }\n            else {\n                return [4, \"unknown error, debug\"]\n            }\n        }\n    }\n    else {\n        // show error message and ask question again\n        return [1, \"\"]\n    }\n\n}\n","import { ReactElement, useRef, useState } from \"react\";\nimport Popover from \"@mui/material/Popover\";\nimport \"./ShowInfoWidget.scss\";\nimport LiveHelpIcon from \"@mui/icons-material/LiveHelp\";\nimport makeStyles from \"@mui/styles/makeStyles\";\nimport { FormattedMessage } from \"react-intl\";\nimport { useTheme } from \"@mui/material/styles\";\n// import { Typography } from \"@mui/material\";\n\nconst useStyles = makeStyles((_) => ({\n  popover: {\n    pointerEvents: \"none\",\n  },\n  paper: {\n    padding: useTheme().spacing(1),\n    backgroundColor: \"#e8e4c9\",\n  },\n}));\n\nconst ShowInfoWidget = (props: any): ReactElement => {\n  const classes = useStyles();\n  /*\n   used reference to parent element for correcting the scrollbar conflict issue on popover show.\n   https://stackoverflow.com/questions/53985436/material-ui-unblock-scrolling-when-popover-is-opened\n  */\n  const [anchorEl, setAnchorEl] = useState(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const handlePopoverOpen = (event: any) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handlePopoverClose = () => {\n    setAnchorEl(null);\n  };\n\n  const open = Boolean(anchorEl);\n  return (\n    <div className=\"infoDiv\" ref={containerRef}>\n      <LiveHelpIcon\n        className=\"InfoWidgetIcon\"\n        onMouseEnter={handlePopoverOpen}\n        onMouseLeave={handlePopoverClose}\n        aria-owns={open ? \"mouse-over-popover\" : undefined}\n        aria-haspopup=\"true\"\n      />\n\n      <Popover\n        id=\"mouse-over-popover\"\n        className={classes.popover}\n        classes={{\n          paper: classes.paper,\n        }}\n        open={open}\n        anchorEl={anchorEl}\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"right\",\n        }}\n        transformOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"left\",\n        }}\n        onClose={handlePopoverClose}\n        disableRestoreFocus\n        container={containerRef.current}\n      >\n        <FormattedMessage id={props.text} />\n      </Popover>\n    </div>\n  );\n};\n\nexport default ShowInfoWidget;\n","import { ReactElement } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport ShowInfoWidget from \"../../Custom/Widgets/ShowInfoWidget/ShowInfoWidget\";\n\nclass QuestionConstants {\n  static TestatorQuestion = (\n    <FormattedMessage id=\"Chatbot.TESTATOR_QUESTION\" />\n  );\n\n  static UndividedEstateQuestion = (\n    <FormattedMessage id=\"Chatbot.UNDIVIDED_ESTATE_QUESTION\" />\n  );\n\n  static YesNoWidgetOptions = {\n    widget: \"optionSelectorWidget\",\n    withAvatar: true,\n    loading: true,\n    terminateLoading: true,\n  };\n\n  static UndividedEstateResultText = (selectedOption: string): ReactElement => {\n    const undividedEstateResultText =\n      selectedOption === \"true\" ? \"Chatbot.Yes\" : \"Chatbot.No\";\n    return <FormattedMessage id={undividedEstateResultText} />;\n  };\n\n  static undvdSpouseOtherSuccessorQuestion = (): ReactElement => {\n    const undividedSpouseOtherSuccessorQuestion =\n      \"How many children does the first-deceased have from other relationship(s) (srkullsbarn)?\";\n    return <div>{undividedSpouseOtherSuccessorQuestion}</div>;\n  };\n\n  static testatorOtherSuccessorQuestion = (): ReactElement => {\n    const testatorOtherSuccessorQuestion =\n      \"How many children does the last-deceased have from other relationship(s) (srkullsbarn)?\";\n    return <div>{testatorOtherSuccessorQuestion}</div>;\n  };\n\n  static NetWealthQuestion = (\n    <div>\n      <FormattedMessage id=\"Chatbot.NET_WEALTH_QUESTION\" />\n      <ShowInfoWidget text=\"Chatbot.NET_WEALTH_EXTRA_INFO\" />\n    </div>\n  );\n\n  static NetWealthWarning = (\n    <FormattedMessage id=\"Chatbot.NET_WEALTH_WARNING\" />\n  );\n\n  static UnderAgeQuestion = (\n    <FormattedMessage id=\"Chatbot.UNDER_AGE_QUESTION\" />\n  );\n\n  static UnderAgeResultText = (selectedOption: boolean): ReactElement => {\n    const underAgeResultText = selectedOption\n      ? \"Chatbot.UnderAge\"\n      : \"Chatbot.NotUnderAge\";\n\n    return <FormattedMessage id={underAgeResultText} />;\n  };\n\n  static SpouseChoiceQuestion = (\n    <FormattedMessage id=\"Chatbot.SPOUSE_EXIST_QUESTION\" />\n  );\n\n  static SpouseQuestion = (<FormattedMessage id=\"Chatbot.SPOUSE_QUESTION\" />);\n\n  static CohabitantChoiceQuestion = (\n    <FormattedMessage id=\"Chatbot.COHABITANT_EXIST_QUESTION\" />\n  );\n\n  static CohabitantQuestion = (\n    <div>\n      <FormattedMessage id=\"Chatbot.COHABITANT_QUESTION\" />\n      <ShowInfoWidget text=\"Chatbot.COHABITANT_EXTRA_INFO\" />\n    </div>\n  );\n\n  static addSuccessorQuestion1 = (person_id: string): ReactElement => {\n    return (\n      <div>\n        <FormattedMessage\n          id=\"Chatbot.addSuccessorQn1\"\n          values={{ person_ID: <strong>{person_id}</strong> }}\n        />\n        <ShowInfoWidget text=\"Chatbot.CHILD_EXTRA_INFO\" />\n      </div>\n    );\n  };\n  static addSuccessorQuestion2 = (\n    person_id: string,\n    child_id_string: ReactElement\n  ): ReactElement => {\n    return (\n      <div>\n        <FormattedMessage\n          id=\"Chatbot.addSuccessorQn2\"\n          values={{\n            person_ID: <strong>{person_id}</strong>,\n            children_IDs: child_id_string,\n          }}\n        />\n        <ShowInfoWidget text=\"Chatbot.CHILD_EXTRA_INFO\" />\n      </div>\n    );\n  };\n\n  static AliveQuestion = (child_id: string): ReactElement => {\n    return (\n      <FormattedMessage\n        id=\"Chatbot.ALIVE_CHILD\"\n        values={{ child_ID: child_id }}\n      />\n    );\n  };\n\n  static AliveResultText = (selectedOption: string): ReactElement => {\n    const aliveResultText = selectedOption ? \"Chatbot.Yes\" : \"Chatbot.No\";\n\n    return <FormattedMessage id={aliveResultText} />;\n  };\n\n  static addParentsQuestion1 = (person_id: string): ReactElement => {\n    return (\n      <div>\n        <FormattedMessage\n          id=\"Chatbot.addParentsQn1\"\n          values={{ person_ID: <strong>{person_id}</strong> }}\n        />\n        <ShowInfoWidget text=\"Chatbot.PARENT_EXTRA_INFO\" />\n      </div>\n    );\n  };\n\n  static askSecondParentChoiceQuestion = (person_id: string): ReactElement => {\n    return (\n      <div>\n        <FormattedMessage\n          id=\"Chatbot.SecondParentChoice\"\n          values={{ person_ID: <strong>{person_id}</strong> }}\n        />\n      </div>\n    );\n  };\n\n  static addParentsQuestion2 = (\n    person_id: string,\n    parent_id_string: ReactElement\n  ): ReactElement => {\n    return (\n      <div>\n        <FormattedMessage\n          id=\"Chatbot.addParentsQn2\"\n          values={{\n            person_ID: <strong>{person_id}</strong>,\n            parents_IDs: parent_id_string,\n          }}\n        />\n        <ShowInfoWidget text=\"Chatbot.PARENT_EXTRA_INFO\" />\n      </div>\n    );\n  };\n\n  static MarriedParents1 = (\n    first_parent_id: string,\n    second_parent_id: string\n  ): ReactElement => {\n    return (\n      <div>\n        <FormattedMessage\n          id=\"Chatbot.marriedParents1\"\n          values={{\n            parent1_ID: <strong>{first_parent_id}</strong>,\n            parent2_ID: <strong>{second_parent_id}</strong>,\n          }}\n        />\n      </div>\n    );\n  };\n\n  static MarriedParents2 = (\n    first_parent_id: string,\n    second_parent_id: string\n  ): ReactElement => {\n    return (\n      <div>\n        <FormattedMessage\n          id=\"Chatbot.marriedParents2\"\n          values={{\n            parent1_ID: <strong>{first_parent_id}</strong>,\n            parent2_ID: <strong>{second_parent_id}</strong>,\n          }}\n        />\n      </div>\n    );\n  };\n\n  static addGrandParentsQuestion1 = (parent_id: string): ReactElement => {\n    return (\n      <div>\n        <FormattedMessage\n          id=\"Chatbot.addGrandParentQn1\"\n          values={{ parent_id: <strong>{parent_id}</strong> }}\n        />\n      </div>\n    );\n  };\n\n  static addGrandParentsQuestion2 = (\n    parent_id: string,\n    grandparent_id_string: ReactElement\n  ): ReactElement => {\n    return (\n      <div>\n        <FormattedMessage\n          id=\"Chatbot.addGrandParentQn2\"\n          values={{\n            parent_id: <strong>{parent_id}</strong>,\n            grandParents_IDs: grandparent_id_string,\n          }}\n        />\n      </div>\n    );\n  };\n\n  static FinalQuestion = (<FormattedMessage id=\"Chatbot.FINAL_QUESTION\" />);\n\n  static EmptyQuestion = (<p></p>);\n  static DefaultText = (<FormattedMessage id=\"Chatbot.DEFAULT_TEXT\" />);\n\n  // UndividedEstateStart\n\n  static TotalEstateNetValueQuestion = (\n    <div>\n      <FormattedMessage id=\"Chatbot.TOTAL_ESTATE_NET_VALUE_QUESTION\" />\n      <ShowInfoWidget text=\"Chatbot.TOTAL_ESTATE_NET_VALUE_EXTRA_INFO\" />\n    </div>\n  );\n\n  static TotalEstateNetValueWarning = (\n    <FormattedMessage id=\"Chatbot.NET_WEALTH_WARNING\" />\n  );\n\n  static OwnershipTypeQuestion = (\n    <FormattedMessage id=\"Chatbot.FELLESEIE_QUESTION\" />\n  );\n\n  static OwnershipQuestionWidgetOptions = {\n    widget: \"undividedEstateWidget\",\n    withAvatar: true,\n    loading: true,\n    terminateLoading: true,\n  };\n\n  static OwnershipTypeWarning = (\n    <FormattedMessage id=\"Chatbot.OptionChoiceWrongWarning\" />\n  );\n\n  static DelvisFirstQuestion = (\n    <div>\n      <FormattedMessage id=\"Chatbot.DELVIS_SAEREIE_FIRST_QUESTION\" />\n      <ShowInfoWidget text=\"Chatbot.DELVIS_SAEREIE_FIRST_EXTRA_INFO\" />\n    </div>\n  );\n\n  static DelvisSecondQuestion = (\n    <div>\n      <FormattedMessage id=\"Chatbot.DELVIS_SAEREIE_LAST_QUESTION\" />\n      <ShowInfoWidget text=\"Chatbot.DELVIS_SAEREIE_LAST_EXTRA_INFO\" />\n    </div>\n  );\n\n  static FulltSaereieQuestion = (\n    <div>\n      <FormattedMessage id=\"Chatbot.FULLT_SAEREIE_QUESTION\" />\n      <ShowInfoWidget text=\"Chatbot.FULLT_SAEREIE_EXTRA_INFO\" />\n    </div>\n  );\n\n  static UndividedEstateSpouseQuestion = (\n    <div>\n      <FormattedMessage id=\"Chatbot.UNDIVIDED_SPOUSE_QUESTION\" />\n    </div>\n  );\n\n  static TextBeforeSucsrUndvdSpouse = (\n    <div>\n      <FormattedMessage id=\"Chatbot.TextBeforeSucsrUndvdSpouse\" />\n    </div>\n  );\n\n  // UndividedEstateEnd\n  static addSuccessorCount = (person_id: string): ReactElement => {\n    return (\n      <div>\n        <FormattedMessage\n          id=\"Chatbot.addSuccessorCount\"\n          values={{ person_ID: <strong>{person_id}</strong> }}\n        />\n      </div>\n    );\n  };\n\n  static undividedChildrenTogetherCount = (): ReactElement => {\n    return <div>How many children do they have together?</div>;\n  };\n\n  static addSuccessorOfParentCount = (\n    person_id: string,\n    existing_child_id: ReactElement\n  ): ReactElement => {\n    return (\n      <div>\n        <FormattedMessage\n          id=\"Chatbot.addSuccessorCountExistingParent\"\n          values={{\n            person_ID: <strong>{person_id}</strong>,\n            existing_child_ID: <strong>{existing_child_id}</strong>,\n          }}\n        />\n      </div>\n    );\n  };\n}\n\nexport default QuestionConstants;\n","export default class InheritanceConstants {\n  static DESC_COHABITANT_WITHOUT_COMMON_CHILD =\n    \"Arvelater har ikke felles barn med samboer og vedkommende har ikke krav p arv (MED MINDRE DE VENTER FELLES BARN!).\";\n  static DESC_NO_SPOUSE_OR_COHABITANT =\n    \"Arvelater etterlater hverken ektefelle eller samboer.\";\n  static DESC_COHABITANT_NO_CLOSE_RELATIVES_2 =\n    \"Arvelaters nrmeste gjenlevende slektning er i tredje arvegangsklasse, men etterkommer av barnebarn av arvelaters besteforeldre. Hele arven gr da til gjenlevende samboer med felles barn.\";\n  static DESC_COHABITANT_NO_CLOSE_RELATIVES =\n    \"Arvelater har ingen gjenlevende slektninger i de tre frste arvegangsklassene. Hele arven gr da til gjenlevende samboer med felles barn.\";\n  static DESC_SPOUSE_NO_CLOSE_RELATIVES_2 =\n    \"Arvelaters nrmeste gjenlevende slektning er i andre arvegangsklasse, men etterkommer av barnebarn av arvelaters besteforeldre. Hele arven gr da til gjenlevende ektefellep.\";\n  static DESC_SPOUSE_NO_CLOSE_RELATIVES =\n    \"Arvelater har ingen gjenlevende slektninger i de to frste arvegangsklassene. Hele arven gr da til gjenlevende ektefelle.\";\n\n  static G = 101351;\n  static MINIMUM_INHERITANCE_SPOUSE_VS_CHILDREN = 4 * this.G;\n  static FRACTION_INHERITANCE_SPOUSE_VS_CHILDREN = 1 / 4;\n  static MINIMUM_INHERITANCE_SPOUSE_VS_PARENTS = 6 * this.G;\n  static FRACTION_INHERITANCE_SPOUSE_VS_PARENTS = 1 / 2;\n  static MINIMUM_INHERITANCE_COHABITANT_VS_CHILDREN = 4 * this.G;\n  static FRACTION_INHERITANCE_COHABITANT_VS_CHILDREN = 0;\n  static MINIMUM_INHERITANCE_COHABITANT_VS_PARENTS = 4 * this.G;\n  static FRACTION_INHERITANCE_COHABITANT_VS_PARENTS = 0;\n  static FRACTION_PLIKTDEL = 2 / 3;\n  static LINE_MAXIMUM_PLIKTDEL = 15 * this.G;\n\n  static LAW_LINKS = {\n    \"4\": [\n      \"https://lovdata.no/dokument/NL/lov/2019-06-14-21/KAPITTEL_2-1#%C2%A74\",\n      \"https://lovdata.no/NL/lov/2019-06-14-21/4\",\n    ],\n    \"5\": [\n      \"https://lovdata.no/dokument/NL/lov/2019-06-14-21/KAPITTEL_2-1#%C2%A75\",\n      \"https://lovdata.no/NL/lov/2019-06-14-21/5\",\n    ],\n    \"6\": [\n      \"https://lovdata.no/dokument/NL/lov/2019-06-14-21/KAPITTEL_2-1#%C2%A76\",\n      \"https://lovdata.no/NL/lov/2019-06-14-21/6\",\n    ],\n    \"7\": [\n      \"https://lovdata.no/dokument/NL/lov/2019-06-14-21/KAPITTEL_2-1#%C2%A77\",\n      \"https://lovdata.no/NL/lov/2019-06-14-21/7\",\n    ],\n    \"8\": [\n      \"https://lovdata.no/dokument/NL/lov/2019-06-14-21/KAPITTEL_2-2#%C2%A78\",\n      \"https://lovdata.no/NL/lov/2019-06-14-21/8\",\n    ],\n    \"9\": [\n      \"https://lovdata.no/dokument/NL/lov/2019-06-14-21/KAPITTEL_2-2#%C2%A79\",\n      \"https://lovdata.no/NL/lov/2019-06-14-21/9\",\n    ],\n    \"10\": [\n      \"https://lovdata.no/dokument/NL/lov/2019-06-14-21/KAPITTEL_2-2#%C2%A710\",\n      \"https://lovdata.no/NL/lov/2019-06-14-21/10\",\n    ],\n    \"12\": [\n      \"https://lovdata.no/dokument/NL/lov/2019-06-14-21/KAPITTEL_2-3#%C2%A712\",\n      \"https://lovdata.no/NL/lov/2019-06-14-21/12\",\n    ],\n    \"50\": [\n      \"https://lovdata.no/dokument/NL/lov/2019-06-14-21/KAPITTEL_2-6-3#%C2%A750\",\n      \"https://lovdata.no/NL/lov/2019-06-14-21/50\",\n    ],\n    \"75\": [\n      \"https://lovdata.no/dokument/NL/lov/2019-06-14-21/KAPITTEL_2-8#%C2%A775\",\n      \"https://lovdata.no/NL/lov/2019-06-14-21/75\",\n    ],\n    \"76\": [\n      \"https://lovdata.no/dokument/NL/lov/2019-06-14-21/KAPITTEL_2-9#%C2%A776\",\n      \"https://lovdata.no/NL/lov/2019-06-14-21/76\",\n    ],\n  };\n\n  static CODE_PARAGRAPHS = {\n    \"4 frste og annet ledd\":\n      \"De nrmeste slektsarvingene er arvelaterens livsarvinger.\\n\\nArven deles likt mellom arvelaterens barn, om ikke noe annet flger av srskilte lovregler. Hvis et barn er dd, gr dette barnets del av arven til barnets livsarvinger med lik andel p hver gren. P samme mte arver fjernere livsarvinger. Hvis et barn er dd og ikke etterlater seg livsarvinger, gr dette barnets del av arven til de andre barna eller deres livsarvinger med lik andel p hver gren.\",\n    \"5 frste, andre og tredje ledd\":\n      \"Hvis arvelateren ikke har livsarvinger, gr arven til foreldrene.\\n\\nForeldrene arver likt. Hvis en forelder er dd, gr denne forelderens del av arven til hans eller hennes livsarvinger med lik andel p hver gren.\\n\\nHvis den ene av foreldrene er dd uten  etterlate seg livsarvinger, gr hele arven til den andre forelderen eller til hans eller hennes livsarvinger med lik andel p hver gren. Dr arvelateren fr fylte 25 r, gr likevel halvparten av arven til besteforeldrene p den dde forelderens side eller til deres livsarvinger i samsvar med  6 dersom foreldrene verken var gift eller samboende med hverandre da den frste dde, eller det forel omstendigheter som nevnt i  11. Er heller ingen slike arvinger i live, gjelder reglene i frste punktum.\",\n    \"6 frste og annet ledd\":\n      \"Hvis arvelateren ikke har slektsarvinger som nevnt i  4 og 5, gr arven til besteforeldrene eller til livsarvinger etter dem, slik at reglene i  5 annet ledd gjelder tilsvarende. Fjernere livsarvinger etter besteforeldrene enn deres barnebarn har likevel ikke arverett etter loven.\\n\\nHvis en av besteforeldrene er dd, og ingen barn eller barnebarn er i live, gr arven som ellers ville ha tilkommet ham eller henne, til den andre av besteforeldrene p samme side eller til dennes barn eller barnebarn. Hvis det ikke er arvinger p den ene siden, gr hele arven til arvingene p den andre siden.\",\n    \"6 frste ledd, andre punktum\":\n      \"Fjernere livsarvinger etter besteforeldrene enn deres barnebarn har likevel ikke arverett etter loven.\",\n    \"7\": \"Arverett etter dette kapitlet gjelder bare foreldreskap som flger av reglene i barneloven, adopsjonsloven eller annen lov.\\n\\nFaren og farens slekt tar ikke arv etter barnet dersom det er unnfanget som flge av en handling som er et brudd p en bestemmelse i straffeloven  291, 294, 295, 296, 299, 302, 312 eller 314, og som faren er dmt for. Frste punktum gjelder ogs hvis dommen gr ut p at faren ikke kan straffes p grunn av vilkrene i straffeloven  20.\",\n    \"8 frste ledd\":\n      \"Ektefellen har rett til en firedel av arven nr det er livsarvinger etter arvelateren, men ektefellen har uansett rett til en minstearv p fire ganger folketrygdens grunnbelp ved arvefallet.\",\n    \"9 frste ledd\":\n      \"Ektefellen har rett til halvparten av arven nr arvelaterens nrmeste slektsarvinger er foreldrene eller deres etterkommere, men ektefellen har uansett rett til en minstearv p seks ganger folketrygdens grunnbelp ved arvefallet.\",\n    \"9 annet ledd\":\n      \"Ektefellen arver alt nr det verken er livsarvinger eller slektsarvinger som nevnt i frste ledd etter arvelateren.\",\n    \"10 annet ledd\":\n      \"Et belp tilsvarende seks ganger folketrygdens grunnbelp ved arvefallet kan ikke fratas ektefellen ved testament. Etterlater arvelateren seg livsarvinger, er belpsgrensen etter frste punktum fire ganger folketrygdens grunnbelp.\",\n    \"12 frste ledd\":\n      \"Den som var samboer med arvelateren ved ddsfallet og har, har hatt eller venter barn med arvelateren, har rett til en arv p fire ganger folketrygdens grunnbelp ved arvefallet. Dette gjelder ogs om det er livsarvinger etter arvelateren.  8 annet ledd gjelder tilsvarende\",\n    \"50 frste ledd\":\n      \"To tredeler av formuen etter arvelateren er pliktdelsarv for livsarvingene. Pliktdelsarven er likevel aldri strre enn 15 ganger folketrygdens grunnbelp ved arvefallet til hvert av arvelaterens barn eller hvert barns linje.\",\n    \"75 frste ledd\":\n      \"Har en livsarving mottatt en ytelse av konomisk verdi fra arvelateren, skal ytelsen avkortes i livsarvingens arv hvis dette var satt som en betingelse for ytelsen. En betingelse om avkorting br vre skriftlig og gjort kjent for de andre livsarvingene.\",\n    \"76 frste ledd, frste punktum\":\n      \"Hvis den avdde ikke har arvinger etter loven eller etter testament, skal nettoformuen g til frivillig virksomhet til fordel for barn og unge.\",\n  };\n}\n","import ActionProvider from '../ChatbotComponent/ActionProvider';\nimport { ChatbotInterface } from '../ChatbotComponent/Generics';\nimport Person from '../ChatbotComponent/Helper/Classes/Person';\n\nimport _ from 'lodash';\nimport { inheritanceFractionType } from './ReportCalculationBase';\nimport {\n    getNode,\n    getPerson,\n    get_class_and_distance_closest_surviving_relative,\n} from '../ChatbotComponent/ActionProviderMethods/OtherChatbotMethods';\n\nconst manipulateDuplicatedMapArray = (\n    duplicatedMapArray: Array<inheritanceFractionType>,\n) => {\n    const personValue = duplicatedMapArray[0].person;\n    const fracSum = duplicatedMapArray.reduce((accumulator, item) => {\n        return accumulator + item.frac;\n    }, 0);\n    const chainsValue = duplicatedMapArray.reduce((arr: any[], curr) => {\n        arr.push(curr.chains);\n        return arr;\n    }, []);\n\n    return {\n        person: personValue,\n        frac: fracSum,\n        chains: chainsValue,\n    };\n};\n\nexport const combine_duplicates = (\n    inheritance_fraction_list: Array<inheritanceFractionType>,\n): Array<inheritanceFractionType> => {\n    const duplicateArrayPersonMap = new Map<\n        string,\n        Array<inheritanceFractionType>\n    >();\n    const combinedArray: Array<inheritanceFractionType> = [];\n\n    for (const inheritance_fraction of inheritance_fraction_list) {\n        if (!duplicateArrayPersonMap.has(inheritance_fraction.person)) {\n            duplicateArrayPersonMap.set(inheritance_fraction.person, [\n                inheritance_fraction,\n            ]);\n        } else {\n            const tempInheritanceFractionList = duplicateArrayPersonMap.get(\n                inheritance_fraction.person,\n            );\n            tempInheritanceFractionList?.push(inheritance_fraction);\n            if (tempInheritanceFractionList !== undefined) {\n                duplicateArrayPersonMap.set(\n                    inheritance_fraction.person,\n                    tempInheritanceFractionList,\n                );\n            }\n        }\n    }\n\n    for (const key of duplicateArrayPersonMap.keys()) {\n        const currentValue = duplicateArrayPersonMap.get(key);\n        if (currentValue !== undefined) {\n            combinedArray.push(manipulateDuplicatedMapArray(currentValue));\n        }\n    }\n    return combinedArray;\n};\n\nexport const split_evenly_between_lines = (\n    actionProvider: ActionProvider,\n    state: ChatbotInterface,\n    person_list: Array<number>,\n    maximum_distance: number | undefined = undefined,\n    allow_parents = false,\n): inheritanceFractionType[] => {\n    let split_fraction_list: inheritanceFractionType[] = [];\n    if (person_list.length === 0) {\n        return split_fraction_list;\n    }\n\n    const split_frac = 1 / person_list.length;\n\n    for (const person of person_list) {\n        const personDetail: Person = getPerson(person, state.personsMap);\n        const personNode = getNode(person, state.nodeMap);\n        if (personDetail._deceased) {\n            if (maximum_distance === 0) {\n                // pass\n            } else if (\n                get_class_and_distance_closest_surviving_relative(\n                    personNode,\n                    state,\n                )[1] !== 1\n            ) {\n                if (allow_parents) {\n                    let temp_list: inheritanceFractionType[] =\n                        split_evenly_between_lines(\n                            actionProvider,\n                            state,\n                            personNode._parents,\n                        );\n                    let level_sum = 0;\n                    for (const item of temp_list) {\n                        level_sum += item.frac;\n                    }\n                    const interm_temp_list: inheritanceFractionType[] = [];\n                    if (level_sum !== 1) {\n                        for (const item of temp_list) {\n                            interm_temp_list.push({\n                                person: item.person,\n                                frac: item.frac / level_sum,\n                                chains: item.chains,\n                            });\n                        }\n                        temp_list = interm_temp_list;\n                    }\n\n                    const temp_split_fraction_list: Array<inheritanceFractionType> =\n                        [];\n                    for (const item of temp_list) {\n                        temp_split_fraction_list.push({\n                            person: item.person,\n                            frac: item.frac * split_frac,\n                            chains: item.chains.concat([\n                                personDetail._personName,\n                            ]),\n                        });\n                    }\n                    split_fraction_list = split_fraction_list.concat(\n                        temp_split_fraction_list,\n                    );\n                } else {\n                    return [];\n                }\n            } else {\n                let temp_list = split_evenly_between_lines(\n                    actionProvider,\n                    state,\n                    personNode._children,\n                );\n                const temp_fraction_list: Array<inheritanceFractionType> = [];\n                let level_sum = 0;\n                for (const item of temp_list) {\n                    level_sum += item.frac;\n                }\n                if (level_sum !== 1) {\n                    temp_list.map((temp_list_item) => {\n                        temp_fraction_list.push({\n                            person: temp_list_item.person,\n                            frac: temp_list_item.frac / level_sum,\n                            chains: temp_list_item.chains,\n                        });\n                    });\n                    temp_list = temp_fraction_list;\n                }\n                const temp_split_fraction_list: Array<inheritanceFractionType> =\n                    [];\n                temp_list.map((temp_list_item) => {\n                    temp_split_fraction_list.push({\n                        person: temp_list_item.person,\n                        frac: temp_list_item.frac * split_frac,\n                        chains: temp_list_item.chains.concat(\n                            personDetail._personName,\n                        ),\n                    });\n                });\n\n                split_fraction_list = split_fraction_list.concat(\n                    temp_split_fraction_list,\n                );\n            }\n        } else {\n            split_fraction_list.push({\n                person: personDetail._personName,\n                frac: split_frac,\n                chains: [],\n            });\n        }\n    }\n    let level_sum = 0;\n    for (const item of split_fraction_list) {\n        level_sum += item.frac;\n    }\n\n    if (level_sum !== 1) {\n        const temp_split_fraction_list: Array<inheritanceFractionType> = [];\n        for (const item of split_fraction_list) {\n            temp_split_fraction_list.push({\n                person: item.person,\n                frac: item.frac / level_sum,\n                chains: item.chains,\n            });\n        }\n        split_fraction_list = split_fraction_list.concat(\n            temp_split_fraction_list,\n        );\n    }\n\n    if (_.isEqual(split_fraction_list, [])) return [];\n    return split_fraction_list;\n};\n","import { ChatbotInterface } from '../ChatbotComponent/Generics';\nimport { NodeEntity } from '../ChatbotComponent/Helper/Classes/NodeEntity';\nimport Norsk from '../../../languages/translationNO.json';\nimport { createIntl, createIntlCache } from 'react-intl';\nimport ActionProvider from '../ChatbotComponent/ActionProvider';\nimport {\n    getNode,\n    getPerson,\n    get_class_and_distance_closest_surviving_relative,\n} from '../ChatbotComponent/ActionProviderMethods/OtherChatbotMethods';\nimport InheritanceConstants from '../ChatbotComponent/Helper/Methods/InheritanceConstants';\nimport { combine_duplicates, split_evenly_between_lines } from './ReportUtils';\nconst cache = createIntlCache();\nconst intl = createIntl({ locale: 'nb-NO', messages: Norsk }, cache);\n\ninterface InheritanceCalculationInterface {\n    state: ChatbotInterface;\n    actionProvider: ActionProvider;\n    person: NodeEntity;\n    survivor: number | null;\n    survivor_type: string;\n    class_closest: number | undefined;\n    distance_closest: number | undefined;\n    old_surviving_reference_paragraphs: string;\n    surviving_reference_paragraphs: Array<string>;\n    minimum_surviving_inheritance: number;\n    surviving_fraction: number;\n    descriptive_text: string;\n    survivor_inheritance_sum: number;\n    genealogy_inheritance_sum: number;\n    splits_with_chains: Array<inheritanceFractionType>;\n    genealogy_inheritance: Array<inheritanceFractionType>;\n    inheritanceType: number;\n    netWealth: number;\n}\nexport type inheritanceFractionType = {\n    person: string;\n    frac: number;\n    chains: Array<string>;\n};\n\nexport interface ReportMethods {\n    computeInheritance(): void;\n    compute_default_genealogy_splits_with_chains(\n        person: number,\n    ): inheritanceFractionType[];\n    computeGenealogyInheritance(person_id: number): inheritanceFractionType[];\n}\n\nexport class ReportCalculationBase implements InheritanceCalculationInterface {\n    state: ChatbotInterface;\n    actionProvider: ActionProvider;\n    person: NodeEntity;\n    survivor: number | null = null;\n    survivor_type = '';\n    class_closest: number | undefined;\n    distance_closest: number | undefined;\n    old_surviving_reference_paragraphs = '';\n    surviving_reference_paragraphs: string[] = [];\n    minimum_surviving_inheritance = 0;\n    surviving_fraction = 0;\n    descriptive_text = '';\n    survivor_inheritance_sum = 0;\n    genealogy_inheritance_sum = 0;\n    splits_with_chains: Array<inheritanceFractionType> = [];\n    genealogy_inheritance: Array<inheritanceFractionType> = [];\n    genealogy_splits: Array<inheritanceFractionType> = [];\n    will: undefined;\n    inheritanceType: number;\n    netWealth: number;\n    constructor(\n        person: NodeEntity,\n        actionProvider: ActionProvider,\n        state: ChatbotInterface,\n        inheritanceType: number,\n        will = undefined,\n    ) {\n        this.state = state;\n        this.actionProvider = actionProvider;\n        this.person = getNode(person._id, this.state.nodeMap);\n        this.will = will;\n        this.inheritanceType = inheritanceType;\n        this.netWealth = state.netWealth;\n    }\n\n    initializeInheritance = () => {\n        if (this.person === undefined) {\n            return;\n        }\n        console.log('Computing inheritances');\n        this.initializeInheritanceVariablesCommon();\n    };\n\n    initializePliktInheritance = () => {\n        console.log('Computing pliktdelsarv');\n\n        [this.class_closest, this.distance_closest] =\n            get_class_and_distance_closest_surviving_relative(\n                this.state.testator,\n                this.state,\n            );\n\n        if (this.person.has_surviving_spouse()) {\n            this.survivor = this.person._spouse;\n            this.survivor_type = intl.formatMessage({\n                id: 'REPORT.Inheritance.survivorType1',\n            });\n\n            this.surviving_reference_paragraphs.push(\n                intl.formatMessage({\n                    id: 'REPORT.Inheritance.surviving_reference_paragraphs_10annet',\n                }),\n            );\n            this.minimum_surviving_inheritance =\n                InheritanceConstants.MINIMUM_INHERITANCE_SPOUSE_VS_CHILDREN;\n            if (this.class_closest === 1) {\n                this.descriptive_text = intl.formatMessage({\n                    id: 'REPORT.Inheritance.DescriptiveTest_firstClass_spouse_4G',\n                });\n            } else {\n                this.descriptive_text = intl.formatMessage({\n                    id: 'REPORT.Inheritance.DescriptiveTest_firstClass_spouse_6G',\n                });\n            }\n        } else {\n            this.survivor = null;\n            this.surviving_reference_paragraphs = [];\n            this.descriptive_text =\n                InheritanceConstants.DESC_NO_SPOUSE_OR_COHABITANT;\n            this.minimum_surviving_inheritance = 0;\n        }\n    };\n\n    initializeUndividedInheritance = () => {\n        console.log('Computing undivided estate inheritances');\n\n        this.initializeInheritanceVariablesCommon();\n    };\n\n    computeMethod = (inheritanceOption: number) => {\n        switch (inheritanceOption) {\n            case 1:\n                this.initializeInheritance();\n                break;\n            case 2:\n                this.initializePliktInheritance();\n                break;\n            case 3:\n                this.initializeUndividedInheritance();\n                break;\n            default:\n                console.log('check error');\n        }\n    };\n\n    initializeInheritanceVariablesCommon = () => {\n        [this.class_closest, this.distance_closest] =\n            get_class_and_distance_closest_surviving_relative(\n                this.state.testator,\n                this.state,\n            );\n        if (this.person.has_surviving_spouse()) {\n            this.survivor = this.person._spouse;\n            this.survivor_type = intl.formatMessage({\n                id: 'REPORT.Inheritance.survivorType1',\n            });\n\n            if (this.class_closest === undefined || this.class_closest > 2) {\n                this.old_surviving_reference_paragraphs = intl.formatMessage({\n                    id: 'REPORT.Inheritance.old_surviving_reference_paragraphs_6forste',\n                });\n                this.surviving_reference_paragraphs.push(\n                    intl.formatMessage({\n                        id: 'REPORT.Inheritance.surviving_reference_paragraphs_9annet',\n                    }),\n                );\n                this.minimum_surviving_inheritance = 0;\n                this.surviving_fraction = 1;\n                this.descriptive_text = intl.formatMessage({\n                    id: 'REPORT.Inheritance.DESC_SPOUSE_NO_CLOSE_RELATIVES',\n                });\n            } else if (this.class_closest === 1) {\n                this.old_surviving_reference_paragraphs = intl.formatMessage({\n                    id: 'REPORT.Inheritance.old_surviving_reference_paragraphs_6forste',\n                });\n                this.surviving_reference_paragraphs.push(\n                    intl.formatMessage({\n                        id: 'REPORT.Inheritance.old_surviving_reference_paragraphs_8forste',\n                    }),\n                );\n                this.minimum_surviving_inheritance =\n                    InheritanceConstants.MINIMUM_INHERITANCE_SPOUSE_VS_CHILDREN;\n                this.surviving_fraction =\n                    InheritanceConstants.FRACTION_INHERITANCE_SPOUSE_VS_CHILDREN;\n                this.descriptive_text = intl.formatMessage({\n                    id: 'REPORT.Inheritance.DescriptiveText4G',\n                });\n            } else if (this.class_closest === 2) {\n                this.old_surviving_reference_paragraphs = intl.formatMessage({\n                    id: 'REPORT.Inheritance.old_surviving_reference_paragraphs_6forste',\n                });\n                this.surviving_reference_paragraphs.push(\n                    intl.formatMessage({\n                        id: 'REPORT.Inheritance.old_surviving_reference_paragraphs_9forste',\n                    }),\n                );\n                this.minimum_surviving_inheritance =\n                    InheritanceConstants.MINIMUM_INHERITANCE_SPOUSE_VS_PARENTS;\n                this.surviving_fraction =\n                    InheritanceConstants.FRACTION_INHERITANCE_SPOUSE_VS_PARENTS;\n                this.descriptive_text = intl.formatMessage({\n                    id: 'REPORT.Inheritance.DescriptiveText6G',\n                });\n            }\n        } else if (this.person.has_surviving_cohabitant()) {\n            this.survivor = this.person._cohabitant;\n            this.survivor_type = intl.formatMessage({\n                id: 'REPORT.Inheritance.survivorType2',\n            });\n\n            if (this.class_closest === undefined || this.class_closest > 3) {\n                this.old_surviving_reference_paragraphs = intl.formatMessage({\n                    id: 'REPORT.Inheritance.old_surviving_reference_paragraphs_28Bforste',\n                });\n                this.surviving_reference_paragraphs.push(\n                    intl.formatMessage({\n                        id: 'REPORT.Inheritance.old_surviving_reference_paragraphs_12forste',\n                    }),\n                );\n                this.minimum_surviving_inheritance = 0;\n                this.surviving_fraction = 1;\n                this.descriptive_text = intl.formatMessage({\n                    id: 'REPORT.Inheritance.DESC_COHABITANT_NO_CLOSE_RELATIVES',\n                });\n            } else if (this.class_closest === 1) {\n                this.old_surviving_reference_paragraphs = intl.formatMessage({\n                    id: 'REPORT.Inheritance.old_surviving_reference_paragraphs_28Bforste',\n                });\n                this.surviving_reference_paragraphs.push(\n                    intl.formatMessage({\n                        id: 'REPORT.Inheritance.old_surviving_reference_paragraphs_12forste',\n                    }),\n                );\n                this.minimum_surviving_inheritance =\n                    InheritanceConstants.MINIMUM_INHERITANCE_COHABITANT_VS_CHILDREN;\n                this.surviving_fraction =\n                    InheritanceConstants.FRACTION_INHERITANCE_COHABITANT_VS_CHILDREN;\n                this.descriptive_text = intl.formatMessage({\n                    id: 'REPORT.Inheritance.DescriptiveText_firstClass_cohab_4G',\n                });\n            } else if (this.class_closest === 2) {\n                this.old_surviving_reference_paragraphs = intl.formatMessage({\n                    id: 'REPORT.Inheritance.old_surviving_reference_paragraphs_28Bforste',\n                });\n                this.surviving_reference_paragraphs.push(\n                    intl.formatMessage({\n                        id: 'REPORT.Inheritance.old_surviving_reference_paragraphs_12forste',\n                    }),\n                );\n                this.minimum_surviving_inheritance =\n                    InheritanceConstants.MINIMUM_INHERITANCE_COHABITANT_VS_PARENTS;\n                this.surviving_fraction =\n                    InheritanceConstants.FRACTION_INHERITANCE_COHABITANT_VS_PARENTS;\n                this.descriptive_text = intl.formatMessage({\n                    id: 'REPORT.Inheritance.DescriptiveText_secondClass_cohab_4G',\n                });\n            } else if (this.class_closest === 3) {\n                if (this.distance_closest && this.distance_closest <= 2) {\n                    this.old_surviving_reference_paragraphs =\n                        intl.formatMessage({\n                            id: 'REPORT.Inheritance.old_surviving_reference_paragraphs_28Bforste',\n                        });\n                    this.surviving_reference_paragraphs.push(\n                        intl.formatMessage({\n                            id: 'REPORT.Inheritance.old_surviving_reference_paragraphs_12forste',\n                        }),\n                    );\n                    this.minimum_surviving_inheritance =\n                        4 * InheritanceConstants.G;\n                    this.surviving_fraction = 0;\n                    this.descriptive_text = intl.formatMessage({\n                        id: 'REPORT.Inheritance.DescriptiveText_thirdClass_cohab_4G',\n                    });\n                } else {\n                    this.old_surviving_reference_paragraphs =\n                        intl.formatMessage({\n                            id: 'REPORT.Inheritance.old_surviving_reference_paragraphs_28Bforste',\n                        });\n                    this.surviving_reference_paragraphs.push(\n                        intl.formatMessage({\n                            id: 'REPORT.Inheritance.old_surviving_reference_paragraphs_12forste',\n                        }),\n                    );\n                    this.minimum_surviving_inheritance = 0;\n                    this.surviving_fraction = 1;\n                    this.descriptive_text = intl.formatMessage({\n                        id: 'REPORT.Inheritance.DESC_COHABITANT_NO_CLOSE_RELATIVES_2',\n                    });\n                }\n            }\n        } else {\n            this.survivor = null;\n            this.surviving_reference_paragraphs = [];\n            this.minimum_surviving_inheritance = 0;\n            this.surviving_fraction = 0;\n            this.descriptive_text = intl.formatMessage({\n                id: 'REPORT.Inheritance.DESC_NO_SPOUSE_OR_COHABITANT',\n            });\n        }\n    };\n\n    computeGenealogyInheritance = (\n        person_id: number,\n        state: ChatbotInterface,\n    ): void => {\n        this.survivor_inheritance_sum = Math.min(\n            this.state.netWealth,\n            Math.max(\n                this.minimum_surviving_inheritance,\n                this.surviving_fraction * this.state.netWealth,\n            ),\n        );\n        this.genealogy_inheritance_sum =\n            this.state.netWealth - this.survivor_inheritance_sum;\n        if (this.genealogy_inheritance_sum !== 0) {\n            this.splits_with_chains =\n                this.compute_default_genealogy_splits_with_chains(\n                    person_id,\n                    this.actionProvider,\n                    state,\n                );\n            this.genealogy_splits = combine_duplicates(this.splits_with_chains);\n\n            this.genealogy_splits.map(\n                (genealogy_split: inheritanceFractionType) => {\n                    this.genealogy_inheritance.push({\n                        person: genealogy_split.person,\n                        frac:\n                            genealogy_split.frac *\n                            this.genealogy_inheritance_sum,\n                        chains: genealogy_split.chains,\n                    });\n                },\n            );\n        } else {\n            this.splits_with_chains = [];\n            this.genealogy_splits = [];\n            this.genealogy_inheritance = [];\n        }\n    };\n\n    computeGenealogyPliktInheritance = (\n        person_id: number,\n        state: ChatbotInterface,\n    ): void => {\n        this.survivor_inheritance_sum = Math.min(\n            this.netWealth,\n            this.minimum_surviving_inheritance,\n        );\n\n        this.genealogy_inheritance_sum = Math.min(\n            this.netWealth - this.survivor_inheritance_sum,\n            this.netWealth * InheritanceConstants.FRACTION_PLIKTDEL,\n            InheritanceConstants.LINE_MAXIMUM_PLIKTDEL *\n                this.person._children.length,\n        );\n\n        if (this.genealogy_inheritance_sum !== 0) {\n            this.splits_with_chains =\n                this.compute_default_genealogy_splits_with_chains(\n                    person_id,\n                    this.actionProvider,\n                    state,\n                );\n            this.genealogy_splits = combine_duplicates(this.splits_with_chains);\n\n            this.genealogy_splits.map(\n                (genealogy_split: inheritanceFractionType) => {\n                    return this.genealogy_inheritance.push({\n                        person: genealogy_split.person,\n                        frac:\n                            genealogy_split.frac *\n                            this.genealogy_inheritance_sum,\n                        chains: genealogy_split.chains,\n                    });\n                },\n            );\n        }\n    };\n\n    compute_default_genealogy_splits_with_chains = (\n        person: number,\n        actionProvider: ActionProvider,\n        state: ChatbotInterface,\n    ): Array<inheritanceFractionType> => {\n        const personNode = getNode(person, state.nodeMap);\n        const personObject = getPerson(person, state.personsMap);\n        const class_closest = get_class_and_distance_closest_surviving_relative(\n            personNode,\n            state,\n        )[0];\n        if (class_closest === 1) {\n            return split_evenly_between_lines(\n                actionProvider,\n                state,\n                personNode._children,\n            );\n        } else if (class_closest === 2) {\n            const firstParentSpouse = getNode(\n                personNode._parents[0],\n                state.nodeMap,\n            )._spouse;\n            if (\n                !personObject._underAge ||\n                firstParentSpouse === personNode._parents[1]\n            ) {\n                return split_evenly_between_lines(\n                    actionProvider,\n                    state,\n                    personNode._parents,\n                );\n            } else {\n                return split_evenly_between_lines(\n                    actionProvider,\n                    state,\n                    personNode._parents,\n                    undefined,\n                    true,\n                );\n            }\n        } else if (class_closest === 3) {\n            const grandParent_splits = split_evenly_between_lines(\n                actionProvider,\n                state,\n                personNode._parents,\n                2,\n            );\n            let num = 0;\n            for (const splits of grandParent_splits) {\n                if (splits) {\n                    num = num + 1;\n                }\n            }\n            const resultGrandParentSplit: Array<inheritanceFractionType> = [];\n            grandParent_splits.map((grandParent_split) => {\n                resultGrandParentSplit.push({\n                    person: grandParent_split.person,\n                    frac: grandParent_split.frac / num,\n                    chains: grandParent_split.chains,\n                });\n            });\n            return resultGrandParentSplit;\n        } else if (class_closest === undefined || class_closest > 3) return [];\n        else return [];\n    };\n}\n","import { ChatbotInterface } from \"../ChatbotComponent/Generics\";\nimport { NodeEntity } from \"../ChatbotComponent/Helper/Classes/NodeEntity\";\nimport Norsk from \"../../../languages/translationNO.json\";\nimport { createIntl, createIntlCache } from \"react-intl\";\nimport ActionProvider from \"../ChatbotComponent/ActionProvider\";\nimport { ReportCalculationBase } from \"./ReportCalculationBase\";\nimport { getNode } from \"../ChatbotComponent/ActionProviderMethods/OtherChatbotMethods\";\nconst cache = createIntlCache();\nconst intl = createIntl({ locale: \"nb-NO\", messages: Norsk }, cache);\n\nexport class InheritanceCalculation extends ReportCalculationBase {\n  state: ChatbotInterface;\n  actionProvider: ActionProvider;\n  person: NodeEntity;\n  will: undefined;\n  constructor(\n    person: NodeEntity,\n    actionProvider: ActionProvider,\n    state: ChatbotInterface,\n    will = undefined\n  ) {\n    super(person, actionProvider, state, 1, will);\n    this.state = state;\n    this.actionProvider = actionProvider;\n    this.person = getNode(person._id, this.state.nodeMap);\n    this.will = will;\n  }\n\n  // computeInheritance = () => {\n  //   [this.class_closest, this.distance_closest] =\n  //     get_class_and_distance_closest_surviving_relative(\n  //       this.state.testator,\n  //       this.state\n  //     );\n\n  //   if (this.person.has_surviving_spouse()) {\n  //     // TODO define has_surviving_spouse in NodeEntity.ts\n  //     this.survivor = this.person._spouse;\n  //     this.survivor_type = intl.formatMessage({\n  //       id: \"REPORT.Inheritance.survivorType1\",\n  //     });\n\n  //     if (this.class_closest === undefined || this.class_closest > 2) {\n  //       this.old_surviving_reference_paragraphs = intl.formatMessage({\n  //         id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_6forste\",\n  //       });\n  //       this.surviving_reference_paragraphs.push(\n  //         intl.formatMessage({\n  //           id: \"REPORT.Inheritance.surviving_reference_paragraphs_9annet\",\n  //         })\n  //       );\n  //       this.minimum_surviving_inheritance = 0;\n  //       this.surviving_fraction = 1;\n  //       this.descriptive_text = intl.formatMessage({\n  //         id: \"REPORT.Inheritance.DESC_SPOUSE_NO_CLOSE_RELATIVES\",\n  //       });\n  //     } else if (this.class_closest === 1) {\n  //       this.old_surviving_reference_paragraphs = intl.formatMessage({\n  //         id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_6forste\",\n  //       });\n  //       this.surviving_reference_paragraphs.push(\n  //         intl.formatMessage({\n  //           id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_8forste\",\n  //         })\n  //       );\n  //       this.minimum_surviving_inheritance =\n  //         InheritanceConstants.MINIMUM_INHERITANCE_SPOUSE_VS_CHILDREN;\n  //       this.surviving_fraction =\n  //         InheritanceConstants.FRACTION_INHERITANCE_SPOUSE_VS_CHILDREN;\n  //       this.descriptive_text = intl.formatMessage({\n  //         id: \"REPORT.Inheritance.DescriptiveText4G\",\n  //       });\n  //     } else if (this.class_closest === 2) {\n  //       this.old_surviving_reference_paragraphs = intl.formatMessage({\n  //         id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_6forste\",\n  //       });\n  //       this.surviving_reference_paragraphs.push(\n  //         intl.formatMessage({\n  //           id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_9forste\",\n  //         })\n  //       );\n  //       this.minimum_surviving_inheritance =\n  //         InheritanceConstants.MINIMUM_INHERITANCE_SPOUSE_VS_PARENTS;\n  //       this.surviving_fraction =\n  //         InheritanceConstants.FRACTION_INHERITANCE_SPOUSE_VS_PARENTS;\n  //       this.descriptive_text = intl.formatMessage({\n  //         id: \"REPORT.Inheritance.DescriptiveText6G\",\n  //       });\n  //     }\n  //   } else if (this.person.has_surviving_cohabitant()) {\n  //     this.survivor = this.person._cohabitant;\n  //     this.survivor_type = intl.formatMessage({\n  //       id: \"Report.Inheritance.survivorType2\",\n  //     });\n\n  //     if (this.class_closest === undefined || this.class_closest > 3) {\n  //       this.old_surviving_reference_paragraphs = intl.formatMessage({\n  //         id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_28Bforste\",\n  //       });\n  //       this.surviving_reference_paragraphs.push(\n  //         intl.formatMessage({\n  //           id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_12forste\",\n  //         })\n  //       );\n  //       this.minimum_surviving_inheritance = 0;\n  //       this.surviving_fraction = 1;\n  //       this.descriptive_text = intl.formatMessage({\n  //         id: \"REPORT.Inheritance.DESC_COHABITANT_NO_CLOSE_RELATIVES\",\n  //       });\n  //     } else if (this.class_closest === 1) {\n  //       this.old_surviving_reference_paragraphs = intl.formatMessage({\n  //         id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_28Bforste\",\n  //       });\n  //       this.surviving_reference_paragraphs.push(\n  //         intl.formatMessage({\n  //           id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_12forste\",\n  //         })\n  //       );\n  //       this.minimum_surviving_inheritance =\n  //         InheritanceConstants.MINIMUM_INHERITANCE_COHABITANT_VS_CHILDREN;\n  //       this.surviving_fraction =\n  //         InheritanceConstants.FRACTION_INHERITANCE_COHABITANT_VS_CHILDREN;\n  //       this.descriptive_text = intl.formatMessage({\n  //         id: \"REPORT.Inheritance.DescriptiveText_firstClass_cohab_4G\",\n  //       });\n  //     } else if (this.class_closest === 2) {\n  //       this.old_surviving_reference_paragraphs = intl.formatMessage({\n  //         id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_28Bforste\",\n  //       });\n  //       this.surviving_reference_paragraphs.push(\n  //         intl.formatMessage({\n  //           id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_12forste\",\n  //         })\n  //       );\n  //       this.minimum_surviving_inheritance =\n  //         InheritanceConstants.MINIMUM_INHERITANCE_COHABITANT_VS_PARENTS;\n  //       this.surviving_fraction =\n  //         InheritanceConstants.FRACTION_INHERITANCE_COHABITANT_VS_PARENTS;\n  //       this.descriptive_text = intl.formatMessage({\n  //         id: \"REPORT.Inheritance.DescriptiveText_secondClass_cohab_4G\",\n  //       });\n  //     } else if (this.class_closest === 3) {\n  //       if (this.distance_closest && this.distance_closest <= 2) {\n  //         this.old_surviving_reference_paragraphs = intl.formatMessage({\n  //           id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_28Bforste\",\n  //         });\n  //         this.surviving_reference_paragraphs.push(\n  //           intl.formatMessage({\n  //             id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_12forste\",\n  //           })\n  //         );\n  //         this.minimum_surviving_inheritance = 4 * InheritanceConstants.G;\n  //         this.surviving_fraction = 0;\n  //         this.descriptive_text = intl.formatMessage({\n  //           id: \"REPORT.Inheritance.DescriptiveText_thirdClass_cohab_4G\",\n  //         });\n  //       } else {\n  //         this.old_surviving_reference_paragraphs = intl.formatMessage({\n  //           id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_28Bforste\",\n  //         });\n  //         this.surviving_reference_paragraphs.push(\n  //           intl.formatMessage({\n  //             id: \"REPORT.Inheritance.old_surviving_reference_paragraphs_12forste\",\n  //           })\n  //         );\n  //         this.minimum_surviving_inheritance = 0;\n  //         this.surviving_fraction = 1;\n  //         this.descriptive_text = intl.formatMessage({\n  //           id: \"REPORT.Inheritance.DESC_COHABITANT_NO_CLOSE_RELATIVES_2\",\n  //         });\n  //       }\n  //     }\n  //   } else {\n  //     this.survivor = null;\n  //     this.surviving_reference_paragraphs = [];\n  //     this.minimum_surviving_inheritance = 0;\n  //     this.surviving_fraction = 0;\n  //     this.descriptive_text = intl.formatMessage({\n  //       id: \"REPORT.Inheritance.DESC_NO_SPOUSE_OR_COHABITANT\",\n  //     });\n  //   }\n  // };\n\n  // compute_default_genealogy_splits_with_chains = (person: number) => {\n  //   //\n  //   const personNode = getNode(person, this.state.nodeMap);\n  //   const personDetail = getPerson(person, this.state.personsMap);\n  //   const [closest_class, closest_distance] =\n  //     get_class_and_distance_closest_surviving_relative(personNode, this.state);\n  //   if (closest_class === 1) {\n  //     return this.reportUtils.split_evenly_between_lines(personNode._children);\n  //   } else if (closest_class === 2) {\n  //     const firstParentNode = getNode(\n  //       personNode._parents[0],\n  //       this.state.nodeMap\n  //     );\n  //     if (\n  //       !personDetail._underAge ||\n  //       firstParentNode._spouse === personNode._parents[1]\n  //     ) {\n  //       return this.reportUtils.split_evenly_between_lines(personNode._parents);\n  //     } else\n  //       return this.reportUtils.split_evenly_between_lines(\n  //         personNode._parents,\n  //         undefined,\n  //         true\n  //       );\n  //   } else if (closest_class === 3) {\n  //     const grandparent_splits = [];\n  //     for (const parent of personNode._parents) {\n  //       const parentNode = getNode(parent, this.state.nodeMap);\n  //       grandparent_splits.push(\n  //         this.reportUtils.split_evenly_between_lines(parentNode._parents, 2)\n  //       );\n  //     }\n  //     const tempArray = [];\n  //     for (const a of grandparent_splits) {\n  //       if (a.length > 0) {\n  //         tempArray.push(a);\n  //       }\n  //     }\n  //     const num = tempArray.length;\n\n  //     const temp_list = [];\n  //     for (const split of grandparent_splits) {\n  //       if (split.length > 0) {\n  //         temp_list.push([split[0]]);\n  //       }\n  //     }\n  //     const resultList = [];\n  //     for (const item of temp_list) {\n  //       resultList.push([item[0], item[1] / num, item[2]]);\n  //     }\n  //     return resultList;\n  //   } else if (closest_class === undefined || closest_class > 3) {\n  //     return [];\n  //   }\n  // };\n\n  // computeGenealogyInheritance = (person_id: number) => {\n  //   this.survivor_inheritance_sum = Math.min(\n  //     this.state.netWealth,\n  //     Math.max(\n  //       this.minimum_surviving_inheritance,\n  //       this.surviving_fraction * this.state.netWealth\n  //     )\n  //   );\n  //   this.genealogy_inheritance_sum =\n  //     this.state.netWealth - this.survivor_inheritance_sum;\n  //   if (this.genealogy_inheritance_sum !== 0) {\n  //     this.splits_with_chains =\n  //       this.compute_default_genealogy_splits_with_chains(person_id);\n  //     const genealogy_splits = this.reportUtils.combine_duplicates(\n  //       this.splits_with_chains\n  //     );\n\n  //     genealogy_splits.map((genealogy_split: any) => {\n  //       return this.genealogy_inheritance.push({\n  //         person: genealogy_split.person,\n  //         frac: genealogy_split.frac * this.genealogy_inheritance_sum,\n  //         chains: genealogy_split.chains,\n  //       });\n  //     });\n  //   } else {\n  //     this.splits_with_chains = [];\n  //     this.genealogy_splits = splits_initial;\n  //     this.genealogy_inheritance = [splits_initial];\n  //   }\n  //   return this.genealogy_inheritance;\n  // };\n}\n","import { StyleSheet } from \"@react-pdf/renderer\";\n\nexport const styles = StyleSheet.create({\n  page: {\n    backgroundColor: \"white\",\n    color: \"black\",\n    fontFamily: \"Times-Roman\",\n    flexDirection: \"column\",\n    paddingLeft: 20,\n    paddingRight: 20,\n    paddingBottom: 30,\n  },\n  section: {\n    margin: 10,\n  },\n  header: {\n    fontSize: 12,\n    marginBottom: 20,\n    textAlign: \"center\",\n    color: \"grey\",\n    fontFamily: \"Times-Roman\",\n  },\n  heading: {\n    fontSize: 24,\n    color: \"#17365D\",\n    marginBottom: 10,\n    textDecoration: \"underline\",\n  },\n  subheading: {\n    fontSize: 14,\n    color: \"#2979ff\",\n    fontFamily: \"Helvetica-Bold\",\n  },\n  paragraphHeading: {\n    fontSize: 12,\n    color: \"#365F91\",\n    fontFamily: \"Helvetica-Bold\",\n  },\n  paragraph: {\n    fontSize: 10,\n    fontFamily: \"Times-Roman\",\n    margin: 10,\n  },\n  pageNumber: {\n    position: \"absolute\",\n    fontSize: 12,\n    bottom: 30,\n    left: 0,\n    right: 0,\n    textAlign: \"center\",\n    color: \"grey\",\n  },\n  boldValue: {\n    fontFamily: \"Times-Bold\",\n    fontWeight: 600,\n  },\n  italicValue: {\n    fontFamily: \"Times-Italic\",\n    fontStyle: \"italic\",\n  },\n  urlStyle: {\n    fontFamily: \"Times-Roman\",\n    color: \"#1a0dab\",\n  },\n  tableHeaderRow: {\n    backgroundColor: \"grey\",\n    borderWidth: 0,\n    fontSize: 12,\n    textAlign: \"center\",\n  },\n  tableDataRow: {\n    backgroundColor: \"white\",\n    borderWidth: 0,\n    fontSize: 10,\n    textAlign: \"center\",\n  },\n  marginTop: {\n    marginTop: 10,\n  },\n  redText: {\n    color: \"#ff0000\",\n  },\n  imageView: {\n    backgroundColor: \"white\",\n  },\n  image: {\n    backgroundColor: \"white\",\n    marginTop: 20,\n  },\n});\n","import { Text } from \"@react-pdf/renderer\";\nimport { styles } from \"../../../styles\";\n\ntype BoldProps = {\n  children: React.ReactNode;\n};\n\nexport const Bold = (props: BoldProps) => (\n  <Text style={styles.boldValue}>{props.children}</Text>\n);\n","import { Text } from \"@react-pdf/renderer\";\nimport { styles } from \"../../../styles\";\n\ntype ItalicProps = {\n  children: React.ReactNode;\n};\n\nexport const Italic = (props: ItalicProps) => (\n  <Text style={styles.italicValue}>{props.children}</Text>\n);\n","import { Text, Link } from \"@react-pdf/renderer\";\nimport { Bold } from \"./PDF/Sections/common/text-styles/Bold\";\nimport { Italic } from \"./PDF/Sections/common/text-styles/Italic\";\nimport \"react-pdf/dist/umd/Page/AnnotationLayer.css\";\n\nexport const currencyFormatNO = (currencyValue: number): string => {\n  return Intl.NumberFormat(\"no-NO\", {\n    style: \"currency\",\n    currency: \"NOK\",\n    useGrouping: true,\n  })\n    .format(currencyValue)\n    .replace(\"kr\", \"NOK\")\n    .replace(\",\", \".\");\n};\n\nexport const add_legal_references = (\n  code_paragraphs: string[],\n  CODE_PARAGRAPHS: any,\n  LAW_LINKS: any\n) => {\n  const legalReferenceTextArray: any[] = [];\n  code_paragraphs.forEach((code_paragraph) => {\n    legalReferenceTextArray.push(\n      add_legal_reference(code_paragraph, CODE_PARAGRAPHS, LAW_LINKS)\n    );\n  });\n  return legalReferenceTextArray;\n};\n\nexport const add_legal_reference = (\n  code_paragraph: string,\n  CODE_PARAGRAPHS: any,\n  LAW_LINKS: any\n) => {\n  const lovdataLink = addLovdataLink(code_paragraph, LAW_LINKS);\n  return (\n    <Text>\n      {\"\\n\\n\"}\n      <Bold>Arveloven  {code_paragraph}:</Bold>{\" \"}\n      <Italic>{CODE_PARAGRAPHS[code_paragraph]}</Italic>\n      {\"\\n\\n\"}\n      <Text>{lovdataLink}</Text>\n    </Text>\n  );\n};\n\nexport const addLovdataLink = (code_paragraph: string, LAW_LINKS: any) => {\n  const code_paragraph_code = code_paragraph.replace(/[^\\d].*/, \"\");\n  const hyperlinkText = add_hyperlink(LAW_LINKS[code_paragraph_code]);\n  return (\n    <Text>\n      For  lese lovteksten i kontekst hos Lovdata, g til {hyperlinkText}.\n    </Text>\n  );\n};\n\nconst add_hyperlink = (url_text: [string, string]) => {\n  return (\n    <Link src={url_text[0]}>\n      <Text>{url_text[1]}</Text>\n    </Link>\n  );\n};\n\nexport const unravel_chain_to_string = (\n  chain: Array<string>\n): string | null => {\n  if (chain.length === 0) {\n    return null;\n  }\n  let s = chain.splice(0, 1)[0];\n  chain.map((link) => {\n    s = `${s} som er stedfortreder for person med person-id ${link}`;\n  });\n  return s ? s : \"\";\n};\n\nexport const unravel_chains_to_string = (\n  chains: Array<Array<string>>\n): string => {\n  const chains_unraveled: Array<string> = [];\n  for (const chain of chains) {\n    const unravelOutput: string | null = unravel_chain_to_string(chain);\n    if (unravelOutput !== null && unravelOutput.length !== 0) {\n      chains_unraveled.push(unravelOutput);\n    }\n  }\n  const n = chains_unraveled.length;\n  let text = \"\";\n  if (n === 0) return \"\";\n  else if (n === 1) {\n    text = ` som stedfortreder for ${chains_unraveled[0]}`;\n    return text;\n  } else {\n    text = \" som stedfortreder for \";\n    chains_unraveled.map((ind, unraveled_chain) => {\n      if (ind && ind.length === 0) {\n        text += `${unraveled_chain}`;\n      } else if (ind && ind.length === n - 1) {\n        text += ` og som stedfortreder for ${unraveled_chain}`;\n      } else {\n        text += `, som stedfortreder for ${unraveled_chain}`;\n      }\n    });\n    return text;\n  }\n};\n","import { Text } from '@react-pdf/renderer';\nimport { InheritanceCalculation } from '../../../../InheritanceCalculation';\nimport {\n    currencyFormatNO,\n    unravel_chains_to_string,\n} from '../../../../pdf_utils';\nimport { PliktdelsarvCalculation } from '../../../../PliktdelsarvCalculation';\nimport { Bold } from '../text-styles/Bold';\n\nexport const getGenealogyInheritanceText = (\n    value: InheritanceCalculation | PliktdelsarvCalculation,\n) => {\n    const finalGenealogyInheritanceText = [];\n    for (const obj of value.genealogy_inheritance) {\n        const id = Math.random().toString(36).substring(7);\n        finalGenealogyInheritanceText.push(\n            <Text key={id}>\n                Person med person-id <Bold>{obj.person}</Bold> arver totalt{' '}\n                <Bold>{currencyFormatNO(obj.frac)} </Bold>\n                {unravel_chains_to_string([obj.chains])}.{'\\n'}\n            </Text>,\n        );\n    }\n    return finalGenealogyInheritanceText;\n};\n","import { Text, View } from '@react-pdf/renderer';\nimport InheritanceConstants from '../../../../../ChatbotComponent/Helper/Methods/InheritanceConstants';\nimport { InheritanceCalculation } from '../../../../InheritanceCalculation';\nimport { styles } from '../../../styles';\nimport { add_legal_reference, currencyFormatNO } from '../../../../pdf_utils';\nimport { Bold } from '../text-styles/Bold';\nimport { getGenealogyInheritanceText } from './CommonMethods';\n\nconst GenealogyUtils = (value: InheritanceCalculation) => {\n    const genealogy_inheritance_sum = value.genealogy_inheritance_sum;\n    const genealogyText = getGenealogyText(genealogy_inheritance_sum, value);\n    return (\n        <View>\n            <Text>{genealogyText}</Text>\n        </View>\n    );\n};\n\n// add_inheritance_calculation_relatives\nconst getGenealogyText = (\n    genealogy_inheritance_sum: number,\n    value: InheritanceCalculation,\n) => {\n    if (genealogy_inheritance_sum === 0) {\n        return (\n            <Text style={styles.paragraph}>\n                Det er ingen slektsarv igjen  fordele.\n            </Text>\n        );\n    } else if (\n        value.class_closest === undefined ||\n        (value.class_closest === 3 &&\n            value.distance_closest &&\n            value.distance_closest > 2)\n    ) {\n        let code_paragraph = '6 frste ledd, andre punktum';\n        const legalReference1 = add_legal_reference(\n            code_paragraph,\n            InheritanceConstants.CODE_PARAGRAPHS,\n            InheritanceConstants.LAW_LINKS,\n        );\n\n        code_paragraph = '76 frste ledd, frste punktum';\n        const legalReference2 = add_legal_reference(\n            code_paragraph,\n            InheritanceConstants.CODE_PARAGRAPHS,\n            InheritanceConstants.LAW_LINKS,\n        );\n        return (\n            <Text>\n                <Text style={styles.paragraph}>\n                    \"Testator har ingen nre slektninger.\"\n                </Text>\n                <Text style={styles.paragraph}>{legalReference1}</Text>\n                <View>\n                    <Text style={styles.subheading}>Frivillig arbeid</Text>\n                    <Bold>\n                        {currencyFormatNO(value.genealogy_inheritance_sum)}\n                    </Bold>\n                    <Text style={styles.paragraph}>\n                        {' '}\n                        vil g til frivillig arbeid til fordel for barn og unge.\n                    </Text>\n                    <Text style={styles.paragraph}>{legalReference2}</Text>\n                </View>\n            </Text>\n        );\n    } else {\n        return (\n            <Text>\n                <Text style={styles.paragraph}>\n                    De gjenvrende{' '}\n                    <Bold>{currencyFormatNO(genealogy_inheritance_sum)}</Bold>{' '}\n                    fordeles p slekten slik at det blir likt p hver gren i den\n                    aktuelle arvegangsklasse. Nrmeste levende slektning er i\n                    arvegangsklasse {value.class_closest}\n                    {getParagraph(\n                        value.class_closest,\n                        InheritanceConstants.CODE_PARAGRAPHS,\n                        InheritanceConstants.LAW_LINKS,\n                    )}\n                </Text>\n                <Text style={styles.paragraph}>\n                    {'\\n\\n'}\n                    {getGenealogyInheritanceText(value)}\n                </Text>\n            </Text>\n        );\n    }\n};\n\nconst getParagraph = (\n    class_closest: number,\n    CODE_PARAGRAPHS: any,\n    LAW_LINKS: any,\n) => {\n    let code_paragraph = '';\n    let helpText = '';\n    if (class_closest === 1) {\n        code_paragraph = '4 frste og annet ledd';\n        helpText = ' (livsarvinger/etterkommere av arvelater).';\n    } else if (class_closest === 2) {\n        code_paragraph = '5 frste, andre og tredje ledd';\n        helpText = ' (arvelaters foreldre og deres etterkommere).';\n    } else if (class_closest === 3) {\n        code_paragraph = '6 frste og annet ledd';\n        helpText = ' (arvelaters besteforeldre og deres etterkommere).';\n    } else {\n        console.log('check for error');\n    }\n    const legalReferenceText = add_legal_reference(\n        code_paragraph,\n        CODE_PARAGRAPHS,\n        LAW_LINKS,\n    );\n    return (\n        <View>\n            <Text>{helpText}</Text>\n            <Text>{legalReferenceText}</Text>\n        </View>\n    );\n};\n\n// const genealogy_inheritance_text = (value: InheritanceCalculation) => {\n//     const finalGenealogyInheritanceText = [];\n//     for (const obj of value.genealogy_inheritance) {\n//         finalGenealogyInheritanceText.push(\n//             <Text>\n//                 Person med person-id <Bold>{obj.person}</Bold> arver totalt{' '}\n//                 <Bold>{currencyFormatNO(obj.frac)} </Bold>\n//                 {unravel_chains_to_string([obj.chains])}.{'\\n'}\n//             </Text>,\n//         );\n//     }\n//     return finalGenealogyInheritanceText;\n// };\n\nexport default GenealogyUtils;\n","import { Text, View } from '@react-pdf/renderer';\nimport InheritanceConstants from '../../../../../ChatbotComponent/Helper/Methods/InheritanceConstants';\nimport { PliktdelsarvCalculation } from '../../../../PliktdelsarvCalculation';\nimport { styles } from '../../../styles';\nimport {\n    add_legal_reference,\n    currencyFormatNO,\n    unravel_chains_to_string,\n} from '../../../../pdf_utils';\nimport { Bold } from '../text-styles/Bold';\nimport { getGenealogyInheritanceText } from './CommonMethods';\n\nconst GenealogyPliktUtils = (value: PliktdelsarvCalculation) => {\n    const genealogy_inheritance_sum = value.genealogy_inheritance_sum;\n    const genealogyText = getGenealogyText(genealogy_inheritance_sum, value);\n\n    return (\n        <Text>\n            <Text>{genealogyText}</Text>\n        </Text>\n    );\n};\n\n// add_inheritance_calculation_relatives\nconst getGenealogyText = (\n    genealogyInheritanceSum: number,\n    value: PliktdelsarvCalculation,\n) => {\n    const genealogy_inheritance_sum = currencyFormatNO(genealogyInheritanceSum);\n    const code_paragraph = '50 frste ledd';\n    const legal_reference_text = add_legal_reference(\n        code_paragraph,\n        InheritanceConstants.CODE_PARAGRAPHS,\n        InheritanceConstants.LAW_LINKS,\n    );\n    const genealogyInheritanceText = getGenealogyInheritanceText(value);\n    if (value.genealogy_inheritance_sum === 0) {\n        return (\n            <Text style={styles.paragraph}>\n                Det er ingen slektsarv igjen  fordele.\n            </Text>\n        );\n    } else {\n        return (\n            <Text style={styles.paragraph}>\n                <Bold>{genealogy_inheritance_sum}</Bold>{' '}\n                <Text style={styles.paragraph}>\n                    fordeles p livsarvingene slik at det blir likt p hver\n                    gren. (livsarvinger/etterkommere av arvelater).\n                </Text>\n                <Text style={styles.paragraph}>{legal_reference_text}</Text>\n                {'\\n\\n'}\n                <Text style={styles.paragraph}>{genealogyInheritanceText}</Text>\n            </Text>\n        );\n    }\n};\n\nconst getParagraph = (\n    class_closest: number,\n    CODE_PARAGRAPHS: any,\n    LAW_LINKS: any,\n) => {\n    let code_paragraph = '';\n    let helpText = '';\n    if (class_closest === 1) {\n        code_paragraph = '4 frste og annet ledd';\n        helpText = ' (livsarvinger/etterkommere av arvelater).';\n    } else if (class_closest === 2) {\n        code_paragraph = '5 frste, andre og tredje ledd';\n        helpText = ' (arvelaters foreldre og deres etterkommere).';\n    } else if (class_closest === 3) {\n        code_paragraph = '6 frste og annet ledd';\n        helpText = ' (arvelaters besteforeldre og deres etterkommere).';\n    } else {\n        console.log('check for error');\n    }\n    const legalReferenceText = add_legal_reference(\n        code_paragraph,\n        CODE_PARAGRAPHS,\n        LAW_LINKS,\n    );\n    return (\n        <Text>\n            <Text>{helpText}</Text>\n            <Text>{legalReferenceText}</Text>\n        </Text>\n    );\n};\n\nexport default GenealogyPliktUtils;\n","import { Text, View } from '@react-pdf/renderer';\nimport { useContext } from 'react';\nimport { UserContext } from '../../../FinalDocument';\nimport { styles } from '../../../styles';\nimport GenealogyUtils from './Genealogy.utils';\nimport GenealogyPliktUtils from './GenealogyPlikt.utils';\n\nexport const Genealogy = (props: { inheritanceMode: boolean }): JSX.Element => {\n    if (props.inheritanceMode) {\n        const value = useContext(UserContext).inheritanceCalculation;\n        const genealogyParagraph = GenealogyUtils(value);\n\n        return (\n            <View style={styles.section} wrap={false}>\n                <Text style={styles.paragraphHeading}>Slektsarv</Text>\n                {genealogyParagraph}\n            </View>\n        );\n    } else {\n        const value = useContext(UserContext).pliktdelsarvCalculation;\n        const genealogyPliktParagraph = GenealogyPliktUtils(value);\n        return (\n            <View style={styles.section} wrap={false}>\n                <Text style={styles.paragraphHeading}>Slektsarv</Text>\n                {genealogyPliktParagraph}\n            </View>\n        );\n    }\n};\n","import { Text } from \"@react-pdf/renderer\";\nimport { getPerson } from \"../../../../../ChatbotComponent/ActionProviderMethods/OtherChatbotMethods\";\nimport { PliktdelsarvCalculation } from \"../../../../PliktdelsarvCalculation\";\nimport { styles } from \"../../../styles\";\nimport { currencyFormatNO } from \"../../../../pdf_utils\";\n\nexport const IntroductionPliktUtils = (value: PliktdelsarvCalculation) => {\n  return getPliktIntroString(value);\n};\n\nconst getPliktIntroString = (value: PliktdelsarvCalculation) => {\n  const person_name = getPerson(\n    value.person._id,\n    value.state.personsMap\n  )._personName;\n  const net_wealth_NOK = currencyFormatNO(value.state.netWealth);\n  const survivor_inheritance_sum = currencyFormatNO(\n    value.survivor_inheritance_sum\n  );\n  const genealogy_inheritance_sum = currencyFormatNO(\n    value.genealogy_inheritance_sum\n  );\n  const available_for_will = currencyFormatNO(\n    value.netWealth -\n      value.survivor_inheritance_sum -\n      value.genealogy_inheritance_sum\n  );\n  return (\n    <Text style={styles.paragraph}>\n      <Text>\n        Denne delen inneholder en beregning av pliktdelsarv etter arvelater med\n        person-id\n      </Text>{\" \"}\n      <Text style={styles.boldValue}>{person_name}</Text>{\" \"}\n      <Text style={styles.paragraph}>som etterlater seg en nettoarv p</Text>{\" \"}\n      <Text style={styles.boldValue}>{net_wealth_NOK}</Text>\n      {\".\\n\\n \"}\n      <Text style={styles.boldValue}>{survivor_inheritance_sum}</Text>{\" \"}\n      <Text style={styles.paragraph}>gr til etterlatte, mens</Text>{\" \"}\n      <Text style={styles.boldValue}>{genealogy_inheritance_sum}</Text>{\" \"}\n      <Text style={styles.paragraph}>gr til livsarvinger. Det betyr at</Text>{\" \"}\n      <Text style={styles.boldValue}>{available_for_will}</Text>{\" \"}\n      <Text style={styles.paragraph}>fritt kan testamenteres bort.</Text>\n    </Text>\n  );\n};\n","import { Text, View } from \"@react-pdf/renderer\";\nimport { styles } from \"../../../styles\";\nimport { useContext } from \"react\";\nimport { UserContext } from \"../../../FinalDocument\";\nimport { IntroductionUtils } from \"./Introduction.utils\";\nimport { Bold } from \"../text-styles/Bold\";\nimport { IntroductionPliktUtils } from \"./IntroductionPlikt.utils\";\n\nexport const IntroductionPage = (props: {\n  inheritanceMode: boolean;\n}): JSX.Element => {\n  if (props.inheritanceMode) {\n    const value = useContext(UserContext).inheritanceCalculation;\n    const calculatedValues = IntroductionUtils(value);\n    return (\n      <View style={[styles.section]} wrap={false}>\n        <Text style={[styles.heading, { textAlign: \"center\" }]}>\n          Beregning av arv\n        </Text>\n        <Text style={styles.paragraph}>\n          Dette dokumentet inneholder en beregning av arv etter arvelater med\n          person-id <Bold>{calculatedValues.testatorName}</Bold>. Boet har en\n          total verdi p <Bold>{calculatedValues.currencyFormatted}</Bold>.\n        </Text>\n      </View>\n    );\n  } else {\n    const value = useContext(UserContext).pliktdelsarvCalculation;\n    const pliktIntroText = IntroductionPliktUtils(value);\n    return <View wrap={false}>{pliktIntroText}</View>;\n  }\n};\n","import { getPerson } from '../../../../../ChatbotComponent/ActionProviderMethods/OtherChatbotMethods';\nimport { undividedOwnershipType } from '../../../../../ChatbotComponent/Helper/Enums/ChatStepTypes';\nimport { InheritanceCalculation } from '../../../../InheritanceCalculation';\nimport { currencyFormatNO } from '../../../../pdf_utils';\n\nconst undivided_estate_results = (value: InheritanceCalculation) => {\n    const finalresult = '';\n    const first_partly_separate = value.state.undividedEstate.temp_first;\n    const testator_name = getPerson(\n        value.state.testator._id,\n        value.state.personsMap,\n    )._personName;\n    const second_partly_separate = value.state.undividedEstate.temp_last;\n    const undivided_spouse_name = getPerson(\n        value.state.undividedSpouseId,\n        value.state.personsMap,\n    )._personName;\n    const testator_wealth = currencyFormatNO(value.state.netWealth);\n    const undivided_estate_separate_wealth = currencyFormatNO(\n        value.state.undividedEstate.undividedEstateSeparateWealth,\n    );\n    if (value.state.undividedEstate.undividedEstateChoice) {\n        finalresult.concat('<Text>Arvelater satt i uskiftet bo. </Text');\n        if (\n            value.state.undividedEstate.ownershipType ===\n            undividedOwnershipType.felleseie[0]\n        ) {\n            finalresult.concat(\n                `<Text>Det uskiftede boet var utelukkende felleseie. Boet verdier fordeles likt p frstavddes og sistavddes arvinger, ${value.state.undividedEstate.undividedEstateSeparateWealth} p hver gruppe.</Text>`,\n            );\n        } else if (\n            value.state.undividedEstate.ownershipType ===\n            undividedOwnershipType.delvis[0]\n        ) {\n            finalresult.concat(\n                `<Text>Det uskiftede boet var delvis sreie. Frstavddes (${undivided_spouse_name}) sreie hadde en verdi p ${first_partly_separate}, mens sistavdedes (${testator_name}) sreie hadde en verdi p ${second_partly_separate}. Verdiene som fordeles blant frstavddes (${undivided_spouse_name}) arvinger er ${testator_wealth}, mens verdiene som fordeles blant sistavddes (${testator_name})  arvinger er ${undivided_estate_separate_wealth}.</Text>`,\n            );\n        } else if (\n            value.state.undividedEstate.ownershipType ===\n            undividedOwnershipType.fullt[0]\n        ) {\n            finalresult.concat(\n                `<Text>Det uskiftede boet var fullt sreie. Verdiene som fordeles blant frstavddes (${undivided_spouse_name})  arvinger er ${testator_wealth}, mens verdiene som fordeles blant sistavddes (${testator_name}) arvinger er ${undivided_estate_separate_wealth}.</Text>`,\n            );\n        } else {\n            console.log('check for problem, untroduction.utils.ts');\n        }\n    }\n    return finalresult;\n};\n\nexport const IntroductionUtils = (value: InheritanceCalculation) => {\n    const currencyFormatted = currencyFormatNO(value.state.netWealth);\n\n    const testatorName = getPerson(1, value.state.personsMap)._personName;\n    return {\n        currencyFormatted: currencyFormatted,\n        testatorName: testatorName,\n    };\n};\n","// import { TableContainer, Table, Paper } from \"@mui/material\";\nimport {\n  DataTableCell,\n  Table,\n  TableBody,\n  TableCell,\n  TableHeader,\n} from \"@david.kucsai/react-pdf-table\";\nimport { styles } from \"../../../styles\";\nimport { summaryValueType } from \"../summary/Summary\";\n\nexport const TableElement = (props: {\n  summaryValue: Array<summaryValueType>;\n}) => {\n  const summaryVal = props.summaryValue;\n  return (\n    <Table data={summaryVal}>\n      <TableHeader>\n        <TableCell style={styles.tableHeaderRow}>Person-id</TableCell>\n        <TableCell style={styles.tableHeaderRow}>Type</TableCell>\n        <TableCell style={styles.tableHeaderRow}>Belp</TableCell>\n      </TableHeader>\n      <TableBody>\n        <DataTableCell\n          style={styles.tableDataRow}\n          getContent={(r) => r.survivorName}\n        />\n        <DataTableCell\n          style={styles.tableDataRow}\n          getContent={(r) => r.survivorType}\n        />\n        <DataTableCell\n          style={styles.tableDataRow}\n          getContent={(r) => r.belopAmount}\n        />\n      </TableBody>\n    </Table>\n  );\n};\n","import { TableElement } from \"../react-pdf-table/Table\";\nimport { currencyFormatNO } from \"../../../../pdf_utils\";\nimport { summaryValueType } from \"./Summary\";\nimport { InheritanceCalculation } from \"../../../../InheritanceCalculation\";\nimport { getPerson } from \"../../../../../ChatbotComponent/ActionProviderMethods/OtherChatbotMethods\";\nimport { styles } from \"../../../styles\";\nimport { Text } from \"@react-pdf/renderer\";\nimport { PliktdelsarvCalculation } from \"../../../../PliktdelsarvCalculation\";\n\nexport const SummaryUtils = (\n  value: InheritanceCalculation | PliktdelsarvCalculation\n): JSX.Element => {\n  const summaryValues = getSummaryValues(value);\n  const table = <TableElement summaryValue={summaryValues} />;\n  const emptyTableCase = (\n    <Text style={styles.paragraph}>Table not available</Text>\n  );\n  return summaryValues.length > 0 ? table : emptyTableCase;\n};\n\nexport const getSummaryValues = (\n  value: InheritanceCalculation | PliktdelsarvCalculation\n): Array<summaryValueType> => {\n  const summaryValue: Array<summaryValueType> = [];\n  if (value.survivor !== null) {\n    const survivor_name = getPerson(\n      value.survivor,\n      value.state.personsMap\n    )._personName;\n    const belopAmount = currencyFormatNO(value.survivor_inheritance_sum);\n    summaryValue[0] = {\n      survivorName: survivor_name,\n      survivorType: value.survivor_type,\n      belopAmount: belopAmount,\n    };\n  }\n  for (const gen_inherit of value.genealogy_inheritance) {\n    if (gen_inherit) {\n      const summaryCell = {\n        survivorName: gen_inherit.person,\n        survivorType: `Slekt i ${value.class_closest}. arvegangsklasse`,\n        belopAmount: currencyFormatNO(gen_inherit.frac),\n      };\n      summaryValue.push(summaryCell);\n    }\n  }\n  if (\n    value.genealogy_inheritance_sum > 0 &&\n    (value.class_closest === undefined ||\n      (value.class_closest === 3 &&\n        value.distance_closest &&\n        value.distance_closest > 2))\n  ) {\n    summaryValue[0] = {\n      survivorName: \"-\",\n      survivorType: \"Frivillig arbeid\",\n      belopAmount: currencyFormatNO(value.genealogy_inheritance_sum),\n    };\n  }\n  return summaryValue;\n};\n","import { Text, View } from \"@react-pdf/renderer\";\nimport { useContext } from \"react\";\nimport { UserContext } from \"../../../FinalDocument\";\nimport { styles } from \"../../../styles\";\nimport { SummaryUtils } from \"./Summary.utils\";\n\nexport type summaryValueType = {\n  survivorName: string;\n  survivorType: string;\n  belopAmount: string;\n};\n\nexport const initialSummaryValue = {\n  survivorName: \"\",\n  survivorType: \"\",\n  belopAmount: \"\",\n};\n\nexport const Summary = (props: { inheritanceMode: boolean }): JSX.Element => {\n  const value = useContext(UserContext).inheritanceCalculation;\n  if (props.inheritanceMode) {\n    const summaryTable = SummaryUtils(value);\n\n    return (\n      <View style={styles.section} wrap={false}>\n        <Text style={styles.paragraphHeading}>Sammendrag</Text>\n        <View style={styles.marginTop}>{summaryTable}</View>\n      </View>\n    );\n  } else {\n    const value = useContext(UserContext).pliktdelsarvCalculation;\n    const summaryPliktTable = SummaryUtils(value);\n    return (\n      <View style={styles.section} wrap={false}>\n        <Text style={styles.paragraphHeading}>Sammendrag</Text>\n        <View style={styles.marginTop}>{summaryPliktTable}</View>\n      </View>\n    );\n  }\n};\n","import { Text } from '@react-pdf/renderer';\nimport { getPerson } from '../../../../../ChatbotComponent/ActionProviderMethods/OtherChatbotMethods';\nimport InheritanceConstants from '../../../../../ChatbotComponent/Helper/Methods/InheritanceConstants';\nimport { InheritanceCalculation } from '../../../../InheritanceCalculation';\nimport { PliktdelsarvCalculation } from '../../../../PliktdelsarvCalculation';\nimport { styles } from '../../../styles';\nimport { add_legal_references, currencyFormatNO } from '../../../../pdf_utils';\nimport { Bold } from '../text-styles/Bold';\n\nconst SurvivingPartnerUtils = (\n    value: InheritanceCalculation | PliktdelsarvCalculation,\n) => {\n    let survivor_name = 'Fix error';\n    if (value.survivor) {\n        survivor_name = getPerson(\n            value.survivor,\n            value.state.personsMap,\n        )._personName;\n    }\n\n    const survivor_inheritance_sum = currencyFormatNO(\n        value.survivor_inheritance_sum,\n    );\n    const genealogy_inheritance_sum = currencyFormatNO(\n        value.genealogy_inheritance_sum,\n    );\n\n    const inheritanceDescriptiveText = getInheritanceDescriptiveText(\n        value.descriptive_text,\n        survivor_name,\n        survivor_inheritance_sum,\n        genealogy_inheritance_sum,\n        value instanceof InheritanceCalculation,\n    );\n    const legalReferenceTextArray = add_legal_references(\n        value.surviving_reference_paragraphs,\n        InheritanceConstants.CODE_PARAGRAPHS,\n        InheritanceConstants.LAW_LINKS,\n    );\n    const pliktSpecificText = (\n        <Text style={styles.paragraph}>\n            OBS! Nye regler for samboer - sjekk ut{'\\n\\n'}\n        </Text>\n    );\n\n    return (\n        <Text>\n            <Text style={styles.paragraphHeading}>\n                Gjenlevende ektefelle eller samboer {'\\n'}\n                {value instanceof InheritanceCalculation\n                    ? ''\n                    : pliktSpecificText}\n            </Text>\n            <Text style={styles.paragraph}>{inheritanceDescriptiveText}</Text>\n            {legalReferenceTextArray.map((legalReferenceText) => (\n                <Text\n                    key={legalReferenceTextArray.indexOf(legalReferenceText)}\n                    style={styles.paragraph}\n                >\n                    {legalReferenceText}\n                </Text>\n            ))}\n        </Text>\n    );\n};\n\nconst getInheritanceDescriptiveText = (\n    descriptive_text: string,\n    survivor_name: string,\n    survivor_inheritance_sum: string,\n    genealogy_inheritance_sum: string,\n    valueType: boolean,\n) => {\n    if (\n        [\n            InheritanceConstants.DESC_NO_SPOUSE_OR_COHABITANT,\n            InheritanceConstants.DESC_COHABITANT_WITHOUT_COMMON_CHILD,\n        ].includes(descriptive_text)\n    ) {\n        return <Text style={styles.paragraph}>{descriptive_text}</Text>;\n    } else if (\n        [\n            InheritanceConstants.DESC_SPOUSE_NO_CLOSE_RELATIVES,\n            InheritanceConstants.DESC_SPOUSE_NO_CLOSE_RELATIVES_2,\n            InheritanceConstants.DESC_COHABITANT_NO_CLOSE_RELATIVES,\n            InheritanceConstants.DESC_COHABITANT_NO_CLOSE_RELATIVES_2,\n        ].includes(descriptive_text)\n    ) {\n        const inheritanceSpecificTextIf = (\n            <Text style={styles.paragraph}>\n                {descriptive_text} Den etterlatte har person-id{' '}\n                <Bold>{survivor_name}</Bold>. Arv til gjenlevende er{' '}\n                {survivor_inheritance_sum}.\n            </Text>\n        );\n\n        const pliktSpecificTextIf = (\n            <Text>\n                {descriptive_text} Den etterlatte har person-id{' '}\n                <Bold>{survivor_name}</Bold>. Minstearv til gjenlevende er{' '}\n                {survivor_inheritance_sum}.\n            </Text>\n        );\n        return valueType ? inheritanceSpecificTextIf : pliktSpecificTextIf;\n    } else {\n        const inheritanceSpecificTextElse = (\n            <Text style={styles.paragraph}>\n                {' '}\n                {descriptive_text} Den etterlatte har person-id{' '}\n                <Bold>{survivor_name}</Bold>. Arv til gjenlevende er{' '}\n                <Bold>{survivor_inheritance_sum}</Bold>, og de resterende{' '}\n                <Bold>{genealogy_inheritance_sum}</Bold> gr til slekten.\n            </Text>\n        );\n        const pliktSpecificTextElse = (\n            <Text style={styles.paragraph}>\n                {' '}\n                {descriptive_text} Den etterlatte har person-id{' '}\n                <Bold>{survivor_name}</Bold>. Minstearv til gjenlevende er{' '}\n                <Bold>{survivor_inheritance_sum}</Bold>.\n            </Text>\n        );\n        return valueType ? inheritanceSpecificTextElse : pliktSpecificTextElse;\n    }\n};\n\nexport default SurvivingPartnerUtils;\n","import { View } from \"@react-pdf/renderer\";\nimport { useContext } from \"react\";\nimport { UserContext } from \"../../../FinalDocument\";\nimport { styles } from \"../../../styles\";\nimport SurvivingPartnerUtils from \"./SurvivingPartner.utils\";\n\nexport const SurvivingPartner = (props: {\n  inheritanceMode: boolean;\n}): JSX.Element => {\n  if (props.inheritanceMode) {\n    const value = useContext(UserContext).inheritanceCalculation;\n\n    const survivingPartnerParagraph = SurvivingPartnerUtils(value);\n\n    return (\n      <View style={styles.section} wrap={false}>\n        {survivingPartnerParagraph}\n      </View>\n    );\n  } else {\n    const value = useContext(UserContext).pliktdelsarvCalculation;\n    const survivingPartnerParagraph = SurvivingPartnerUtils(value);\n    return (\n      <View style={styles.section} wrap={false}>\n        {survivingPartnerParagraph}\n      </View>\n    );\n  }\n};\n","import { Text, View } from \"@react-pdf/renderer\";\nimport { styles } from \"../../styles\";\nimport { Genealogy } from \"../common/genealogy/Genealogy\";\nimport { IntroductionPage } from \"../common/introSection/IntroductionPage\";\nimport { Summary } from \"../common/summary/Summary\";\nimport { SurvivingPartner } from \"../common/survivingPartner/SurvivingPartner\";\n\n/* SurvivingPartner -> Gjenlevende ektefelle eller samboer\n   Genealogy -> Slektsarv\n   Summary -> Sammendrag\n*/\n\nexport const FirstSection = (): JSX.Element => {\n  return (\n    <View style={styles.section}>\n      <IntroductionPage inheritanceMode />\n      <Text style={styles.subheading}>Beregnet arv i fravr av testament</Text>\n      <SurvivingPartner inheritanceMode />\n      <Genealogy inheritanceMode />\n      <Summary inheritanceMode />\n    </View>\n  );\n};\n","import { Text } from \"@react-pdf/renderer\";\nimport { getPerson } from \"../../../../../ChatbotComponent/ActionProviderMethods/OtherChatbotMethods\";\nimport InheritanceConstants from \"../../../../../ChatbotComponent/Helper/Methods/InheritanceConstants\";\nimport { UndividedCalculation } from \"../../../../UndividedCalculation\";\nimport { styles } from \"../../../styles\";\nimport {\n  add_legal_reference,\n  currencyFormatNO,\n  unravel_chains_to_string,\n} from \"../../../../pdf_utils\";\nimport { TableElement } from \"../../common/react-pdf-table/Table\";\nimport { summaryValueType } from \"../../common/summary/Summary\";\nimport { Bold } from \"../../common/text-styles/Bold\";\n\nexport const getUndividedRelativeText = (\n  value: UndividedCalculation\n): JSX.Element => {\n  let returnValue;\n  if (value.genealogy_inheritance_sum === 0) {\n    returnValue = <Text>Det er ingen slektsarv igjen  fordele.</Text>;\n  } else if (\n    value.class_closest === undefined ||\n    (value.class_closest === 3 &&\n      value.distance_closest &&\n      value.distance_closest > 2)\n  ) {\n    const code_paragraph1 = \"6 frste ledd, andre punktum\";\n    const code_paragraph2 = \"76 frste ledd, frste punktum\";\n    const legalReference1 = add_legal_reference(\n      code_paragraph1,\n      InheritanceConstants.CODE_PARAGRAPHS,\n      InheritanceConstants.LAW_LINKS\n    );\n    const legalReference2 = add_legal_reference(\n      code_paragraph2,\n      InheritanceConstants.CODE_PARAGRAPHS,\n      InheritanceConstants.LAW_LINKS\n    );\n\n    returnValue = (\n      <Text>\n        <Text>Testator har ingen nre slektninger.</Text>\n        <Text>{legalReference1}</Text>\n        <Text style={styles.paragraphHeading}>Frivillig arbeid</Text>\n        <Text>\n          <Bold>${currencyFormatNO(value.genealogy_inheritance_sum)}</Bold>{\" \"}\n          <Text>vil g til frivillig arbeid til fordel for barn og unge.</Text>\n          <Text>{legalReference2}</Text>\n        </Text>\n      </Text>\n    );\n  } else {\n    let code_paragraph = \"\";\n    let endSentence = \"\";\n    if (value.class_closest === 1) {\n      code_paragraph = \"4 frste og annet ledd\";\n      endSentence = \" (livsarvinger/etterkommere av arvelater).\";\n    } else if (value.class_closest === 2) {\n      code_paragraph = \"5 frste, andre og tredje ledd\";\n      endSentence = \" (arvelaters foreldre og deres etterkommere).\";\n    } else if (value.class_closest === 3) {\n      code_paragraph = \"6 frste og annet ledd\";\n      endSentence = \" (arvelaters besteforeldre og deres etterkommere).\";\n    } else {\n      throw new Error(\"wrong class_closest value\");\n    }\n    const legalReferenceText = add_legal_reference(\n      code_paragraph,\n      InheritanceConstants.CODE_PARAGRAPHS,\n      InheritanceConstants.LAW_LINKS\n    );\n\n    const unraveledText = value.genealogy_inheritance.map(\n      (genealogy_inheritance_unit) => {\n        <Text>\n          <Text>Person med person-id</Text>\n          <Bold>{genealogy_inheritance_unit.person}</Bold>{\" \"}\n          <Text>arver totalt</Text>{\" \"}\n          <Bold>{genealogy_inheritance_unit.frac}</Bold>\n          <Text>\n            `${unravel_chains_to_string([genealogy_inheritance_unit.chains])}\n            .\\n`\n          </Text>\n        </Text>;\n      }\n    );\n\n    returnValue = (\n      <Text>\n        <Text>De gjenvrende</Text>{\" \"}\n        <Bold>{currencyFormatNO(value.genealogy_inheritance_sum)}</Bold>{\" \"}\n        <Text>\n          fordeles p slekten slik at det blir likt p hver gren i den aktuelle\n          arvegangsklasse.\n        </Text>{\" \"}\n        <Text>\n          `Nrmeste levende slektning er i arvegangsklasse $\n          {value.class_closest} ${endSentence}`\n        </Text>\n        <Text>{legalReferenceText}</Text>\n        <Text>{unraveledText}</Text>\n      </Text>\n    );\n  }\n  return returnValue;\n};\n\nexport const getUndividedSummaryTable = (\n  value: UndividedCalculation\n): JSX.Element => {\n  const summaryValues = getSummaryValues(value);\n  const table = <TableElement summaryValue={summaryValues} />;\n  return table;\n};\n\nconst getSummaryValues = (\n  value: UndividedCalculation\n): Array<summaryValueType> => {\n  const summaryValue: Array<summaryValueType> = [];\n  let survivor_name = \"\";\n  let survivor_type = \"\";\n  let belop_amount = \"\";\n  if (value.survivor) {\n    survivor_name = getPerson(\n      value.survivor,\n      value.state.personsMap\n    )._personName;\n\n    survivor_type = value.survivor_type;\n    belop_amount = currencyFormatNO(value.genealogy_inheritance_sum);\n  }\n  summaryValue.push({\n    survivorName: survivor_name,\n    survivorType: survivor_type,\n    belopAmount: belop_amount,\n  });\n\n  value.genealogy_inheritance.map((gen_inherit) => {\n    summaryValue.push({\n      survivorName: gen_inherit.person,\n      survivorType: `Slekt i ${value.class_closest}. arvegangsklasse`,\n      belopAmount: currencyFormatNO(gen_inherit.frac),\n    });\n  });\n\n  if (\n    value.genealogy_inheritance_sum > 0 &&\n    (value.class_closest === undefined ||\n      (value.class_closest === 3 &&\n        value.distance_closest &&\n        value.distance_closest > 2))\n  ) {\n    summaryValue.push({\n      survivorName: `-`,\n      survivorType: `Frivillig arbeid`,\n      belopAmount: currencyFormatNO(value.genealogy_inheritance_sum),\n    });\n  }\n  return summaryValue;\n};\n","import { Text, View } from \"@react-pdf/renderer\";\nimport { useContext } from \"react\";\nimport { styles } from \"../../../styles\";\nimport { UserContext } from \"../../../FinalDocument\";\nimport {\n  getUndividedRelativeText,\n  getUndividedSummaryTable,\n} from \"./UndividedEstateCalculationUtils\";\nimport { UndividedCalculation } from \"../../../../UndividedCalculation\";\n\nexport const UndividedEstateCalculation = (): JSX.Element => {\n  const value = useContext(UserContext).undividedCalculation;\n  let undividedResult: JSX.Element;\n  if (value.state.undividedEstate.undividedEstateChoice) {\n    const addUndividedEstateRelatives = add_undivided_estate_relatives(value);\n    const addUndividedEstateSummary = add_undivided_estate_summary(value);\n    undividedResult = (\n      <Text>\n        <Text>{addUndividedEstateRelatives}</Text>\n        {\"\\n\"}\n        <Text>{addUndividedEstateSummary}</Text>\n      </Text>\n    );\n  } else {\n    undividedResult = (\n      <Text style={styles.paragraph}>Ingen uskiftesituasjon</Text>\n    );\n  }\n  return (\n    <View style={styles.section} break>\n      <Text style={styles.subheading}>Legg til introduksjon her</Text>\n      <Text style={styles.paragraph}>{undividedResult}</Text>\n    </View>\n  );\n};\n\nconst add_undivided_estate_relatives = (\n  value: UndividedCalculation\n): JSX.Element => {\n  const UndividedRelativeText = getUndividedRelativeText(value);\n  return (\n    <Text style={styles.paragraph}>\n      <Text style={styles.paragraphHeading}>Slektsarv</Text>\n      {\"\\n\"}\n      <Text>{UndividedRelativeText}</Text>\n    </Text>\n  );\n};\n\nconst add_undivided_estate_summary = (\n  value: UndividedCalculation\n): JSX.Element => {\n  const UndividedSummaryTable = getUndividedSummaryTable(value);\n  return (\n    <Text style={styles.paragraph}>\n      <Text style={styles.paragraphHeading}>Sammendrag</Text>\n      {\"\\n\"}\n      <Text>{UndividedSummaryTable}</Text>\n    </Text>\n  );\n};\n","import { Text, View } from \"@react-pdf/renderer\";\nimport { styles } from \"../../styles\";\nimport { UndividedEstateCalculation } from \"./UndividedEstateCalculation/UndividedEstateCalculation\";\nimport { useContext } from \"react\";\nimport { UserContext } from \"../../FinalDocument\";\nexport const SecondSection = () => {\n  const value = useContext(UserContext).inheritanceCalculation;\n\n  const undividedStateElement = (\n    <View style={styles.section} wrap={false}>\n      <Text style={styles.subheading}>Uskiftearv</Text>\n      <UndividedEstateCalculation />\n    </View>\n  );\n  {\n    const secondSectionElement = value.state.undividedEstate\n      .undividedEstateChoice ? (\n      undividedStateElement\n    ) : (\n      <Text></Text>\n    );\n    return secondSectionElement;\n  }\n};\n","import { Text, View } from \"@react-pdf/renderer\";\nimport { styles } from \"../../styles\";\nimport { Genealogy } from \"../common/genealogy/Genealogy\";\nimport { IntroductionPage } from \"../common/introSection/IntroductionPage\";\nimport { Summary } from \"../common/summary/Summary\";\nimport { SurvivingPartner } from \"../common/survivingPartner/SurvivingPartner\";\n\n/* SurvivingPartner -> Gjenlevende ektefelle eller samboer\n   Genealogy -> Slektsarv\n   Summary -> Sammendrag\n*/\n\nexport const ThirdSection = (): JSX.Element => {\n  return (\n    <View style={styles.section}>\n      <Text style={styles.subheading}>Pliktdelsarv</Text>\n      <IntroductionPage inheritanceMode={false} />\n      <SurvivingPartner inheritanceMode={false} />\n      <Genealogy inheritanceMode={false} />\n      <Summary inheritanceMode={false} />\n    </View>\n  );\n};\n","import { Text } from \"@react-pdf/renderer\";\nimport InheritanceConstants from \"../../../../../ChatbotComponent/Helper/Methods/InheritanceConstants\";\nimport { styles } from \"../../../styles\";\nimport { addLovdataLink } from \"../../../../pdf_utils\";\n\nconst generalReservationsUtils = () => {\n  return {\n    uskifteText: getUskifteText(),\n    testamentText: getTestamentText(),\n    avkortingText: getavkortingText(),\n    barnText: getBarnText(),\n  };\n};\n\nconst getUskifteText = () => (\n  <Text style={styles.paragraph}>\n    <Text style={styles.paragraphHeading}>Uskifte</Text>\n    {\"\\n\"}\n    <Text>Beregningene forutsetter at avdde ikke sitter i uskiftet bo.</Text>\n  </Text>\n);\n\nconst getTestamentText = () => (\n  <Text style={styles.paragraph}>\n    <Text style={styles.paragraphHeading}>Testament</Text>\n    {\"\\n\"}\n    <Text>\n      Beregningene forutsetter at avdde ikke etterlater seg testament.\n    </Text>\n  </Text>\n);\n\nconst getavkortingText = () => {\n  const code_paragraph = \"75 frste ledd\";\n  const lovdata_link = addLovdataLink(\n    code_paragraph,\n    InheritanceConstants.LAW_LINKS\n  );\n  return (\n    <Text style={styles.paragraph}>\n      <Text style={styles.paragraphHeading}>Avkorting i arv</Text>\n      {\"\\n\"}\n      <Text>\n        Bestemmelsene om avkorting i arvelovens  75 er ikke tatt hensyn til i\n        bergningene.\n      </Text>\n      {\"\\n\"}\n      <Text style={styles.redText}>\n        Det er srlig viktig  vre OBS p mulig avkorting dersom det har blitt\n        gitt forskudd p arv.{\"\\n\"}\n      </Text>\n      <Text>{lovdata_link}</Text>\n    </Text>\n  );\n};\n\nconst getBarnText = () => {\n  const code_paragraph = \"7\";\n  return (\n    <Text style={styles.paragraph}>\n      <Text style={styles.paragraphHeading}>Barn</Text>\n      {\"\\n\"}\n      <Text>Vr obs p de srskilte bestemmelsene i arveloven  7.</Text>\n      <Text>\n        {addLovdataLink(code_paragraph, InheritanceConstants.LAW_LINKS)}\n      </Text>\n    </Text>\n  );\n};\n\nexport default generalReservationsUtils;\n","import { Text, View } from '@react-pdf/renderer';\nimport { styles } from '../../../styles';\nimport generalReservationsUtils from './GeneralReservationsUtils';\n\nexport const GeneralReservations = (): JSX.Element => {\n    const generalReservationsText = generalReservationsUtils();\n    return (\n        <View style={styles.section} wrap={false}>\n            <Text>\n                {generalReservationsText.uskifteText}\n                {'\\n\\n'}\n            </Text>\n            <Text>\n                {generalReservationsText.testamentText}\n                {'\\n\\n'}\n            </Text>\n            <Text>\n                {generalReservationsText.avkortingText}\n                {'\\n\\n'}\n            </Text>\n            <Text>\n                {generalReservationsText.barnText}\n                {'\\n\\n'}\n            </Text>\n        </View>\n    );\n};\n","import { Text, View } from \"@react-pdf/renderer\";\nimport { useContext } from \"react\";\nimport InheritanceConstants from \"../../../../../ChatbotComponent/Helper/Methods/InheritanceConstants\";\nimport { UserContext } from \"../../../FinalDocument\";\nimport { styles } from \"../../../styles\";\nimport { currencyFormatNO } from \"../../../../pdf_utils\";\nimport { Bold } from \"../../common/text-styles/Bold\";\n\nexport const NationalInsurance = (): JSX.Element => {\n  const NationalInsuranceText = getNationalInsuranceString();\n  return (\n    <View style={styles.section} wrap={false}>\n      <Text style={styles.paragraphHeading}>Folketrygdens grunnbelp</Text>\n      <Text style={styles.paragraph}>{NationalInsuranceText}</Text>\n    </View>\n  );\n};\n\nconst getNationalInsuranceString = () => {\n  // const value = useContext(UserContext).inheritanceCalculation;\n  return (\n    <Text wrap={false}>\n      <Text>\n        Enkelte terskelverdier beregnes utfra det til enhver tid gjeldende\n        grunnbelp i folketrygden. I beregningene er det forutsatt at\n        grunnbelpet i folketrygden er p{\" \"}\n      </Text>\n      <Bold>{currencyFormatNO(InheritanceConstants.G)}</Bold>.\n    </Text>\n  );\n};\n","import { Text, View } from '@react-pdf/renderer';\nimport { styles } from '../../styles';\nimport { GeneralReservations } from './generalReservations/GeneralReservations';\nimport { NationalInsurance } from './nationalInsurance/NationalInsurance';\n\nexport const FourthSection = (): JSX.Element => {\n    return (\n        <View style={styles.section}>\n            <Text style={styles.subheading}>\n                Generelle merknader og forbehold{'\\n\\n'}\n            </Text>\n            <NationalInsurance />\n            <GeneralReservations />\n        </View>\n    );\n};\n","import { Text } from \"@react-pdf/renderer\";\nimport { styles } from \"../../../styles\";\n\nexport const Footer = (): JSX.Element => {\n  return (\n    <Text\n      style={styles.pageNumber}\n      render={({ pageNumber, totalPages }) => `${pageNumber} / ${totalPages}`}\n      fixed\n    />\n  );\n};\n","import { Text } from \"@react-pdf/renderer\";\nimport { styles } from \"../../../styles\";\n\nexport const Header = (): JSX.Element => {\n  return (\n    <Text style={styles.header} fixed>\n      Arvebot\n    </Text>\n  );\n};\n","import { Image, View } from \"@react-pdf/renderer\";\nimport { styles } from \"../../styles\";\nimport domtoimage from \"dom-to-image\";\nimport { useState } from \"react\";\n\nexport const FifthSection = (): JSX.Element => {\n  const [url, setUrl] = useState(\"src/assets/images/arvebot-logo.png\");\n  const node = document.querySelector(\".react-flow\") as Node;\n  domtoimage\n    .toPng(node, {\n      filter: (node: Node): boolean => {\n        // we don't want to add the minimap and the controls to the image\n\n        if (\n          (node as HTMLElement)?.classList?.contains(\"react-flow__minimap\") ||\n          (node as HTMLElement)?.classList?.contains(\"react-flow__controls\")\n        ) {\n          return false;\n        }\n        return true;\n      },\n    })\n    .then(function (dataUrl: any) {\n      setUrl(dataUrl);\n    })\n    .catch(function (error: any) {\n      console.error(\"oops, something went wrong!\", error);\n    });\n  return (\n    <View style={styles.imageView} wrap={false}>\n      <Image style={styles.image} src={url} />\n    </View>\n  );\n};\n","import { Document, Page } from '@react-pdf/renderer';\nimport { FirstSection } from './Sections/firstSection/FirstSection';\nimport { SecondSection } from './Sections/secondSection/SecondSection';\nimport { ThirdSection } from './Sections/thirdSection/ThirdSection';\nimport { FourthSection } from './Sections/fourthSection/FourthSection';\nimport { styles } from './styles';\nimport { Footer } from './Sections/common/fixedSection/Footer';\nimport { Header } from './Sections/common/fixedSection/Header';\nimport { createContext } from 'react';\nimport { InheritanceCalculation } from '../InheritanceCalculation';\nimport 'react-pdf/dist/umd/Page/AnnotationLayer.css';\nimport { PliktdelsarvCalculation } from '../PliktdelsarvCalculation';\nimport { UndividedCalculation } from '../UndividedCalculation';\nimport { FifthSection } from './Sections/fifthSection/fifthSection';\n\ninterface FinalObjectInput {\n    inheritanceCalculation: InheritanceCalculation;\n    pliktdelsarvCalculation: PliktdelsarvCalculation;\n    undividedCalculation: UndividedCalculation;\n}\n\nexport const UserContext = createContext(\n    {} as {\n        inheritanceCalculation: InheritanceCalculation;\n        pliktdelsarvCalculation: PliktdelsarvCalculation;\n        undividedCalculation: UndividedCalculation;\n    },\n);\n// First Section - Introduction, Inheritance\n// Second Section - Uskiftearv\n// Third Section - Pliktdelsarv\n// Fourth Section - Merknader og forbehold\nconst FinalDocument = (props: { inputData: FinalObjectInput }): JSX.Element => {\n    return (\n        <Document>\n            <Page size=\"A4\" style={styles.page} wrap>\n                <UserContext.Provider\n                    value={{\n                        inheritanceCalculation:\n                            props.inputData.inheritanceCalculation,\n                        pliktdelsarvCalculation:\n                            props.inputData.pliktdelsarvCalculation,\n                        undividedCalculation:\n                            props.inputData.undividedCalculation,\n                    }}\n                >\n                    <Header />\n                    <FirstSection />\n                    <SecondSection />\n                    <ThirdSection />\n                    <FourthSection />\n                    <FifthSection />\n                    <Footer />\n                </UserContext.Provider>\n            </Page>\n        </Document>\n    );\n};\nexport default FinalDocument;\n","import { ChatbotInterface } from \"../ChatbotComponent/Generics\";\nimport { NodeEntity } from \"../ChatbotComponent/Helper/Classes/NodeEntity\";\nimport Norsk from \"../../../languages/translationNO.json\";\nimport { createIntl, createIntlCache } from \"react-intl\";\nimport InheritanceConstants from \"../ChatbotComponent/Helper/Methods/InheritanceConstants\";\nimport ActionProvider from \"../ChatbotComponent/ActionProvider\";\nimport { ReportCalculationBase } from \"./ReportCalculationBase\";\nimport { getNode } from \"../ChatbotComponent/ActionProviderMethods/OtherChatbotMethods\";\nconst cache = createIntlCache();\nconst intl = createIntl({ locale: \"nb-NO\", messages: Norsk }, cache);\n\nexport class PliktdelsarvCalculation extends ReportCalculationBase {\n  state: ChatbotInterface;\n  actionProvider: ActionProvider;\n  person: NodeEntity;\n  constructor(\n    person: NodeEntity,\n    actionProvider: ActionProvider,\n    state: ChatbotInterface,\n    will = undefined\n  ) {\n    super(person, actionProvider, state, 3, will);\n    this.state = state;\n    this.actionProvider = actionProvider;\n    this.person = getNode(person._id, this.state.nodeMap);\n    this.will = will;\n  }\n\n  // computeInheritance = () => {\n  //   //\n  // };\n\n  // computeGenealogyInheritance = (person_id: number) => {\n  //   this.survivor_inheritance_sum = Math.min(\n  //     this.state.netWealth,\n  //     this.minimum_surviving_inheritance\n  //   );\n\n  //   this.genealogy_inheritance_sum = Math.min(\n  //     this.state.netWealth - this.survivor_inheritance_sum,\n  //     this.state.netWealth * InheritanceConstants.FRACTION_PLIKTDEL,\n  //     InheritanceConstants.LINE_MAXIMUM_PLIKTDEL *\n  //       this.state.testator._children.length\n  //   );\n  //   if (this.genealogy_inheritance_sum !== 0) {\n  //     this.splits_with_chains = this.reportUtils.split_evenly_between_lines(\n  //       this.state.testator._children\n  //     );\n\n  //     const genealogy_splits = this.reportUtils.combine_duplicates(\n  //       this.splits_with_chains\n  //     );\n\n  //     genealogy_splits.map((genealogy_split: any) => {\n  //       return this.genealogy_inheritance.push({\n  //         person: genealogy_split.person,\n  //         frac: genealogy_split.frac * this.genealogy_inheritance_sum,\n  //         chains: genealogy_split.chains,\n  //       });\n  //     });\n  //   } else {\n  //     this.splits_with_chains = [];\n  //     this.genealogy_splits = splits_initial;\n  //     this.genealogy_inheritance = [splits_initial];\n  //   }\n  //   return this.genealogy_inheritance;\n  // };\n}\n","import { ChatbotInterface } from \"../ChatbotComponent/Generics\";\nimport { NodeEntity } from \"../ChatbotComponent/Helper/Classes/NodeEntity\";\nimport Norsk from \"../../../languages/translationNO.json\";\nimport { createIntl, createIntlCache } from \"react-intl\";\nimport InheritanceConstants from \"../ChatbotComponent/Helper/Methods/InheritanceConstants\";\nimport ActionProvider from \"../ChatbotComponent/ActionProvider\";\nimport { ReportCalculationBase } from \"./ReportCalculationBase\";\nimport {\n  getNode,\n  get_class_and_distance_closest_surviving_relative,\n} from \"../ChatbotComponent/ActionProviderMethods/OtherChatbotMethods\";\nconst cache = createIntlCache();\nconst intl = createIntl({ locale: \"nb-NO\", messages: Norsk }, cache);\nexport class UndividedCalculation extends ReportCalculationBase {\n  survivor: number | null = null;\n\n  constructor(\n    person: NodeEntity,\n    actionProvider: ActionProvider,\n    state: ChatbotInterface\n  ) {\n    super(person, actionProvider, state, 2);\n    this.state = state;\n    this.actionProvider = actionProvider;\n    this.person = getNode(person._id, this.state.nodeMap);\n  }\n\n  // computeGenealogyInheritance = () => {\n  //   this.survivor_inheritance_sum = Math.min(\n  //     this.state.netWealth,\n  //     Math.max(\n  //       this.minimum_surviving_inheritance,\n  //       this.surviving_fraction * this.state.netWealth\n  //     )\n  //   );\n  //   this.genealogy_inheritance_sum =\n  //     this.state.netWealth - this.survivor_inheritance_sum;\n  //   if (this.genealogy_inheritance_sum !== 0) {\n  //     this.splits_with_chains =\n  //       this.reportUtils.compute_default_genealogy_splits_with_chains(\n  //         this.person\n  //       );\n\n  //     const genealogy_splits = this.reportUtils.combine_duplicates(\n  //       this.splits_with_chains\n  //     );\n  //   } else {\n  //     this.splits_with_chains = [];\n  //     this.genealogy_inheritance = [];\n  //   }\n  //   return this.genealogy_inheritance;\n  // };\n}\n","export default class Person {\n  _id: number;\n  _personName = \"\";\n  _undividedEstateSpouse: Person | undefined;\n  _deceased = false;\n  _spouse: Person | undefined;\n  _cohabitant: Person | undefined;\n  _childrenRearing: boolean | undefined;\n  _underAge: boolean | undefined;\n\n  constructor(personid: string, id = 1) {\n    this._personName = personid;\n    this._id = id;\n  }\n\n  get person_id(): string {\n    return this._personName;\n  }\n\n  set person_id(value: string) {\n    this._personName = value;\n  }\n\n  get deceased(): boolean {\n    return this._deceased;\n  }\n\n  set deceased(value: boolean) {\n    this._deceased = value;\n  }\n\n  get undividedEstateSpouse(): Person | undefined {\n    return this._undividedEstateSpouse;\n  }\n\n  set undividedEstateSpouse(value: Person | undefined) {\n    this._undividedEstateSpouse = value;\n  }\n\n  get spouse(): Person | undefined {\n    return this._spouse;\n  }\n\n  set_spouse = (spouse: Person, add_for_both = true): void => {\n    if (!this._spouse) console.log(this._spouse == spouse);\n    else this._spouse = spouse;\n    if (add_for_both) spouse.set_spouse(this, false);\n  };\n\n  hasSurvivingSpouse = (): boolean => {\n    if (this._spouse !== undefined && !this._spouse._deceased) return true;\n    else return false;\n  };\n\n  get cohabitant(): Person | undefined {\n    return this._cohabitant;\n  }\n\n  set_cohabitant = (cohabitant: Person, add_for_both = true): void => {\n    if (!this._cohabitant) console.log(this._cohabitant == cohabitant);\n    else this._cohabitant = cohabitant;\n    if (add_for_both) cohabitant.set_cohabitant(this, false);\n  };\n\n  static getPerson = (id: number, personMap: Map<number, Person>) => {\n    const person: Person | undefined = personMap.get(id);\n    if (person == undefined) {\n      throw new Error(\"Person not found with given id:\" + id);\n    }\n    return person;\n  };\n\n  has_surviving_cohabitant(): boolean {\n    if (this._cohabitant && !this._cohabitant._deceased) return true;\n    else return false;\n  }\n}\n","import { NodeEntity } from '../Helper/Classes/NodeEntity';\nimport { ParentChildSelector } from '../Helper/Enums/ParentChildSelector';\n\nexport const add_parent = (\n    parent: NodeEntity,\n    state: any,\n    add_for_both = true,\n    grandParent = false,\n) => {\n    // const parents_array = this._parents;\n    const parent_id = parent._id;\n    let isParentPresent = false;\n    const person = state.temp_person;\n    for (const p of person._parents) {\n        if (p === parent_id) {\n            isParentPresent = true;\n            break;\n        }\n    }\n\n    // const t = this._parents.find((obj) => obj === parent_id);\n    if (!isParentPresent) {\n        person._parents.push(parent_id);\n    }\n    parent._path = [...person._path];\n\n    parent._path.push([ParentChildSelector.parent, parent_id]);\n    parent._level = person.getLevel(parent._path);\n    if (parent._level === 2) {\n        parent._path[parent._path.length - 1][0] =\n            ParentChildSelector.grandParent;\n    }\n    if (add_for_both) {\n        if (!parent._children.find((obj) => obj === person._id)) {\n            parent._children.push(person._id);\n        }\n    }\n    return state;\n};\n\nexport const add_child = (\n    child: NodeEntity,\n    state: any,\n    currentPartnerNode: NodeEntity | null = null,\n    add_for_both = true,\n    isPartner = false,\n) => {\n    const temp_person = currentPartnerNode || state.temp_person;\n    const children_array = temp_person._children;\n    const child_id = child._id;\n\n    if (!children_array.includes(child_id)) {\n        children_array.push(child_id);\n    }\n\n    if (!isPartner) {\n        child._path = [\n            ...temp_person._path,\n            [ParentChildSelector.child, child_id],\n        ];\n        child._level = temp_person.getLevel(child._path);\n    } else {\n        child._partnerPath = [\n            ...temp_person._path,\n            [ParentChildSelector.child, child_id],\n        ];\n        // child._level = this.getLevel(child._path);\n    }\n\n    if (add_for_both && !child._parents.includes(temp_person._id)) {\n        child._parents.push(temp_person._id);\n    }\n\n    return state;\n};\n\nexport const getChildUnprocessedNode = (curPerson: NodeEntity) => {\n    if (curPerson._processChildNodePos < curPerson._children.length) {\n        return curPerson._children[curPerson._processChildNodePos++];\n    }\n};\n\nexport const getParentId = (state: any) => {\n    const nodeMap: Map<number, NodeEntity> = state.nodeMap;\n    const curPerson: NodeEntity = state.temp_person;\n    if (curPerson._path.length - 2 < 0) {\n        return null;\n    }\n    const currId = curPerson._path[curPerson._path.length - 2][1];\n    const currNode = NodeEntity.getNode(currId, nodeMap);\n    if (\n        !(\n            curPerson._children.includes(\n                curPerson._path[curPerson._path.length - 2][1],\n            ) || currNode._undividedEstateSpouse === curPerson._id\n        )\n    )\n        return curPerson._path[curPerson._path.length - 2][1];\n    return null;\n};\n\nexport const updateProcessChildNodePos = (curPerson: NodeEntity) => {\n    curPerson._processChildNodePos++;\n};\n","import ActionProvider from '../ActionProvider';\nimport { NodeEntity } from '../Helper/Classes/NodeEntity';\nimport Person from '../Helper/Classes/Person';\nimport { ChatStepTypes, QuestionType } from '../Helper/Enums/ChatStepTypes';\nimport QuestionConstants from '../Helper/Methods/QuestionConstants';\nimport {\n    add_child,\n    add_parent,\n    // add_parent,\n    getChildUnprocessedNode,\n    getParentId,\n    updateProcessChildNodePos,\n} from './NodeEntityAlternativeMethods';\nimport {\n    askFinalQuestion,\n    createEmptyNode,\n    createNewPerson,\n    getNode,\n    getParentChildrenIDStrings,\n    getPerson,\n    get_class_and_distance_closest_surviving_relative,\n    handleClosingStep,\n} from './OtherChatbotMethods';\nimport _ from 'lodash';\n\nexport const handleSuccessorCnt = (\n    res: string,\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    const successorCount = parseInt(res);\n    state.temp_person._childCount = successorCount;\n    if (successorCount === 0) {\n        const parentID = getParentId(state); //state.temp_person.getParentId(state.nodeMap);\n        if (parentID) {\n            const parent = getNode(parentID, state.nodeMap);\n            state.temp_person = parent as NodeEntity;\n            const successorProcessArray = state.successorProcessArray;\n            state = handleNoSuccessorCase(\n                state,\n                successorProcessArray,\n                actionProvider,\n            );\n        } else {\n            state = handleClosingStep(state, actionProvider);\n        }\n        return state;\n    }\n    const questionType = state.temp_person._children.length === 0;\n    let itr_id = state.id;\n    for (let i = 0; i < state.temp_person._childCount; i++) {\n        const child = createEmptyNode(state, itr_id++);\n        state = add_child(child, state);\n        // updateProcessChildNodePos(state.temp_person);\n\n        if (state.temp_person._partnerNode !== null) {\n            const currentPartnerNode = getNode(\n                state.temp_person._partnerNode,\n                state.nodeMap,\n            );\n            // currentPartnerNode.add_child(child, true, true);\n            state = add_child(child, state, currentPartnerNode, true, true);\n            updateProcessChildNodePos(currentPartnerNode);\n        }\n    }\n    state.id = itr_id;\n    if (\n        state.successorProcessArray.filter(\n            (t: any) => t[0] === state.temp_person._level,\n        ).length === 0\n    ) {\n        state.successorProcessArray.push([state.temp_person._level, 1]);\n    }\n\n    state.successor_flag = QuestionType.part1;\n    const personName = getPerson(\n        state.temp_person._id,\n        state.personsMap,\n    )._personName;\n    if (questionType) {\n        const newSuccessorQuestion = actionProvider.createChatBotMessage(\n            QuestionConstants.addSuccessorQuestion1(personName),\n        );\n        state = actionProvider.addMessageToBotState(\n            newSuccessorQuestion,\n            state,\n        );\n    } else {\n        const allChildrenID = getParentChildrenIDStrings(\n            state.temp_person._children,\n            state,\n        );\n        const newSuccessorQuestion = actionProvider.createChatBotMessage(\n            QuestionConstants.addSuccessorQuestion2(personName, allChildrenID),\n        );\n        state = actionProvider.addMessageToBotState(\n            newSuccessorQuestion,\n            state,\n        );\n    }\n    return state;\n};\n\nexport const handleSuccessorInput = (\n    res: string,\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    console.log(state);\n    const childID = getChildUnprocessedNode(state.temp_person);\n    if (childID) {\n        const child = getNode(childID, state.nodeMap);\n        const childDetail = getPerson(childID, state.personsMap);\n        childDetail._personName = res;\n        state = {\n            ...state,\n            successor_flag: QuestionType.part2,\n            temp_child: child as NodeEntity,\n        };\n\n        const personId: any = Person.getPerson(\n            child._id,\n            state.personsMap,\n        )?._personName;\n        const aliveQuestion = actionProvider.createChatBotMessage(\n            QuestionConstants.AliveQuestion(personId),\n            QuestionConstants.YesNoWidgetOptions,\n        );\n        state = actionProvider.addMessageToBotState(aliveQuestion, state);\n        // }\n    } else {\n        // error case\n        console.error('Count of children exceeded');\n    }\n    return state;\n};\n\nconst handleNoSuccessorCase = (\n    state: any,\n    successorProcessArray: Array<[number, number]>,\n    actionProvider: ActionProvider,\n) => {\n    const childItrPos =\n        successorProcessArray[successorProcessArray.length - 1][1];\n    if (childItrPos) {\n        if (state.temp_person._childCount > childItrPos) {\n            successorProcessArray[successorProcessArray.length - 1][1] =\n                childItrPos + 1;\n            // ask childid question\n            state = {\n                ...state,\n                successor_flag: QuestionType.part1,\n            };\n            // state.successor_flag = QuestionType.part1;\n            const allChildrenID = getParentChildrenIDStrings(\n                state.temp_person._children,\n                state,\n            );\n            const newSuccessorQuestion = actionProvider.createChatBotMessage(\n                QuestionConstants.addSuccessorQuestion2(\n                    getPerson(state.temp_person._id, state.personsMap)\n                        ._personName,\n                    allChildrenID,\n                ),\n            );\n            state = actionProvider.addMessageToBotState(\n                newSuccessorQuestion,\n                state,\n            );\n        } else if (state.temp_person._childCount === childItrPos) {\n            let currentParentID = state.temp_person._id;\n            let currentParent = NodeEntity.getNode(\n                currentParentID,\n                state.nodeMap,\n            );\n\n            let isCurrentParentID = true;\n            while (\n                successorProcessArray[successorProcessArray.length - 1][1] ===\n                currentParent._childCount\n            ) {\n                successorProcessArray.pop();\n                // current parent update\n                const currentId = currentParent.getParentId(state.nodeMap);\n                if (currentId) {\n                    currentParentID = currentId;\n                    currentParent = NodeEntity.getNode(\n                        currentParentID,\n                        state.nodeMap,\n                    );\n                } else {\n                    isCurrentParentID = false;\n                    break;\n                }\n            }\n\n            if (!isCurrentParentID) {\n                // exit case\n                state = handleClosingStep(state, actionProvider);\n                return state;\n            } else {\n                successorProcessArray[successorProcessArray.length - 1][1] =\n                    successorProcessArray[successorProcessArray.length - 1][1] +\n                    1;\n                // ask childid question\n                state.temp_person = currentParent;\n                const currentParentDetail = getPerson(\n                    currentParentID,\n                    state.personsMap,\n                );\n                state.successor_flag = QuestionType.part1;\n                const allChildrenID = getParentChildrenIDStrings(\n                    currentParent._children,\n                    state,\n                );\n                const newSuccessorQuestion =\n                    actionProvider.createChatBotMessage(\n                        QuestionConstants.addSuccessorQuestion2(\n                            currentParentDetail._personName,\n                            allChildrenID,\n                        ),\n                    );\n                state = actionProvider.addMessageToBotState(\n                    newSuccessorQuestion,\n                    state,\n                );\n            }\n        } else {\n            throw new Error('state.temp_person._childCount < childItrPos case');\n        }\n    } else {\n        throw new Error('childItrPos is null');\n    }\n    return state;\n};\n\nexport const handleChildAliveOption = (\n    res: boolean,\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    const child = state.temp_child as NodeEntity;\n    const childDetail = getPerson(child._id, state.personsMap);\n    const successorProcessArray = state.successorProcessArray;\n    if (res) {\n        //alive\n        childDetail._deceased = false;\n        state = handleNoSuccessorCase(\n            state,\n            successorProcessArray,\n            actionProvider,\n        );\n        state = { ...state };\n    } else {\n        // not alive\n        childDetail._deceased = true;\n        if (state.stepID === ChatStepTypes.grandParentStep) {\n            const generationCount = child.getGenerationCount();\n            if (generationCount === 2) {\n                state = handleNoSuccessorCase(\n                    state,\n                    successorProcessArray,\n                    actionProvider,\n                );\n                return state;\n            }\n        }\n        state = {\n            ...state,\n            successor_flag: QuestionType.part3,\n            temp_person: child as NodeEntity,\n        };\n        const newSuccessorQuestion = actionProvider.createChatBotMessage(\n            QuestionConstants.addSuccessorCount(childDetail._personName),\n        );\n        state = actionProvider.addMessageToBotState(\n            newSuccessorQuestion,\n            state,\n        );\n    }\n    return state;\n};\n\nexport const handleSecondParentExists = (\n    res: boolean,\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    if (res) {\n        const temp_person = state.temp_person;\n        state = {\n            ...state,\n            parent_flag: QuestionType.part1,\n        };\n        const allParentsID = getParentChildrenIDStrings(\n            temp_person._parents,\n            state,\n        );\n        const temp_person_detail = getPerson(temp_person._id, state.personsMap);\n        const newParentQuestion = actionProvider.createChatBotMessage(\n            QuestionConstants.addParentsQuestion2(\n                temp_person_detail._personName,\n                allParentsID,\n            ),\n        );\n        state = actionProvider.addMessageToBotState(newParentQuestion, state);\n    } else {\n        state = handleClosingStep(state, actionProvider, false);\n    }\n    return state;\n};\n\nexport const handleParentsInput = (\n    res: string,\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    const predecessor_id = res;\n    const predecessor = createNewPerson(predecessor_id, state, actionProvider);\n\n    state = {\n        ...state,\n        parent_flag: QuestionType.part2,\n        temp_parent: predecessor,\n    };\n    // state = { ...state };\n    const temp_person = state.temp_person as NodeEntity;\n    // temp_person.add_parent(predecessor, true);\n    state = add_parent(predecessor, state, true);\n    state = { ...state };\n    const aliveQuestion = actionProvider.createChatBotMessage(\n        QuestionConstants.AliveQuestion(\n            Person.getPerson(predecessor._id, state.personsMap)._personName,\n        ),\n        QuestionConstants.YesNoWidgetOptions,\n    );\n    state = actionProvider.addMessageToBotState(aliveQuestion, state);\n\n    return state;\n};\n\nexport const handleParentAliveOption = (\n    res: boolean,\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    const temp_parent = state.temp_parent;\n    const temp_parent_detail = Person.getPerson(\n        temp_parent._id,\n        state.personsMap,\n    );\n    if (!res) {\n        temp_parent_detail._deceased = true;\n        state = {\n            ...state,\n            temp_person: temp_parent as NodeEntity,\n            successor_flag: QuestionType.part3,\n        };\n        temp_parent._processChildNodePos += 1;\n        const allChildrenID = getParentChildrenIDStrings(\n            temp_parent._children,\n            state,\n        );\n        const newSuccessorQuestion = actionProvider.createChatBotMessage(\n            QuestionConstants.addSuccessorOfParentCount(\n                temp_parent_detail._personName,\n                allChildrenID,\n            ),\n        );\n        state = actionProvider.addMessageToBotState(\n            newSuccessorQuestion,\n            state,\n        );\n        // return state;\n    } else {\n        temp_parent_detail._deceased = false;\n        state = handleClosingStep(state, actionProvider);\n    }\n    return state;\n};\n\nexport const handleGrandParentFirst = (\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    const testatorNode = NodeEntity.getNode(state.person._id, state.nodeMap);\n    if (!state.deceasedParentsArray) state.deceasedParentsArray = [];\n\n    for (const parent_id of testatorNode._parents) {\n        if (Person.getPerson(parent_id, state.personsMap)._deceased) {\n            const temp_class =\n                get_class_and_distance_closest_surviving_relative(\n                    NodeEntity.getNode(parent_id, state.nodeMap),\n                    state,\n                )[0];\n            if (temp_class !== 1) {\n                if (!state.deceasedParentsArray.includes(parent_id))\n                    state.deceasedParentsArray.push(parent_id);\n            }\n        }\n    }\n    if (state.deceasedParentsArray.length !== 0) {\n        const temp_person = getNode(\n            state.deceasedParentsArray[0],\n            state.nodeMap,\n        );\n        const temp_person_detail = getPerson(\n            state.deceasedParentsArray[0],\n            state.personsMap,\n        );\n        state = {\n            ...state,\n            stepID: ChatStepTypes.grandParentStep,\n            parent_flag: QuestionType.part1,\n            temp_person: temp_person as NodeEntity,\n            successor_flag: QuestionType.initialQuestion,\n        };\n        const newParentQuestion = actionProvider.createChatBotMessage(\n            QuestionConstants.addParentsQuestion1(\n                temp_person_detail._personName,\n            ),\n        );\n        state = actionProvider.addMessageToBotState(newParentQuestion, state);\n    } else {\n        console.log('check situation if it arrives here');\n        state = askFinalQuestion(state, actionProvider);\n    }\n    return state;\n};\n\nexport const handleAskForNextGrandParent = (\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    if (state.deceasedParentsArray.length !== 0) {\n        const temp_person = getNode(\n            state.deceasedParentsArray[0],\n            state.nodeMap,\n        );\n        const temp_person_detail = getPerson(\n            state.deceasedParentsArray[0],\n            state.personsMap,\n        );\n        state = {\n            ...state,\n            stepID: ChatStepTypes.grandParentStep,\n            parent_flag: QuestionType.part1,\n            temp_person: temp_person as NodeEntity,\n            successor_flag: QuestionType.initialQuestion,\n        };\n        const newParentQuestion = actionProvider.createChatBotMessage(\n            QuestionConstants.addParentsQuestion1(\n                temp_person_detail._personName,\n            ),\n        );\n        state = actionProvider.addMessageToBotState(newParentQuestion, state);\n    } else {\n        state = askFinalQuestion(state, actionProvider);\n    }\n    return state;\n};\n\nexport const handleMarriedParents = (\n    res: boolean,\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    if (res) {\n        actionProvider.set_spouse(\n            state.person._parents[0],\n            state.person._parents[1],\n            true,\n            state,\n        );\n        state = askFinalQuestion(state, actionProvider);\n    } else {\n        state = askFinalQuestion(state, actionProvider);\n    }\n    return state;\n};\n","import ActionProvider from '../ActionProvider';\nimport Person from '../Helper/Classes/Person';\nimport {\n    ChatStepTypes,\n    QuestionType,\n    undividedOwnershipType,\n} from '../Helper/Enums/ChatStepTypes';\nimport { ParentChildSelector } from '../Helper/Enums/ParentChildSelector';\nimport {\n    CurrencyOutput,\n    ParseCurrencyStringForOutput,\n} from '../Helper/Methods/HandleCurrency';\nimport { modifiedChoiceResponse } from '../Helper/Methods/OtherMethods';\nimport QuestionConstants from '../Helper/Methods/QuestionConstants';\nimport {\n    askFinalQuestion,\n    createNewPerson,\n    getNode,\n    getPerson,\n    get_class_and_distance_closest_surviving_relative,\n} from './OtherChatbotMethods';\n\nexport const undividedEstateChoice = (\n    undividedEstateChoiceResponse: boolean,\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    if (undividedEstateChoiceResponse) {\n        state = {\n            ...state,\n            stepID: ChatStepTypes.undividedEstateStep,\n            undividedEstate: {\n                ...state.undividedEstate,\n                undivided_flag: QuestionType.part1,\n                undividedEstateChoice: undividedEstateChoiceResponse,\n            },\n        };\n        const totalEstateNetValueQuestion = actionProvider.createChatBotMessage(\n            QuestionConstants.TotalEstateNetValueQuestion,\n        );\n        state = actionProvider.addMessageToBotState(\n            totalEstateNetValueQuestion,\n            state,\n        );\n    } else {\n        state = {\n            ...state,\n            stepID: ChatStepTypes.netWealthStep,\n            undividedEstate: {\n                ...state.undividedEstate,\n                undivided_flag: 'none',\n                undividedEstateChoice: undividedEstateChoiceResponse,\n            },\n        };\n        const netWealthQuestion = actionProvider.createChatBotMessage(\n            QuestionConstants.NetWealthQuestion,\n        );\n        state = actionProvider.addMessageToBotState(netWealthQuestion, state);\n    }\n    return state;\n};\n\nexport const totalEstateValue = (\n    totalEstateValueResponse: string,\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    const totalEstateValueQuestion = actionProvider.createChatBotMessage(\n        QuestionConstants.TotalEstateNetValueQuestion,\n    );\n    const currencyIntResponse = CurrencyOutput(totalEstateValueResponse);\n    const currencyStringResponse = ParseCurrencyStringForOutput(\n        currencyIntResponse[1],\n    );\n    const currencyJSX = <div>{currencyStringResponse}</div>;\n    if (currencyIntResponse[0] === 5) {\n        const ownershipTypeQuestion = actionProvider.createChatBotMessage(\n            QuestionConstants.OwnershipTypeQuestion,\n            QuestionConstants.OwnershipQuestionWidgetOptions,\n        );\n        state = {\n            ...state,\n            undividedEstate: {\n                ...state.undividedEstate,\n                undivided_flag: QuestionType.part2,\n                totalEstateValue: parseInt(currencyIntResponse[1]),\n            },\n        };\n        state.messages.pop();\n        const currencyCustom = actionProvider.createClientMessage(currencyJSX);\n        state = actionProvider.addMessageToBotState(currencyCustom, state);\n        state = actionProvider.addMessageToBotState(\n            ownershipTypeQuestion,\n            state,\n        );\n    } else {\n        const totalEstateWarning = actionProvider.createChatBotMessage(\n            QuestionConstants.TotalEstateNetValueWarning,\n        );\n\n        state = actionProvider.addMessageToBotState(totalEstateWarning, state);\n        state = actionProvider.addMessageToBotState(\n            totalEstateValueQuestion,\n            state,\n        );\n    }\n    return state;\n};\n\nexport const undividedOwnershipResponse = (\n    ownershipResponse: string,\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    modifiedChoiceResponse(ownershipResponse, actionProvider, state);\n    if (\n        ownershipResponse.toUpperCase() === 'FELLESEIE' ||\n        ownershipResponse === '1'\n    ) {\n        state = {\n            ...state,\n            undividedEstate: {\n                ...state.undividedEstate,\n                undivided_flag: QuestionType.part6,\n                undividedEstateSeparateWealth:\n                    state.undividedEstate.totalEstateValue / 2,\n                ownershipType: undividedOwnershipType.felleseie,\n            },\n\n            netWealth: state.undividedEstate.totalEstateValue / 2,\n        };\n        if (state.undividedEstate.undividedEstateSeparateWealth > 0) {\n            const undividedEstateSpouseQuestion =\n                actionProvider.createChatBotMessage(\n                    QuestionConstants.UndividedEstateSpouseQuestion,\n                );\n            state = actionProvider.addMessageToBotState(\n                undividedEstateSpouseQuestion,\n                state,\n            );\n        } else {\n            if (\n                state.person !== state.testator &&\n                state.person._undividedEstateSpouse\n            ) {\n                const temp_class_undivided_spouse =\n                    get_class_and_distance_closest_surviving_relative(\n                        getNode(\n                            state.person._undividedEstateSpouse,\n                            state.nodeMap,\n                        ),\n                        state,\n                    )[0];\n                if (temp_class_undivided_spouse === undefined) {\n                    state.netWealth =\n                        state.netWealth +\n                        state.undividedEstate.undividedEstateSeparateWealth;\n                    state.undividedEstate.undividedEstateSeparateWealth = 0;\n                }\n\n                if (state.netWealth <= 0) {\n                    state = askFinalQuestion(state, actionProvider);\n                } else {\n                    state = {\n                        ...state,\n                        stepID: ChatStepTypes.underAgeStep,\n                    };\n\n                    const underAgeQuestion =\n                        actionProvider.createChatBotMessage(\n                            QuestionConstants.UnderAgeQuestion,\n                            QuestionConstants.YesNoWidgetOptions,\n                        );\n                    state = actionProvider.addMessageToBotState(\n                        underAgeQuestion,\n                        state,\n                    );\n                }\n            }\n        }\n    } else if (\n        ownershipResponse.toUpperCase() === 'DELVIS SREIE' ||\n        ownershipResponse === '2'\n    ) {\n        state = {\n            ...state,\n            undividedEstate: {\n                ...state.undividedEstate,\n                undivided_flag: QuestionType.part3,\n            },\n        };\n        const delvisFirstQuestion = actionProvider.createChatBotMessage(\n            QuestionConstants.DelvisFirstQuestion,\n        );\n        state = actionProvider.addMessageToBotState(delvisFirstQuestion, state);\n    } else if (\n        ownershipResponse.toUpperCase() === 'FULLT SREIE' ||\n        ownershipResponse === '3'\n    ) {\n        state = {\n            ...state,\n            undividedEstate: {\n                ...state.undividedEstate,\n                undivided_flag: QuestionType.part5,\n            },\n        };\n        const fulltSaereieQuestion = actionProvider.createChatBotMessage(\n            QuestionConstants.FulltSaereieQuestion,\n        );\n        state = actionProvider.addMessageToBotState(\n            fulltSaereieQuestion,\n            state,\n        );\n    } else {\n        const ownershipTypeWarning = actionProvider.createChatBotMessage(\n            QuestionConstants.OwnershipTypeWarning,\n        );\n        const ownershipTypeQuestion = actionProvider.createChatBotMessage(\n            QuestionConstants.OwnershipTypeQuestion,\n            QuestionConstants.OwnershipQuestionWidgetOptions,\n        );\n        state = actionProvider.addMessageToBotState(\n            ownershipTypeWarning,\n            state,\n        );\n        state = actionProvider.addMessageToBotState(\n            ownershipTypeQuestion,\n            state,\n        );\n    }\n    return state;\n};\n\nexport const delvisFirstResponse = (\n    response: string,\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    const currencyIntResponse = CurrencyOutput(response);\n    const currencyStringResponse = ParseCurrencyStringForOutput(\n        currencyIntResponse[1],\n    );\n    const currencyJSX = <div>{currencyStringResponse}</div>;\n    if (currencyIntResponse[0] === 5) {\n        state.messages.pop();\n        const currencyCustom = actionProvider.createClientMessage(currencyJSX);\n        state = actionProvider.addMessageToBotState(currencyCustom, state);\n        state = {\n            ...state,\n            undividedEstate: {\n                ...state.undividedEstate,\n                undivided_flag: QuestionType.part4,\n                temp_first: parseInt(currencyIntResponse[1]),\n            },\n        };\n        const delvisSecondQuestion = actionProvider.createChatBotMessage(\n            QuestionConstants.DelvisSecondQuestion,\n        );\n        state = actionProvider.addMessageToBotState(\n            delvisSecondQuestion,\n            state,\n        );\n    } else {\n        const netWealthWarning = actionProvider.createChatBotMessage(\n            QuestionConstants.NetWealthWarning,\n        );\n        const delvisFirstQuestion = actionProvider.createChatBotMessage(\n            QuestionConstants.DelvisFirstQuestion,\n        );\n        state = actionProvider.addMessageToBotState(netWealthWarning, state);\n        state = actionProvider.addMessageToBotState(delvisFirstQuestion, state);\n    }\n    return state;\n};\n\nexport const delvisSecondResponse = (\n    res: string,\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    const currencyIntResponse = CurrencyOutput(res);\n    const currencyStringResponse = ParseCurrencyStringForOutput(\n        currencyIntResponse[1],\n    );\n    const currencyJSX = <div>{currencyStringResponse}</div>;\n    if (currencyIntResponse[0] === 5) {\n        state.messages.pop();\n        const currencyCustom = actionProvider.createClientMessage(currencyJSX);\n        state = actionProvider.addMessageToBotState(currencyCustom, state);\n        state.undividedEstate.temp_last = parseInt(currencyIntResponse[1]);\n        state = {\n            ...state,\n            undividedEstate: {\n                ...state.undividedEstate,\n                undivided_flag: QuestionType.part6,\n                undividedEstateSeparateWealth:\n                    (state.undividedEstate.totalEstateValue -\n                        state.undividedEstate.temp_last -\n                        state.undividedEstate.temp_first) /\n                        2 +\n                    state.undividedEstate.temp_first,\n            },\n            netWealth:\n                (state.undividedEstate.totalEstateValue -\n                    state.undividedEstate.temp_last -\n                    state.undividedEstate.temp_first) /\n                    2 +\n                state.undividedEstate.temp_last,\n        };\n        const undividedEstateSpouseQuestion =\n            actionProvider.createChatBotMessage(\n                QuestionConstants.UndividedEstateSpouseQuestion,\n            );\n        state = actionProvider.addMessageToBotState(\n            undividedEstateSpouseQuestion,\n            state,\n        );\n    } else {\n        const netWealthWarning = actionProvider.createChatBotMessage(\n            QuestionConstants.NetWealthWarning,\n        );\n        const delvisSecondQuestion = actionProvider.createChatBotMessage(\n            QuestionConstants.DelvisSecondQuestion,\n        );\n        state = actionProvider.addMessageToBotState(netWealthWarning, state);\n        state = actionProvider.addMessageToBotState(\n            delvisSecondQuestion,\n            state,\n        );\n    }\n    return state;\n};\n\nexport const delvisFulltResponse = (\n    res: string,\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    const currencyIntResponse = CurrencyOutput(res);\n    const currencyStringResponse = ParseCurrencyStringForOutput(\n        currencyIntResponse[1],\n    );\n    const currencyJSX = <div>{currencyStringResponse}</div>;\n    if (currencyIntResponse[0] === 5) {\n        state.messages.pop();\n        const currencyCustom = actionProvider.createClientMessage(currencyJSX);\n        state = actionProvider.addMessageToBotState(currencyCustom, state);\n        state = {\n            ...state,\n            undividedEstate: {\n                ...state.undividedEstate,\n                undivided_flag: QuestionType.part6,\n                undividedEstateSeparateWealth:\n                    state.undividedEstate.totalEstateValue - parseInt(res),\n            },\n            netWealth: parseInt(res),\n        };\n        if (state.undividedEstate.undividedEstateSeparateWealth > 0) {\n            const undividedEstateSpouseQuestion =\n                actionProvider.createChatBotMessage(\n                    QuestionConstants.UndividedEstateSpouseQuestion,\n                );\n            state = actionProvider.addMessageToBotState(\n                undividedEstateSpouseQuestion,\n                state,\n            );\n        }\n    } else {\n        const netWealthWarning = actionProvider.createChatBotMessage(\n            QuestionConstants.NetWealthWarning,\n        );\n        const fulltSaereieQuestion = actionProvider.createChatBotMessage(\n            QuestionConstants.FulltSaereieQuestion,\n        );\n        state = actionProvider.addMessageToBotState(netWealthWarning, state);\n        state = actionProvider.addMessageToBotState(\n            fulltSaereieQuestion,\n            state,\n        );\n    }\n    return state;\n};\n\nexport const handleUndvdEstateSpouse = (\n    res: string,\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    const undividedSpouseID = res;\n\n    const newUndividedSpouse = createNewPerson(\n        undividedSpouseID,\n        state,\n        actionProvider,\n    );\n\n    state.person = newUndividedSpouse;\n    state.testator._undividedEstateSpouse = newUndividedSpouse._id;\n    state.testator.setPathforPartner(\n        ParentChildSelector.undividedSpouse,\n        newUndividedSpouse,\n    );\n    const newUndividedSpouseDetail = Person.getPerson(\n        newUndividedSpouse._id,\n        state.personsMap,\n    );\n    newUndividedSpouseDetail._deceased = true;\n    const textBeforeSucsrUndvdSpouse = actionProvider.createChatBotMessage(\n        QuestionConstants.TextBeforeSucsrUndvdSpouse,\n    );\n    state = actionProvider.addMessageToBotState(\n        textBeforeSucsrUndvdSpouse,\n        state,\n    );\n\n    state = {\n        ...state,\n        stepID: ChatStepTypes.undividedEstateStep,\n        successor_flag: QuestionType.part3,\n        temp_person: newUndividedSpouse,\n        undividedSpouseId: newUndividedSpouse._id,\n    };\n\n    newUndividedSpouse._partnerNode = state.testator._id;\n    const newSuccessorTogetherQuestion = actionProvider.createChatBotMessage(\n        QuestionConstants.undividedChildrenTogetherCount(),\n        { withAvatar: true },\n    );\n    state = actionProvider.addMessageToBotState(\n        newSuccessorTogetherQuestion,\n        state,\n    );\n    return state;\n};\nexport const handleUndividedStep = (\n    state: any,\n    actionProvider: ActionProvider,\n    isTwoParent: boolean,\n) => {\n    const testator = state.person;\n    const testatorDetail = Person.getPerson(testator._id, state.personsMap);\n    if (state.undividedEstate.undivided_flag === QuestionType.part6) {\n        state.undividedEstate.undivided_flag = QuestionType.part7;\n        state.person._partnerNode = null;\n        state.successor_flag = QuestionType.part3;\n        const newSuccessorUndvdSpouseQuestion =\n            actionProvider.createChatBotMessage(\n                QuestionConstants.undvdSpouseOtherSuccessorQuestion(),\n            );\n        state = actionProvider.addMessageToBotState(\n            newSuccessorUndvdSpouseQuestion,\n            state,\n        );\n    } else if (state.undividedEstate.undivided_flag === QuestionType.part7) {\n        const temp_class_undivided_spouse =\n            get_class_and_distance_closest_surviving_relative(\n                getNode(state.person._id, state.nodeMap),\n                state,\n            )[0];\n        if (temp_class_undivided_spouse !== 1) {\n            // ask parent of und. spouse question\n            state.undividedEstate.undivided_flag = QuestionType.part8;\n            state.parent_flag = QuestionType.part1;\n            state.temp_person = state.person;\n            const newParentQuestion = actionProvider.createChatBotMessage(\n                QuestionConstants.addParentsQuestion1(\n                    testatorDetail._personName,\n                ),\n            );\n            state = actionProvider.addMessageToBotState(\n                newParentQuestion,\n                state,\n            );\n        } else {\n            state = askTestatorOtherChildrenQuestion(state, actionProvider);\n        }\n    } else {\n        if (isTwoParent && state.temp_person._parents.length < 2) {\n            state.successor_flag = QuestionType.initialQuestion;\n            state.parent_flag = QuestionType.part3;\n            const personName = getPerson(\n                state.temp_person._id,\n                state.personsMap,\n            )._personName;\n            const secondParentChoiceQuestion =\n                actionProvider.createChatBotMessage(\n                    QuestionConstants.askSecondParentChoiceQuestion(\n                        `${personName}`,\n                    ),\n                    QuestionConstants.YesNoWidgetOptions,\n                );\n            state = actionProvider.addMessageToBotState(\n                secondParentChoiceQuestion,\n                state,\n            );\n            return state;\n        }\n        if (state.testator._undividedEstateSpouse) {\n            const temp_class_undivided_spouse =\n                get_class_and_distance_closest_surviving_relative(\n                    getNode(\n                        state.testator._undividedEstateSpouse,\n                        state.nodeMap,\n                    ),\n                    state,\n                )[0];\n            if (temp_class_undivided_spouse === undefined) {\n                state.netWealth =\n                    state.netWealth +\n                    state.undividedEstate.undividedEstateSeparateWealth;\n                state.undividedEstate.undividedEstateSeparateWealth = 0;\n            }\n            if (state.netWealth <= 0) {\n                state = askFinalQuestion(state, actionProvider);\n                return state;\n            } else {\n                state = askTestatorOtherChildrenQuestion(state, actionProvider);\n            }\n        }\n    }\n    return state;\n};\n\nconst askTestatorOtherChildrenQuestion = (\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    state = {\n        ...state,\n        stepID: ChatStepTypes.testatorOtherChildStep,\n    };\n    state.successor_flag = QuestionType.part3;\n    state.person = state.testator;\n    state.temp_person = state.testator;\n    const testatorOtherSuccessorQuestion = actionProvider.createChatBotMessage(\n        QuestionConstants.testatorOtherSuccessorQuestion(),\n    );\n    state = actionProvider.addMessageToBotState(\n        testatorOtherSuccessorQuestion,\n        state,\n    );\n    return state;\n};\n","import { PDFDownloadLink } from '@react-pdf/renderer';\nimport { ReactElement } from 'react';\nimport { InheritanceCalculation } from '../../Reports/InheritanceCalculation';\nimport FinalDocument from '../../Reports/PDF/FinalDocument';\nimport { PliktdelsarvCalculation } from '../../Reports/PliktdelsarvCalculation';\nimport { UndividedCalculation } from '../../Reports/UndividedCalculation';\nimport ActionProvider from '../ActionProvider';\nimport { NodeEntity } from '../Helper/Classes/NodeEntity';\nimport Person from '../Helper/Classes/Person';\nimport { ChatStepTypes, QuestionType } from '../Helper/Enums/ChatStepTypes';\nimport { ParentChildSelector } from '../Helper/Enums/ParentChildSelector';\nimport InheritanceConstants from '../Helper/Methods/InheritanceConstants';\nimport QuestionConstants from '../Helper/Methods/QuestionConstants';\nimport { messageService } from '../services/ChatbotCommunicator';\nimport {\n    handleAskForNextGrandParent,\n    handleGrandParentFirst,\n} from './RelativeMethods';\nimport { handleAskUnderAgeQuestion } from './TestatorInformationMethods';\nimport { handleUndividedStep } from './UndividedEstateMethods';\nimport { createCustomMessage } from 'react-chatbot-kit';\n\nexport const handleFinalQuestion = (\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    const document = computeInheritances(state, actionProvider);\n    const pdfDownloadLink = (\n        <PDFDownloadLink\n            document={document}\n            fileName={\n                getPerson(state.testator._id, state.personsMap)._personName\n            }\n        >\n            {({ blob, url, loading, error }) =>\n                loading\n                    ? 'Loading document...'\n                    : error\n                    ? 'Error! Try again or contact us explaining your problem.'\n                    : 'Download Report!'\n            }\n        </PDFDownloadLink>\n    );\n\n    const message = createCustomMessage('', 'custom', {\n        payload: pdfDownloadLink,\n    });\n    state = actionProvider.addMessageToBotState(message, state);\n    blockInputAtFinalStep(state.stepID);\n    return state;\n};\n\nconst computeInheritances = (\n    state: any,\n    actionProvider: ActionProvider,\n): JSX.Element => {\n    const inheritanceCalculation = new InheritanceCalculation(\n        state.person,\n        actionProvider,\n        state,\n    );\n    inheritanceCalculation.computeMethod(1);\n    inheritanceCalculation.computeGenealogyInheritance(\n        state.testator._id,\n        state,\n    );\n\n    const pliktdelsarvCalculation = new PliktdelsarvCalculation(\n        state.person,\n        actionProvider,\n        state,\n    );\n    pliktdelsarvCalculation.computeMethod(2);\n    pliktdelsarvCalculation.computeGenealogyPliktInheritance(\n        state.testator._id,\n        state,\n    );\n\n    const undividedCalculation = new UndividedCalculation(\n        state.person,\n        actionProvider,\n        state,\n    );\n    undividedCalculation.computeMethod(3);\n    const document = (\n        <FinalDocument\n            inputData={{\n                inheritanceCalculation: inheritanceCalculation,\n                pliktdelsarvCalculation: pliktdelsarvCalculation,\n                undividedCalculation: undividedCalculation,\n            }}\n        />\n    );\n    return document;\n};\n\nexport const handleClosingStep = (\n    state: any,\n    actionProvider: ActionProvider,\n    isSecondParent = true,\n) => {\n    switch (state.stepID) {\n        case ChatStepTypes.successorStep:\n            state = handleClosestSurvivingRelativeChildren(\n                state,\n                actionProvider,\n            );\n            break;\n        case ChatStepTypes.parentsStep:\n            state.temp_person = state.person;\n            state = handleClosestSurvivingRelativeParents(\n                isSecondParent,\n                state,\n                actionProvider,\n            );\n            break;\n        case ChatStepTypes.undividedEstateStep:\n            state.temp_person = state.person;\n            state = handleUndividedStep(state, actionProvider, isSecondParent);\n            break;\n        case ChatStepTypes.grandParentStep:\n            state.temp_person = getNode(\n                state.deceasedParentsArray[0],\n                state.nodeMap,\n            );\n            state = handleClosestSurvivingRelativeGrandParens(\n                isSecondParent,\n                state,\n                actionProvider,\n            );\n            break;\n        case ChatStepTypes.testatorOtherChildStep:\n            state = handleAskUnderAgeQuestion(state, actionProvider);\n            break;\n\n        default:\n            console.log('Error in handleClosingStep()');\n            break;\n    }\n    return state;\n};\n\nexport const handleClosestSurvivingRelativeChildren = (\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    const testator = state.person;\n    const testatorDetail = Person.getPerson(testator._id, state.personsMap);\n    const temp_class_testator =\n        get_class_and_distance_closest_surviving_relative(\n            state.testator,\n            state,\n        )[0];\n\n    if (\n        state.person !== state.testator &&\n        state.testator._undividedEstateSpouse\n    ) {\n        if (!(temp_class_testator && temp_class_testator !== 1)) {\n            state = {\n                ...state,\n                parent_flag: QuestionType.part1,\n                successor_flag: QuestionType.initialQuestion,\n                isUndividedParent: true,\n            };\n            const newParentQuestion = actionProvider.createChatBotMessage(\n                QuestionConstants.addParentsQuestion1(\n                    testatorDetail._personName,\n                ),\n            );\n            state = actionProvider.addMessageToBotState(\n                newParentQuestion,\n                state,\n            );\n            return state;\n        }\n    }\n\n    if (temp_class_testator === 1) {\n        state = {\n            ...state,\n            stepID: ChatStepTypes.rearChildrenStep,\n        };\n\n        state = askFinalQuestion(state, actionProvider);\n        return state;\n    }\n\n    if (\n        testator._spouse !== null &&\n        state.netWealth <=\n            InheritanceConstants.MINIMUM_INHERITANCE_SPOUSE_VS_PARENTS\n    ) {\n        state = askFinalQuestion(state, actionProvider);\n        return state;\n    }\n\n    if (\n        testator._cohabitant !== null &&\n        state.netWealth <=\n            InheritanceConstants.MINIMUM_INHERITANCE_COHABITANT_VS_PARENTS\n    ) {\n        state = askFinalQuestion(state, actionProvider);\n        return state;\n    }\n    state = {\n        ...state,\n        stepID: ChatStepTypes.parentsStep,\n        parent_flag: QuestionType.part1,\n        temp_person: state.testator as NodeEntity,\n        successor_flag: QuestionType.initialQuestion,\n    };\n    const newParentQuestion = actionProvider.createChatBotMessage(\n        QuestionConstants.addParentsQuestion1(testatorDetail._personName),\n    );\n    state = actionProvider.addMessageToBotState(newParentQuestion, state);\n    return state;\n};\n\nexport const handleClosestSurvivingRelativeParents = (\n    isSecondParent: boolean,\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    if (isSecondParent && state.temp_person._parents.length < 2) {\n        // TODO\n        state.successor_flag = QuestionType.initialQuestion;\n        state.parent_flag = QuestionType.part3;\n        const personName = getPerson(\n            state.temp_person._id,\n            state.personsMap,\n        )._personName;\n        const secondParentChoiceQuestion = actionProvider.createChatBotMessage(\n            QuestionConstants.askSecondParentChoiceQuestion(`${personName}`),\n            QuestionConstants.YesNoWidgetOptions,\n        );\n        state = actionProvider.addMessageToBotState(\n            secondParentChoiceQuestion,\n            state,\n        );\n        return state;\n    }\n\n    if (state.person._spouse !== null) {\n        state = askFinalQuestion(state, actionProvider);\n        return state;\n    }\n    const temp_class = get_class_and_distance_closest_surviving_relative(\n        state.person,\n        state,\n    )[0];\n    const eitherParentsDeceased =\n        state.person._parents.filter((p_id: any) => {\n            return Person.getPerson(p_id, state.personsMap)._deceased;\n        }).length !== 0;\n    const personDetail = Person.getPerson(state.person._id, state.personsMap);\n\n    if (\n        state.person._parents.length === 2 &&\n        eitherParentsDeceased &&\n        temp_class === 2\n    ) {\n        const parent1Detail = Person.getPerson(\n            state.person._parents[0],\n            state.personsMap,\n        );\n        const parent2Detail = Person.getPerson(\n            state.person._parents[1],\n            state.personsMap,\n        );\n        if (!personDetail._underAge) {\n            state = askFinalQuestion(state, actionProvider);\n            return state;\n        }\n        if (state.person._parents.length !== 2) {\n            state = askFinalQuestion(state, actionProvider);\n            return state;\n        }\n\n        if (parent1Detail._deceased) {\n            state = {\n                ...state,\n                stepID: ChatStepTypes.marriedParentsStep,\n            };\n            const marriedParentsQn = actionProvider.createChatBotMessage(\n                QuestionConstants.MarriedParents1(\n                    parent1Detail._personName,\n                    parent2Detail._personName,\n                ),\n            );\n            state = actionProvider.addMessageToBotState(\n                marriedParentsQn,\n                state,\n            );\n            return state;\n        } else {\n            state = {\n                ...state,\n                stepID: ChatStepTypes.marriedParentsStep,\n            };\n            const marriedParentsQn = actionProvider.createChatBotMessage(\n                QuestionConstants.MarriedParents2(\n                    parent1Detail._personName,\n                    parent2Detail._personName,\n                ),\n            );\n            state = actionProvider.addMessageToBotState(\n                marriedParentsQn,\n                state,\n            );\n            return state;\n        }\n    } else {\n        state = handleGrandParentFirst(state, actionProvider);\n        return state;\n    }\n};\n\nexport const handleClosestSurvivingRelativeGrandParens = (\n    isSecondParent: boolean,\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    if (isSecondParent && state.temp_person._parents.length < 2) {\n        // TODO\n        state.successor_flag = QuestionType.initialQuestion;\n        state.parent_flag = QuestionType.part3;\n        const grandparentName = getPerson(\n            state.temp_person._id,\n            state.personsMap,\n        );\n        const secondParentChoiceQuestion = actionProvider.createChatBotMessage(\n            QuestionConstants.askSecondParentChoiceQuestion(\n                `${grandparentName._personName}`,\n            ),\n            QuestionConstants.YesNoWidgetOptions,\n        );\n        state = actionProvider.addMessageToBotState(\n            secondParentChoiceQuestion,\n            state,\n        );\n        return state;\n    }\n    state.deceasedParentsArray = state.deceasedParentsArray.filter(\n        (item: any) => item !== state.deceasedParentsArray[0],\n    );\n    state = handleAskForNextGrandParent(state, actionProvider);\n    return state;\n};\n\nconst surviving_successor_distance = (\n    node: NodeEntity,\n    state: any,\n): number | undefined => {\n    const nodeDetail: Person = Person.getPerson(node._id, state.personsMap);\n\n    if (nodeDetail._deceased === false) return 0;\n    else if (node._children.length === 0) return undefined;\n    else {\n        const possible_distances: Array<number> = [];\n        for (const child_id of node._children) {\n            const temp = surviving_successor_distance(\n                NodeEntity.getNode(child_id, state.nodeMap),\n                state,\n            );\n            if (temp != undefined) {\n                possible_distances.push(1 + temp);\n            }\n        }\n        if (possible_distances.length === 0) return undefined;\n        else return Math.min(...possible_distances);\n    }\n};\n\nexport const get_class_and_distance_closest_surviving_relative = (\n    testatorNode: NodeEntity,\n    state: any,\n): [number | undefined, number | undefined] => {\n    const distance = surviving_successor_distance(testatorNode, state);\n    if (distance !== undefined) return [1, distance];\n    else if (testatorNode._parents.length == 0) return [undefined, undefined];\n    else {\n        const alternatives: Array<Array<number | undefined>> = [];\n        for (const parent_id of testatorNode._parents) {\n            alternatives.push(\n                get_class_and_distance_closest_surviving_relative(\n                    NodeEntity.getNode(parent_id, state.nodeMap),\n                    state,\n                ),\n            );\n        }\n\n        alternatives.sort((a, b) => {\n            if (a[0] != undefined && b[0] != undefined) return a[0] - b[0];\n            if (a[0] == undefined && b[0] != undefined) return 1;\n            return -1;\n        });\n        const [closest_alternative_class, closest_alternative_distance] =\n            alternatives[0];\n\n        if (closest_alternative_class == undefined) {\n            return [undefined, undefined];\n        }\n        return [closest_alternative_class + 1, closest_alternative_distance];\n    }\n};\n\nexport const createNewPerson = (\n    personID: string,\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    const newPerson = new Person(\n        personID,\n        actionProvider.generateNextID(state.id),\n    );\n    state.personsMap.set(newPerson._id, newPerson);\n    const newNode = new NodeEntity(newPerson._id, 0);\n    state.nodeMap.set(newNode._id, newNode);\n    return newNode;\n};\nexport const createEmptyNode = (state: any, id: number) => {\n    const newPerson = new Person('', id);\n    state.personsMap.set(newPerson._id, newPerson);\n    const newNode = new NodeEntity(newPerson._id, 0);\n    state.nodeMap.set(newNode._id, newNode);\n    return newNode;\n};\nexport const createTestator = (\n    personID: string,\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    const newPerson = new Person(\n        personID,\n        actionProvider.generateNextID(state.id),\n    );\n    newPerson._deceased = true;\n    state.personsMap.set(newPerson._id, newPerson);\n    const newNode = new NodeEntity(newPerson._id, 0);\n    newNode._path.push([ParentChildSelector.testator, newPerson._id]);\n    state.nodeMap.set(newNode._id, newNode);\n    return newNode;\n};\n\nexport const getPerson = (id: number, personMap: Map<number, Person>) => {\n    const person: Person | undefined = personMap.get(id);\n    if (person == undefined) {\n        throw new Error('Person not found with given id:' + id);\n    }\n    return person;\n};\n\nexport const getNode = (id: number, nodeMap: Map<number, NodeEntity>) => {\n    const node: NodeEntity | undefined = nodeMap.get(id);\n    if (node == undefined) {\n        throw new Error('Node not found with given id:' + id);\n    }\n    return node;\n};\n\n// export const add_child = (\n//     child: NodeEntity,\n//     state: any,\n//     add_for_both = true,\n//     isPartner = false,\n// ): void => {\n//     const partnerNode = state.temp_person._partnerNode;\n//     const children_array = partnerNode._children;\n//     const child_id = child._id;\n//     if (!children_array.find((obj: any) => obj === child_id)) {\n//         partnerNode._children.push(child_id);\n//     }\n//     if (!isPartner) {\n//         child._path = [...partnerNode._path];\n//         child._path.push([ParentChildSelector.child, child_id]);\n//         child._level = partnerNode.getLevel(child._path);\n//     } else {\n//         child._partnerPath = [...partnerNode._path];\n//         child._partnerPath.push([ParentChildSelector.child, child_id]);\n//         // child._level = this.getLevel(child._path);\n//     }\n//     if (add_for_both) {\n//         if (!child._parents.find((obj) => obj === partnerNode._id)) {\n//             child._parents.push(partnerNode._id);\n//         }\n//     }\n// };\n\nexport const askFinalQuestion = (\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    state = {\n        ...state,\n        stepID: ChatStepTypes.finalStep,\n    };\n    state = handleFinalQuestion(state, actionProvider);\n    return state;\n};\n\nexport const getParentChildrenIDStrings = (\n    collection: Array<number>,\n    state: any,\n): ReactElement => {\n    return (\n        <strong>{`{{ ${collection\n            .map(\n                (child_id) =>\n                    Person.getPerson(child_id, state.personsMap)._personName,\n            )\n            .filter((name) => name !== '')\n            .join(', ')} }}`}</strong>\n    );\n};\n\nexport const revertState = (actionProvider: ActionProvider) => {\n    const revertCount = localStorage.getItem('revertCount');\n    let lastState: any;\n    if (revertCount) {\n        lastState = messageService.getPreviousState(parseInt(revertCount));\n    } else {\n        lastState = messageService.getPreviousState(0);\n    }\n\n    if (lastState) {\n        if (revertCount) {\n            localStorage.setItem(\n                'revertCount',\n                (parseInt(revertCount) + 1).toString(),\n            );\n        } else {\n            localStorage.setItem('revertCount', '1');\n        }\n        actionProvider.setState((state: any) => {\n            state = lastState;\n            return actionProvider.returnState(state);\n        });\n    }\n};\n\nexport const clearBooleanOptions = () => {\n    const chatAreaElement = document.getElementsByClassName(\n        'react-chatbot-kit-chat-message-container',\n    )[0] as HTMLDivElement;\n    const buttonElementArray = chatAreaElement.querySelectorAll(\n        'div.option-selector-button-container',\n    );\n    const lastButtonDiv = buttonElementArray[buttonElementArray.length - 1];\n    const secondLastButtonDiv =\n        buttonElementArray[buttonElementArray.length - 2];\n\n    const lastPaddingDiv = document.querySelector(\n        'div[style=\"padding-bottom: 2.5rem;\"]',\n    );\n    if (\n        lastButtonDiv?.nextElementSibling === lastPaddingDiv ||\n        lastButtonDiv?.nextElementSibling?.nextElementSibling\n            ?.nextElementSibling === lastPaddingDiv\n    ) {\n        for (const btn of lastButtonDiv.children) {\n            btn.removeAttribute('disabled');\n            btn.removeAttribute('style');\n            btn.setAttribute('style', 'background-color:#2dabf9');\n        }\n    }\n\n    if (\n        secondLastButtonDiv?.nextElementSibling?.nextElementSibling\n            ?.nextElementSibling?.nextElementSibling === lastPaddingDiv\n    ) {\n        for (const btn of secondLastButtonDiv.children) {\n            btn.removeAttribute('disabled');\n            btn.removeAttribute('style');\n            btn.setAttribute('style', 'background-color:#2dabf9');\n        }\n    }\n};\n\nexport const blockInputAtFinalStep = (step: string) => {\n    if (step === ChatStepTypes.finalStep) {\n        const inputField = document.getElementsByClassName(\n            'react-chatbot-kit-chat-input',\n        )[0] as HTMLInputElement;\n        const sendInputBtn = document.getElementsByClassName(\n            'react-chatbot-kit-chat-btn-send',\n        )[0] as HTMLButtonElement;\n        inputField.setAttribute('disabled', 'true');\n        sendInputBtn.setAttribute('disabled', 'true');\n        // const undoButton = document.getElementById('chatbot-undo-button');\n        // if (undoButton) undoButton.style.display = 'none';\n    }\n};\n\nexport const clearDisabledInput = (prevStep: string) => {\n    if (prevStep !== ChatStepTypes.finalStep) {\n        const inputField = document.getElementsByClassName(\n            'react-chatbot-kit-chat-input',\n        )[0] as HTMLInputElement;\n        const sendInputBtn = document.getElementsByClassName(\n            'react-chatbot-kit-chat-btn-send',\n        )[0] as HTMLButtonElement;\n        inputField.removeAttribute('disabled');\n        sendInputBtn.removeAttribute('disabled');\n    }\n};\n","import ActionProvider from '../ActionProvider';\nimport { NodeEntity } from '../Helper/Classes/NodeEntity';\nimport { ChatStepTypes } from '../Helper/Enums/ChatStepTypes';\nimport {\n    CurrencyOutput,\n    ParseCurrencyStringForOutput,\n} from '../Helper/Methods/HandleCurrency';\nimport QuestionConstants from '../Helper/Methods/QuestionConstants';\nimport {\n    askFinalQuestion,\n    createTestator,\n    getPerson,\n} from './OtherChatbotMethods';\n\nexport const handleTestator = (\n    res: string,\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    /**\n     *  * function for handling personID replies.\n     *  * stepID is updated to 2 and then proceed to wealth question.\n     *  * open reply, no conditions for now.\n     */\n\n    const undividedEstateQuestion = actionProvider.createChatBotMessage(\n        QuestionConstants.UndividedEstateQuestion,\n        QuestionConstants.YesNoWidgetOptions,\n    );\n    state = {\n        ...state,\n        stepID: ChatStepTypes.testatorStep,\n        testator: createTestator(res, state, actionProvider),\n    };\n    state = actionProvider.addMessageToBotState(undividedEstateQuestion, state);\n    return state;\n};\n\nexport const handleNetWealth = (\n    res: string,\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    const netWealthQuestion = actionProvider.createChatBotMessage(\n        QuestionConstants.NetWealthQuestion,\n        { withAvatar: true },\n    );\n    const currencyIntResponse = CurrencyOutput(res);\n    const currencyStringResponse = ParseCurrencyStringForOutput(\n        currencyIntResponse[1],\n    );\n    const currencyJSX = <div>{currencyStringResponse}</div>;\n    if (currencyIntResponse[0] === 5) {\n        const underAgeQuestion = actionProvider.createChatBotMessage(\n            QuestionConstants.UnderAgeQuestion,\n            QuestionConstants.YesNoWidgetOptions,\n        );\n        state.messages.pop();\n        const currencyCustom = actionProvider.createClientMessage(currencyJSX);\n        state = actionProvider.addMessageToBotState(currencyCustom, state);\n\n        state = {\n            ...state,\n            stepID: ChatStepTypes.underAgeStep,\n            netWealth: parseInt(currencyIntResponse[1]),\n        };\n        if (state.netWealth <= 0) {\n            state = askFinalQuestion(state, actionProvider);\n        }\n        state = actionProvider.addMessageToBotState(underAgeQuestion, state);\n    } else {\n        const netWealthWarning = actionProvider.createChatBotMessage(\n            QuestionConstants.NetWealthWarning,\n        );\n\n        state = actionProvider.addMessageToBotState(netWealthWarning, state);\n        state = actionProvider.addMessageToBotState(netWealthQuestion, state);\n    }\n\n    return state;\n};\n\nexport const handleUnderAge = (\n    res: boolean,\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    state = {\n        ...state,\n        person: state.testator as NodeEntity,\n        temp_person: state.testator as NodeEntity,\n    };\n    // state.person = state.testator;\n    // state.temp_person = state.testator;\n    getPerson(state.person._id, state.personsMap)._underAge = res;\n    if (res) {\n        const cohabitantChoiceQuestion = actionProvider.createChatBotMessage(\n            QuestionConstants.CohabitantChoiceQuestion,\n            QuestionConstants.YesNoWidgetOptions,\n        );\n        state = {\n            ...state,\n            stepID: ChatStepTypes.cohabitantChoice,\n        };\n        state = actionProvider.addMessageToBotState(\n            cohabitantChoiceQuestion,\n            state,\n        );\n\n        return state;\n    }\n\n    const spouseChoiceQuestion = actionProvider.createChatBotMessage(\n        QuestionConstants.SpouseChoiceQuestion,\n        QuestionConstants.YesNoWidgetOptions,\n    );\n    state = {\n        ...state,\n        stepID: ChatStepTypes.spouseChoice,\n    };\n    state = actionProvider.addMessageToBotState(spouseChoiceQuestion, state);\n\n    return state;\n};\n\nexport const handleAskUnderAgeQuestion = (\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    state = {\n        ...state,\n        stepID: ChatStepTypes.underAgeStep,\n    };\n    const underAgeQuestion = actionProvider.createChatBotMessage(\n        QuestionConstants.UnderAgeQuestion,\n        QuestionConstants.YesNoWidgetOptions,\n    );\n    state = actionProvider.addMessageToBotState(underAgeQuestion, state);\n    return state;\n};\n","import ActionProvider from '../ActionProvider';\nimport { ChatbotInterface } from '../Generics';\nimport Person from '../Helper/Classes/Person';\nimport { ChatStepTypes, QuestionType } from '../Helper/Enums/ChatStepTypes';\nimport { ParentChildSelector } from '../Helper/Enums/ParentChildSelector';\nimport InheritanceConstants from '../Helper/Methods/InheritanceConstants';\nimport QuestionConstants from '../Helper/Methods/QuestionConstants';\nimport { askFinalQuestion, createNewPerson } from './OtherChatbotMethods';\n\nexport const handleSpouseOption = (\n    res: boolean,\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    // Spouse present\n    if (res) {\n        state = {\n            ...state,\n            stepID: ChatStepTypes.spouseStep,\n        };\n        const spouseQuestion = actionProvider.createChatBotMessage(\n            QuestionConstants.SpouseQuestion,\n        );\n        state = actionProvider.addMessageToBotState(spouseQuestion, state);\n    }\n    // No spouse\n    else {\n        const testator = Person.getPerson(state.person._id, state.personsMap);\n        // if Adult, then ask for cohabitant\n        if (!testator._underAge && testator.spouse === undefined) {\n            state = {\n                ...state,\n                stepID: ChatStepTypes.cohabitantChoice,\n            };\n            const cohabitantChoiceQuestion =\n                actionProvider.createChatBotMessage(\n                    QuestionConstants.CohabitantChoiceQuestion,\n                    QuestionConstants.YesNoWidgetOptions,\n                );\n            state = actionProvider.addMessageToBotState(\n                cohabitantChoiceQuestion,\n                state,\n            );\n        } else {\n            state = {\n                ...state,\n                stepID: ChatStepTypes.successorStep,\n                successor_flag: QuestionType.part3,\n            };\n            const newSuccessorQuestion = actionProvider.createChatBotMessage(\n                QuestionConstants.addSuccessorCount(testator._personName),\n            );\n            state = actionProvider.addMessageToBotState(\n                newSuccessorQuestion,\n                state,\n            );\n        }\n    }\n    return state;\n};\n\nexport const handleSpouseInput = (\n    res: string,\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    /**\n     *  * function for handling spouseID replies.\n     *  * stepID is updated to 6 and then further conditions are evaluated next.\n     *  * open reply, no conditions for now.\n     */\n    const testator = Person.getPerson(state.person._id, state.personsMap);\n    const newSpouse = createNewPerson(res, state, actionProvider);\n    state.person = Object.assign(state.person, { _spouse: newSpouse._id });\n    // state.person._spouse = newSpouse._id;\n    state.person.setPathforPartner(ParentChildSelector.spouse, newSpouse);\n    if (\n        state.netWealth <=\n        InheritanceConstants.MINIMUM_INHERITANCE_SPOUSE_VS_CHILDREN\n    ) {\n        state = {\n            ...state,\n            stepID: ChatStepTypes.rearChildrenStep,\n        };\n        state = askFinalQuestion(state, actionProvider);\n        return state;\n    }\n\n    state = {\n        ...state,\n        stepID: ChatStepTypes.successorStep,\n        successor_flag: QuestionType.part3,\n    };\n    state.testator = Object.assign(state.testator, {\n        _partnerNode: newSpouse._id,\n    });\n    // state.testator._partnerNode = newSpouse._id;\n    const newSuccessorQuestion = actionProvider.createChatBotMessage(\n        QuestionConstants.addSuccessorCount(testator._personName),\n    );\n    state = actionProvider.addMessageToBotState(newSuccessorQuestion, state);\n    return state;\n};\n\nexport const handleCohabitantChoice = (\n    res: boolean,\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    // if cohabitant choice is yes\n    if (res) {\n        state = {\n            ...state,\n            stepID: ChatStepTypes.cohabitantStep,\n        };\n        const cohabitantQuestion = actionProvider.createChatBotMessage(\n            QuestionConstants.CohabitantQuestion,\n        );\n        state = actionProvider.addMessageToBotState(cohabitantQuestion, state);\n    }\n    // if cohabitant choice is no\n    else {\n        state = {\n            ...state,\n            stepID: ChatStepTypes.successorStep,\n            successor_flag: QuestionType.part3,\n        };\n        const testator = Person.getPerson(state.person._id, state.personsMap);\n        const newSuccessorQuestion = actionProvider.createChatBotMessage(\n            QuestionConstants.addSuccessorCount(testator._personName),\n        );\n        state = actionProvider.addMessageToBotState(\n            newSuccessorQuestion,\n            state,\n        );\n    }\n    return state;\n};\n\nexport const handleCohabitantInput = (\n    res: string,\n    state: any,\n    actionProvider: ActionProvider,\n) => {\n    /**\n     *  * function for handling cohabitant replies.\n     *  * stepID is updated to 7 and then further conditions are evaluated next.\n     *  * open reply, no conditions for now.\n     */\n    const testator = Person.getPerson(state.person._id, state.personsMap);\n    const newCohabitant = createNewPerson(res, state, actionProvider);\n    state.person = Object.assign(state.person, {\n        _cohabitant: newCohabitant._id,\n    });\n    // state.person._cohabitant = newCohabitant._id;\n    state.person.setPathforPartner(\n        ParentChildSelector.cohabitant,\n        newCohabitant,\n    );\n\n    if (\n        state.netWealth <=\n        InheritanceConstants.MINIMUM_INHERITANCE_SPOUSE_VS_CHILDREN\n    ) {\n        state = {\n            ...state,\n            stepID: ChatStepTypes.rearChildrenStep,\n        };\n        state = askFinalQuestion(state, actionProvider);\n        return state;\n    }\n    state = {\n        ...state,\n        stepID: ChatStepTypes.successorStep,\n        successor_flag: QuestionType.part3,\n    };\n    state.testator = Object.assign(state.testator, {\n        _partnerNode: newCohabitant._id,\n    });\n    const newSuccessorQuestion = actionProvider.createChatBotMessage(\n        QuestionConstants.addSuccessorCount(testator._personName),\n    );\n    state = actionProvider.addMessageToBotState(newSuccessorQuestion, state);\n    return state;\n};\n","import ActionProvider from '../../ActionProvider';\nimport { messageService } from '../../services/ChatbotCommunicator';\nimport {\n    BinaryAnswerTypeYes,\n    BinaryAnswerTypeNo,\n} from '../Enums/BinaryAnswerTypes';\nimport { ChatStepTypes, QuestionType } from '../Enums/ChatStepTypes';\nimport { ValidationType } from '../Enums/ValidationType';\nimport { ChatbotValidation } from './ChatbotValidation';\nimport { returnKeyFromEnteredNumberText } from './NumberInput';\nimport {\n    getReturnValueFromBooleanWidget,\n    getReturnValueFromUndividedWidget,\n} from './OtherMethods';\nimport _ from 'lodash';\nimport {\n    handleNetWealth,\n    handleTestator,\n    handleUnderAge,\n} from '../../ActionProviderMethods/TestatorInformationMethods';\nimport {\n    delvisFirstResponse,\n    delvisFulltResponse,\n    delvisSecondResponse,\n    totalEstateValue,\n    undividedEstateChoice,\n    handleUndvdEstateSpouse,\n    undividedOwnershipResponse,\n} from '../../ActionProviderMethods/UndividedEstateMethods';\nimport {\n    handleChildAliveOption,\n    handleMarriedParents,\n    handleParentAliveOption,\n    handleParentsInput,\n    handleSecondParentExists,\n    handleSuccessorCnt,\n    handleSuccessorInput,\n} from '../../ActionProviderMethods/RelativeMethods';\nimport {\n    handleCohabitantChoice,\n    handleCohabitantInput,\n    handleSpouseInput,\n    handleSpouseOption,\n} from '../../ActionProviderMethods/PartnerMethods';\n\nexport const commonMethods = (\n    message: string,\n    curState: any,\n    actionProvider: ActionProvider,\n) => {\n    const chatbotValidator = new ChatbotValidation(actionProvider, curState);\n    // initialStep\n    if (curState.stepID === ChatStepTypes.initalStep) {\n        if (chatbotValidator.validate(message, [ValidationType.emptyValue])) {\n            return handleTestator(message, curState, actionProvider);\n        }\n    }\n\n    //testatorStep\n    else if (curState.stepID === ChatStepTypes.testatorStep) {\n        message = message.toLowerCase();\n        if (\n            chatbotValidator.validate(message, [\n                ValidationType.incorrectValueForBoolean,\n            ])\n        ) {\n            return evaluateBooleanMessage(\n                message,\n                curState,\n                actionProvider,\n                undividedEstateChoice,\n            );\n        }\n    }\n\n    // undividedEstateStep\n    else if (curState.stepID === ChatStepTypes.undividedEstateStep) {\n        if (curState.undividedEstate.undivided_flag === QuestionType.part1) {\n            if (\n                chatbotValidator.validate(message, [\n                    ValidationType.invalidAmount,\n                ])\n            )\n                return totalEstateValue(message, curState, actionProvider);\n        }\n        if (curState.undividedEstate.undivided_flag === QuestionType.part2) {\n            if (\n                chatbotValidator.validate(message, [\n                    ValidationType.incorrectValueForUndividedOptions,\n                ])\n            )\n                return undividedOwnershipResponse(\n                    message,\n                    curState,\n                    actionProvider,\n                );\n        }\n        if (curState.undividedEstate.undivided_flag === QuestionType.part3)\n            if (\n                chatbotValidator.validate(message, [\n                    ValidationType.invalidAmount,\n                ])\n            )\n                return delvisFirstResponse(message, curState, actionProvider);\n        if (curState.undividedEstate.undivided_flag === QuestionType.part4)\n            if (\n                chatbotValidator.validate(message, [\n                    ValidationType.invalidAmount,\n                ])\n            )\n                return delvisSecondResponse(message, curState, actionProvider);\n        if (curState.undividedEstate.undivided_flag === QuestionType.part5)\n            if (\n                chatbotValidator.validate(message, [\n                    ValidationType.invalidAmount,\n                ])\n            )\n                return delvisFulltResponse(message, curState, actionProvider);\n        if (\n            curState.undividedEstate.undivided_flag === QuestionType.part6 ||\n            curState.undividedEstate.undivided_flag === QuestionType.part7\n        )\n            return handleSuccessor(\n                message,\n                curState,\n                actionProvider,\n                chatbotValidator,\n            );\n        if (curState.undividedEstate.undivided_flag === QuestionType.part8) {\n            if (curState.parent_flag === QuestionType.part1)\n                if (\n                    chatbotValidator.validate(message, [\n                        ValidationType.emptyValue,\n                    ])\n                )\n                    return handleParentsInput(\n                        message,\n                        curState,\n                        actionProvider,\n                    );\n                else if (curState.parent_flag == QuestionType.part2) {\n                    message = message.toLowerCase();\n                    if (\n                        chatbotValidator.validate(message, [\n                            ValidationType.incorrectValueForBoolean,\n                        ])\n                    )\n                        return evaluateBooleanMessage(\n                            message,\n                            curState,\n                            actionProvider,\n                            handleParentAliveOption,\n                        );\n                } else if (curState.parent_flag === QuestionType.part3) {\n                    if (\n                        chatbotValidator.validate(message, [\n                            ValidationType.incorrectValueForBoolean,\n                        ])\n                    )\n                        return evaluateBooleanMessage(\n                            message,\n                            curState,\n                            actionProvider,\n                            handleSecondParentExists,\n                        );\n                }\n        }\n    } else if (curState.stepID === ChatStepTypes.testatorOtherChildStep)\n        return handleSuccessor(\n            message,\n            curState,\n            actionProvider,\n            chatbotValidator,\n        );\n    // netWealthStep\n    else if (curState.stepID === ChatStepTypes.netWealthStep) {\n        if (\n            chatbotValidator.validate(message, [\n                ValidationType.emptyValue,\n                ValidationType.invalidAmount,\n            ])\n        )\n            return handleNetWealth(message, curState, actionProvider);\n    }\n\n    // underAgeStep\n    else if (curState.stepID === ChatStepTypes.underAgeStep) {\n        message = message.toLowerCase();\n        if (\n            chatbotValidator.validate(message, [\n                ValidationType.incorrectValueForBoolean,\n            ])\n        )\n            return evaluateBooleanMessage(\n                message,\n                curState,\n                actionProvider,\n                handleUnderAge,\n            );\n    }\n\n    // spouse start\n    else if (curState.stepID === ChatStepTypes.spouseChoice) {\n        message = message.toLowerCase();\n        if (\n            chatbotValidator.validate(message, [\n                ValidationType.incorrectValueForBoolean,\n            ])\n        )\n            return evaluateBooleanMessage(\n                message,\n                curState,\n                actionProvider,\n                handleSpouseOption,\n            );\n    } else if (curState.stepID === ChatStepTypes.spouseStep) {\n        if (chatbotValidator.validate(message, [ValidationType.emptyValue]))\n            return handleSpouseInput(message, curState, actionProvider);\n    }\n    // spouse end\n\n    // cohabitant start\n    else if (curState.stepID === ChatStepTypes.cohabitantChoice) {\n        message = message.toLowerCase();\n        if (\n            chatbotValidator.validate(message, [\n                ValidationType.incorrectValueForBoolean,\n            ])\n        )\n            return evaluateBooleanMessage(\n                message,\n                curState,\n                actionProvider,\n                handleCohabitantChoice,\n            );\n    } else if (curState.stepID === ChatStepTypes.cohabitantStep) {\n        if (chatbotValidator.validate(message, [ValidationType.emptyValue]))\n            return handleCohabitantInput(message, curState, actionProvider);\n    }\n\n    //  cohabitant end\n    // successorStep\n    else if (curState.stepID === ChatStepTypes.successorStep) {\n        if (curState.successor_flag === QuestionType.part1) {\n            if (chatbotValidator.validate(message, [ValidationType.emptyValue]))\n                return handleSuccessorInput(message, curState, actionProvider);\n        } else if (curState.successor_flag === QuestionType.part2) {\n            message = message.toLowerCase();\n            if (\n                chatbotValidator.validate(message, [\n                    ValidationType.incorrectValueForBoolean,\n                ])\n            )\n                return evaluateBooleanMessage(\n                    message,\n                    curState,\n                    actionProvider,\n                    handleChildAliveOption,\n                );\n        } else if (curState.successor_flag === QuestionType.part3) {\n            const convertedMessage = returnKeyFromEnteredNumberText(message);\n            if (\n                chatbotValidator.validate(convertedMessage, [\n                    ValidationType.emptyValue,\n                    ValidationType.onlyDigit,\n                ])\n            )\n                return handleSuccessorCnt(\n                    convertedMessage,\n                    curState,\n                    actionProvider,\n                );\n        }\n    }\n\n    //  parentsStep\n    else if (curState.stepID === ChatStepTypes.parentsStep) {\n        if (curState.successor_flag === QuestionType.part1) {\n            if (chatbotValidator.validate(message, [ValidationType.emptyValue]))\n                return handleSuccessorInput(message, curState, actionProvider);\n        } else if (curState.successor_flag === QuestionType.part2) {\n            message = message.toLowerCase();\n            if (\n                chatbotValidator.validate(message, [\n                    ValidationType.incorrectValueForBoolean,\n                ])\n            )\n                return evaluateBooleanMessage(\n                    message,\n                    curState,\n                    actionProvider,\n                    handleChildAliveOption,\n                );\n        } else if (curState.successor_flag === QuestionType.part3) {\n            if (\n                chatbotValidator.validate(message, [\n                    ValidationType.emptyValue,\n                    ValidationType.onlyDigit,\n                ])\n            )\n                return handleSuccessorCnt(message, curState, actionProvider);\n        }\n        if (curState.parent_flag === QuestionType.part1) {\n            if (chatbotValidator.validate(message, [ValidationType.emptyValue]))\n                return handleParentsInput(message, curState, actionProvider);\n        } else if (curState.parent_flag == QuestionType.part2) {\n            message = message.toLowerCase();\n            if (\n                chatbotValidator.validate(message, [\n                    ValidationType.incorrectValueForBoolean,\n                ])\n            )\n                return evaluateBooleanMessage(\n                    message,\n                    curState,\n                    actionProvider,\n                    handleParentAliveOption,\n                );\n        } else if (curState.parent_flag === QuestionType.part3) {\n            if (\n                chatbotValidator.validate(message, [\n                    ValidationType.incorrectValueForBoolean,\n                ])\n            )\n                return evaluateBooleanMessage(\n                    message,\n                    curState,\n                    actionProvider,\n                    handleSecondParentExists,\n                );\n        }\n    }\n\n    // marriedParentsStep\n    else if (curState.stepID === ChatStepTypes.marriedParentsStep) {\n        message = message.toLowerCase();\n        if (\n            chatbotValidator.validate(message, [\n                ValidationType.incorrectValueForBoolean,\n            ])\n        )\n            return evaluateBooleanMessage(\n                message,\n                curState,\n                actionProvider,\n                handleMarriedParents,\n            );\n    }\n\n    // grandParentStep\n    else if (curState.stepID === ChatStepTypes.grandParentStep) {\n        if (curState.successor_flag === QuestionType.part1) {\n            if (chatbotValidator.validate(message, [ValidationType.emptyValue]))\n                return handleSuccessorInput(message, curState, actionProvider);\n        } else if (curState.successor_flag === QuestionType.part2) {\n            message = message.toLowerCase();\n            if (\n                chatbotValidator.validate(message, [\n                    ValidationType.incorrectValueForBoolean,\n                ])\n            )\n                return evaluateBooleanMessage(\n                    message,\n                    curState,\n                    actionProvider,\n                    handleChildAliveOption,\n                );\n        } else if (curState.successor_flag === QuestionType.part3) {\n            if (\n                chatbotValidator.validate(message, [\n                    ValidationType.emptyValue,\n                    ValidationType.onlyDigit,\n                ])\n            )\n                return handleSuccessorCnt(message, curState, actionProvider);\n        } else if (curState.parent_flag === QuestionType.part1)\n            if (chatbotValidator.validate(message, [ValidationType.emptyValue]))\n                return handleParentsInput(message, curState, actionProvider);\n            else if (curState.parent_flag == QuestionType.part2) {\n                message = message.toLowerCase();\n                if (\n                    chatbotValidator.validate(message, [\n                        ValidationType.incorrectValueForBoolean,\n                    ])\n                )\n                    return evaluateBooleanMessage(\n                        message,\n                        curState,\n                        actionProvider,\n                        handleParentAliveOption,\n                    );\n            } else if (curState.parent_flag === QuestionType.part3) {\n                if (\n                    chatbotValidator.validate(message, [\n                        ValidationType.incorrectValueForBoolean,\n                    ])\n                )\n                    return evaluateBooleanMessage(\n                        message,\n                        curState,\n                        actionProvider,\n                        handleSecondParentExists,\n                    );\n            }\n    }\n\n    messageService.removePreviousState();\n    curState = { ...curState, messages: curState.messages.slice(0, -1) };\n    return curState;\n};\n\nconst disableButtons = () => {\n    const buttonElements: any = document.getElementsByClassName(\n        'option-selector-button',\n    );\n    for (let i = 0; i < buttonElements.length; i++) {\n        const currentElement = buttonElements[i];\n        if (!currentElement.disabled) currentElement.disabled = true;\n        currentElement.style.pointerEvents = 'none';\n    }\n};\n\nconst handleSuccessor = (\n    message: string,\n    curState: any,\n    actionProvider: ActionProvider,\n    chatbotValidator: ChatbotValidation,\n) => {\n    if (curState.successor_flag === QuestionType.part1) {\n        if (chatbotValidator.validate(message, [ValidationType.emptyValue]))\n            return handleSuccessorInput(message, curState, actionProvider);\n    } else if (curState.successor_flag === QuestionType.part2) {\n        message = message.toLowerCase();\n        if (\n            chatbotValidator.validate(message, [\n                ValidationType.incorrectValueForBoolean,\n            ])\n        ) {\n            return evaluateBooleanMessage(\n                message,\n                curState,\n                actionProvider,\n                handleChildAliveOption,\n            );\n        }\n    } else if (curState.successor_flag === QuestionType.part3) {\n        if (\n            chatbotValidator.validate(message, [\n                ValidationType.emptyValue,\n                ValidationType.onlyDigit,\n            ])\n        ) {\n            return handleSuccessorCnt(message, curState, actionProvider);\n        }\n    } else {\n        if (chatbotValidator.validate(message, [ValidationType.emptyValue])) {\n            return handleUndvdEstateSpouse(message, curState, actionProvider);\n        }\n        curState.messages = curState.messages.slice(0, -1);\n        return curState;\n    }\n};\n\nexport const handleWidgetFunctions = (\n    message: string,\n    actionProvider: ActionProvider,\n    state: any,\n    isClicked: boolean,\n    isClickedUndiv: boolean,\n) => {\n    const widgetFunctions = [\n        { widget: isClicked, func: getReturnValueFromBooleanWidget },\n        { widget: isClickedUndiv, func: getReturnValueFromUndividedWidget },\n    ];\n\n    widgetFunctions.forEach(({ widget, func }) => {\n        if (widget) {\n            const returnValue = func(message, state);\n            const clientMessage =\n                actionProvider.createClientMessage(returnValue);\n            state = actionProvider.addMessageToBotState(clientMessage, state);\n        }\n    });\n    return state;\n};\n\nexport const focusWritingArea = () => {\n    const inputBoxElement = document.getElementsByClassName(\n        'react-chatbot-kit-chat-input',\n    )[0] as HTMLInputElement;\n    if (inputBoxElement) {\n        inputBoxElement.focus();\n    }\n};\n\nexport const handleMessage = (\n    actionProvider: ActionProvider,\n    message: string,\n    isClicked = false,\n    isClickedUndiv = false,\n) => {\n    actionProvider.setState((state: any) => {\n        handleWidgetFunctions(\n            message,\n            actionProvider,\n            state,\n            isClicked,\n            isClickedUndiv,\n        );\n        let finalState: any;\n        if (messageService.getRevert()) {\n            finalState = messageService.removePreviousStates(\n                messageService.getRevertCnt(),\n            );\n            messageService.resetRevertCnt();\n            messageService.resetRevert();\n\n            if (\n                finalState.messages[finalState.messages.length - 1] !==\n                state.messages[state.messages.length - 1]\n            )\n                finalState.messages.push(\n                    state.messages[state.messages.length - 1],\n                );\n            state = finalState;\n        }\n        const prevState = _.cloneDeep(state);\n        prevState.messages.pop();\n        messageService.addPreviousState(prevState);\n        message = message.trim();\n        state = commonMethods(message, state, actionProvider);\n        state = { ...state };\n        console.log(state);\n\n        focusWritingArea();\n        return actionProvider.returnState(state);\n    });\n};\n\nconst evaluateBooleanMessage = (\n    message: string,\n    curState: any,\n    actionProvider: any,\n    func: any,\n) => {\n    disableButtons();\n    return message in BinaryAnswerTypeYes\n        ? typeof func === 'function'\n            ? func(true, curState, actionProvider)\n            : alert('func is not a function')\n        : message in BinaryAnswerTypeNo\n        ? typeof func === 'function'\n            ? func(false, curState, actionProvider)\n            : alert('func is not a function')\n        : alert('check for error');\n};\n","import './OptionSelector.scss';\nimport { FormattedMessage } from 'react-intl';\nimport { ReactElement } from 'react';\nimport ActionProvider from '../../../ActionProvider';\nimport { handleMessage } from '../../../Helper/Methods/CommonMethods';\n\nconst OptionSelector = ({ actionProvider, ...rest }: any): ReactElement => {\n    return (\n        <div className=\"option-selector-button-container\">\n            <button\n                className=\"option-selector-button\"\n                onClick={(e) => {\n                    onClickHandler(e);\n                    handleOptions(true, actionProvider);\n                }}\n            >\n                <FormattedMessage id=\"Chatbot.Yes\" />\n            </button>\n            <button\n                className=\"option-selector-button\"\n                onClick={(e) => {\n                    onClickHandler(e);\n                    handleOptions(false, actionProvider);\n                }}\n            >\n                <FormattedMessage id=\"Chatbot.No\" />\n            </button>\n        </div>\n    );\n};\n\nconst onClickHandler = (e: any): void => {\n    const thisButton = e.target as HTMLButtonElement;\n    const nextButton = thisButton.nextElementSibling as HTMLButtonElement;\n    const prevButton = thisButton.previousElementSibling as HTMLButtonElement;\n    const otherButton = nextButton ? nextButton : prevButton;\n    thisButton.style.pointerEvents = 'none';\n    thisButton.style.background = 'darkolivegreen';\n    thisButton.disabled = true;\n    otherButton.style.pointerEvents = 'none';\n    otherButton.disabled = true;\n};\n\nconst handleOptions = (option: boolean, actionProvider: ActionProvider) => {\n    hideWarning();\n    const optionSelected = option ? 'yes' : 'no';\n    handleMessage(actionProvider, optionSelected, true, false);\n};\n\nconst hideWarning = () => {\n    const warningDiv = document.getElementById('chatbot-warning-div');\n    if (warningDiv) {\n        warningDiv.style.display = 'none';\n        return;\n    }\n};\nexport default OptionSelector;\n","import { Box } from '@mui/material';\nimport PropTypes, { InferProps } from 'prop-types';\nimport './InfoMessagesWidget.scss';\nimport { ReactElement } from 'react';\nimport ReactPDF from '@react-pdf/renderer';\n\n// const InfoMessageTypes = {\n//     label: ReactElement,\n// };\n// type InfoMessageTypes = InferProps<typeof InfoMessageTypes>;\n\nconst InfoMessagesWidget = (label: typeof ReactPDF.PDFDownloadLink) => {\n    return (\n        <Box\n            display=\"flex\"\n            justifyContent=\"center\"\n            alignItems=\"center\"\n            component=\"span\"\n            className=\"InfoMessage\"\n            sx={{ backgroundColor: '#FFCBA4' }}\n        >\n            {label}\n        </Box>\n    );\n};\n// color: #FFCBA4\n\nexport default InfoMessagesWidget;\n","import './UndividedEstateWidget.scss';\nimport { FormattedMessage } from 'react-intl';\nimport { ReactElement } from 'react';\nimport ActionProvider from '../../../ActionProvider';\nimport { undividedOwnershipType } from '../../../Helper/Enums/ChatStepTypes';\nimport { handleMessage } from '../../../Helper/Methods/CommonMethods';\n\nconst UndividedEstateWidget = ({\n    actionProvider,\n    ...rest\n}: any): ReactElement => {\n    // const setOption = (option: string) => {\n    //     let state = actionProvider.stateRef;\n    //     state = actionProvider.handleMessage(option, state);\n    //     state = actionProvider.handleOwnershipResponse(option);\n    //     return state;\n    // };\n\n    return (\n        <div className=\"option-selector-button-container\">\n            <button\n                className=\"option-selector-button\"\n                onClick={(e) => {\n                    onClickHandler(e);\n                    handleOptions(\n                        undividedOwnershipType.felleseie[0],\n                        actionProvider,\n                    );\n                }}\n            >\n                <FormattedMessage id=\"Chatbot.OWNERSHIP_TYPE1\" />\n            </button>\n            <button\n                className=\"option-selector-button\"\n                onClick={(e) => {\n                    onClickHandler(e);\n                    handleOptions(\n                        undividedOwnershipType.delvis[0],\n                        actionProvider,\n                    );\n                }}\n            >\n                <FormattedMessage id=\"Chatbot.OWNERSHIP_TYPE2\" />\n            </button>\n            <button\n                className=\"option-selector-button\"\n                onClick={(e) => {\n                    onClickHandler(e);\n                    handleOptions(\n                        undividedOwnershipType.fullt[0],\n                        actionProvider,\n                    );\n                }}\n            >\n                <FormattedMessage id=\"Chatbot.OWNERSHIP_TYPE3\" />\n            </button>\n        </div>\n    );\n};\n\nconst handleOptions = (option: string, actionProvider: ActionProvider) => {\n    hideWarning();\n    handleMessage(actionProvider, option, false, true);\n};\n\nconst onClickHandler = (e: any): void => {\n    // store previous state\n    const thisButton = e.target as HTMLButtonElement;\n    const currentParent = thisButton.parentElement;\n    if (currentParent?.hasChildNodes) {\n        const allCurrentButtons = Object.values(\n            currentParent.childNodes,\n        ) as HTMLButtonElement[];\n        for (const childEl of allCurrentButtons) {\n            childEl.style.pointerEvents = 'none';\n            childEl.disabled = true;\n        }\n        thisButton.style.background = 'darkolivegreen';\n    }\n};\n\nconst hideWarning = () => {\n    const warningDiv = document.getElementById('chatbot-warning-div');\n    if (warningDiv) {\n        warningDiv.style.display = 'none';\n        return;\n    }\n};\n\nexport default UndividedEstateWidget;\n","import { useState } from 'react';\nimport AppBar from '@mui/material/AppBar';\nimport Box from '@mui/material/Box';\nimport Toolbar from '@mui/material/Toolbar';\nimport { RestartAlt } from '@mui/icons-material';\nimport UndoIcon from '@mui/icons-material/Undo';\nimport { Button, Tooltip, Typography } from '@mui/material';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport { focusWritingArea } from '../../ChatbotComponent/Helper/Methods/CommonMethods';\nimport { clearBooleanOptions } from '../../ChatbotComponent/ActionProviderMethods/OtherChatbotMethods';\n\nexport default function ChatHeader(props: any) {\n    const [open, setOpen] = useState(false);\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n    const handleRevert = () => {\n        props.actionProvider.revertLastState();\n    };\n    const handleCloseNo = () => {\n        setOpen(false);\n    };\n\n    const handleCloseYes = () => {\n        restartBot();\n        setOpen(false);\n    };\n\n    const restartBot = () => {\n        props.actionProvider.resetChatbot();\n    };\n\n    return (\n        <Box sx={{ flexGrow: 1 }}>\n            <AppBar position=\"static\" className=\"chatbotHeaderAppBar\">\n                <Toolbar>\n                    <Typography\n                        variant=\"h6\"\n                        component=\"div\"\n                        sx={{ flexGrow: 1 }}\n                    >\n                        Chat\n                    </Typography>\n                    <Box\n                        sx={{\n                            display: 'flex',\n                            justifyContent: 'space-between',\n                        }}\n                    >\n                        <Tooltip title=\"Undo\">\n                            <Button\n                                id=\"chatbot-undo-button\"\n                                onClick={() => {\n                                    handleRevert();\n                                    clearBooleanOptions();\n                                    focusWritingArea();\n                                }}\n                                style={{ backgroundColor: 'rgb(92, 204, 157)' }}\n                            >\n                                <UndoIcon fontSize=\"small\" />\n                            </Button>\n                        </Tooltip>\n                        <Box sx={{ width: '8px' }} />\n                        <Tooltip title=\"Restart\">\n                            <Button\n                                id=\"chatbot-restart-button\"\n                                onClick={handleClickOpen}\n                                style={{ backgroundColor: 'rgb(92, 204, 157)' }}\n                            >\n                                <RestartAlt fontSize=\"small\" />\n                            </Button>\n                        </Tooltip>\n                    </Box>\n                    <Dialog\n                        open={open}\n                        onClose={handleCloseNo}\n                        aria-labelledby=\"alert-dialog-title\"\n                        aria-describedby=\"alert-dialog-description\"\n                    >\n                        <DialogTitle id=\"alert-dialog-title\">\n                            Restart ChatBot?\n                        </DialogTitle>\n                        <DialogContent>\n                            <DialogContentText id=\"alert-dialog-description\">\n                                Do you really want to finish current session and\n                                start over?\n                            </DialogContentText>\n                        </DialogContent>\n                        <DialogActions>\n                            <Button onClick={handleCloseNo}>No</Button>\n                            <Button onClick={handleCloseYes} autoFocus>\n                                Yes\n                            </Button>\n                        </DialogActions>\n                    </Dialog>\n                </Toolbar>\n            </AppBar>\n        </Box>\n    );\n}\n","import { Box, Tooltip } from '@mui/material';\nimport FileDownloadOutlinedIcon from '@mui/icons-material/FileDownloadOutlined';\nimport './CustomFinalMessage.scss';\n\nconst CustomFinalMessage = (props: any) => {\n    return (\n        <Tooltip title=\"Click to Download Report\">\n            <Box className=\"react-chatbot-kit-custom-chat-message-container\">\n                <div className=\"react-chatbot-kit-custom-chat-text-message-container\">\n                    {props.payload}\n                </div>\n                <div className=\"react-chatbot-kit-custom-chat-image-message-container\">\n                    <FileDownloadOutlinedIcon />\n                </div>\n            </Box>\n        </Tooltip>\n    );\n};\nexport default CustomFinalMessage;\n","import { createChatBotMessage } from 'react-chatbot-kit';\nimport OptionSelector from './Custom/Widgets/OptionSelector/OptionSelector';\nimport InfoMessageWidget from './Custom/Widgets/InfoMessagesWidget/InfoMessagesWidget';\nimport UndividedEstateWidget from './Custom/Widgets/UndividedEstateWidget/UndividedEstateWidget';\nimport 'react-chatbot-kit/build/main.css';\nimport '../chatbot.scss';\nimport ChatHeader from '../OtherComponent/ChatHeader/ChatHeader';\nimport { ChatbotState } from './Generics';\nimport Norsk from '../../../languages/translationNO.json';\nimport { createIntl, createIntlCache } from 'react-intl';\nimport CustomFinalMessage from './Custom/Messages/CustomFinalMessage';\nconst cache = createIntlCache();\nconst intl = createIntl({ locale: 'nb-NO', messages: Norsk }, cache);\n\nconst botName = 'Arvebot';\nconst value = intl.formatMessage({ id: 'Chatbot.TESTATOR_QUESTION' });\n\nconst config = {\n    botName: botName,\n    lang: 'no',\n    customStyles: {\n        botMessageBox: {\n            backgroundColor: '#376B7E',\n        },\n        chatButton: {\n            backgroundColor: '#5ccc9d',\n        },\n    },\n    state: ChatbotState,\n    initialMessages: [createChatBotMessage(value, {})],\n    customComponents: {\n        header: (actionProvider) => (\n            <ChatHeader actionProvider={actionProvider} />\n        ),\n    },\n    customMessages: {\n        custom: (props) => <CustomFinalMessage {...props} />,\n    },\n    widgets: [\n        {\n            widgetName: 'optionSelectorWidget',\n            widgetFunc: (props) => <OptionSelector {...props} />,\n        },\n        {\n            widgetName: 'InfoMessage',\n            widgetFunc: (props) => <InfoMessageWidget {...props} />,\n        },\n        {\n            widgetName: 'undividedEstateWidget',\n            widgetFunc: (props) => <UndividedEstateWidget {...props} />,\n        },\n    ],\n};\nexport default config;\n","import ActionProvider from './ActionProvider';\nimport { handleMessage } from './Helper/Methods/CommonMethods';\n\nclass MessageParser {\n    actionProvider: ActionProvider;\n    state: any;\n    constructor(actionProvider: ActionProvider, state: any) {\n        this.actionProvider = actionProvider;\n        this.state = state;\n    }\n\n    parse(message: string): ReturnType<() => void> {\n        // store previous state\n        this.state.yesNoClickedFlag = false;\n        handleMessage(this.actionProvider, message, false, false);\n    }\n}\n\nexport default MessageParser;\n","import { ChatbotInterface, InitialChatbotState } from './Generics';\nimport { ReactElement } from 'react';\nimport { NodeEntity } from './Helper/Classes/NodeEntity';\nimport chartSelector from '../../../store/chartSelector';\nimport { messageService } from './services/ChatbotCommunicator';\nimport QuestionConstants from './Helper/Methods/QuestionConstants';\nimport _ from 'lodash';\nimport {\n    clearBooleanOptions,\n    clearDisabledInput,\n    revertState,\n} from './ActionProviderMethods/OtherChatbotMethods';\n\nclass ActionProvider {\n    createChatBotMessage: (\n        questionElement: ReactElement,\n        widget?: Record<string, unknown>,\n    ) => ReactElement;\n    setState: (state: unknown) => ChatbotInterface;\n    createClientMessage: (messageElement: ReactElement) => ReactElement;\n    stateRef: any;\n    checkstate: any = null;\n    isStarted = true;\n    glb_state: any = null;\n    GRANDCHILDREN_PATH_LIMIT = 4;\n    constructor(\n        createChatBotMessage: (\n            questionElement: ReactElement,\n            widget?: Record<string, unknown>,\n        ) => ReactElement,\n        setStateFunc: (state: any) => any,\n        createClientMessage: (messageElement: ReactElement) => ReactElement,\n        stateRef: any,\n    ) {\n        this.createChatBotMessage = createChatBotMessage;\n        this.setState = setStateFunc;\n        this.createClientMessage = createClientMessage;\n        this.stateRef = stateRef;\n    }\n\n    setRevertListeners() {\n        messageService.clearAllInternalSubscription();\n        /* eslint-disable @typescript-eslint/no-unused-vars */\n        const subscription = messageService\n            .getMessageInChatbot()\n            .subscribe((message: any) => {\n                revertState(this);\n            });\n        messageService.addInternalSubscription(subscription);\n    }\n\n    // TODO check options\n\n    // eslint-disable-next-line\n\n    // Generic functions\n    addMessageToBotState = (messages: any, curState: any): any => {\n        if (Array.isArray(messages)) {\n            curState.messages = [...curState.messages, ...messages];\n        } else {\n            curState.messages = [...curState.messages, messages];\n        }\n        return curState;\n    };\n\n    generateNextID = (id: number) => {\n        this.setState((state: any) => {\n            state.id = state.id + 1;\n            return this.returnState(state);\n        });\n        return id;\n    };\n\n    set_spouse = (\n        firstSpouse_id: number,\n        secondSpouse_id: number,\n        add_for_both: boolean,\n        state: any,\n    ) => {\n        NodeEntity.getNode(firstSpouse_id, state.nodeMap)._spouse =\n            secondSpouse_id;\n        if (add_for_both) {\n            NodeEntity.getNode(secondSpouse_id, state.nodeMap)._spouse =\n                firstSpouse_id;\n        }\n        return state;\n    };\n\n    check = (delay: number) => {\n        const self = this;\n        if (this.isStarted) {\n            this.checkstate = setInterval(() => {\n                if (self.glb_state !== null) {\n                    self.isStarted = false;\n                    messageService.sendMessageFromChatbot({\n                        detail: self.glb_state,\n                    });\n                    // close the interval\n                    self.glb_state = null;\n                    clearInterval(this.checkstate);\n                }\n            }, delay);\n        }\n    };\n    returnState = (state: any, delay = 200) => {\n        setTimeout(() => {\n            this.check(delay);\n            this.glb_state = chartSelector(state);\n        }, delay);\n        return state;\n    };\n\n    resetChatbot = () => {\n        this.setState((state: any) => {\n            state = InitialChatbotState;\n            state.messages = [];\n            state.personMap = new Map();\n            state.nodeMap = new Map();\n            state.testator = new NodeEntity(0, 0);\n            const initialQuestion = this.createChatBotMessage(\n                QuestionConstants.TestatorQuestion,\n            );\n            state = this.addMessageToBotState(initialQuestion, state);\n            clearDisabledInput(state.stepID);\n            messageService.resetChatbotState();\n            const undoButton = document.getElementById('chatbot-undo-button');\n            if (undoButton) undoButton.style.display = 'block';\n            return this.returnState(state);\n        });\n    };\n    revertLastState = () => {\n        messageService.setRevert();\n        this.setState((state: any) => {\n            const prevState = messageService.getPreviousState(\n                messageService.getRevertCnt(),\n            );\n            messageService.addRevertCnt();\n            if (prevState == null) {\n                this.resetChatbot();\n                return this.returnState(state);\n            }\n            state = prevState;\n            // clearBooleanOptions();\n            clearDisabledInput(state.stepID);\n            return this.returnState(state);\n        });\n    };\n    delay = (n: number) => {\n        return new Promise(function (resolve) {\n            setTimeout(resolve, n * 1000);\n        });\n    };\n\n    handleValidation = (tempMessages: any, state: any) => {\n        if (tempMessages && tempMessages.length !== 0) {\n            state.messages = tempMessages;\n            return state;\n        }\n        return state;\n    };\n}\n\nexport default ActionProvider;\n","import ChartNode, { NodeData } from './Classes/ChartNode';\nimport Person from '../../ChatbotComponent/Helper/Classes/Person';\nimport { ParentChildSelector } from '../../ChatbotComponent/Helper/Enums/ParentChildSelector';\nimport { NodeEntity } from '../../ChatbotComponent/Helper/Classes/NodeEntity';\nimport ChartConnector from './Classes/ChartConnector';\nimport { Bubble } from './Classes/Bubble';\n\nlet maxLevel = -999999,\n    minLevel = 999999;\nconst xLevelArray = [[1], [-1, 1], [-1, 0, 1], [-2, -1, 1, 2]];\nlet chartNodeMap = new Map<number, ChartNode>();\nlet connectorArray = new Array<ChartConnector>();\nlet xDiff: number;\nlet yDiff: number;\nconst nodeSize = 123;\nlet partnerBubbleLevelMap: Map<number, Array<number>>;\nexport const processData = (data: any): any => {\n    maxLevel = -999999;\n    minLevel = 999999;\n    chartNodeMap = new Map<number, ChartNode>();\n    connectorArray = new Array<ChartConnector>();\n    partnerBubbleLevelMap = new Map<number, Array<number>>();\n    xDiff = 180;\n    yDiff = 100;\n\n    // // divide nodeMap into levels\n    const levelMap = getLevelMap(data);\n    const maxLevelData = levelMap.get(maxLevel);\n    if (data.nodeMap.length === 0 || maxLevelData === undefined) {\n        return [];\n    }\n    setxLevelForMaxLevel(maxLevelData);\n    setxLevel(levelMap, data.nodeMap);\n    setNodePosition(levelMap, data.nodeMap);\n\n    return getChartNodeConnectorArray(data.nodeMap);\n    // const node1 = new ChartNode(\"1\", 'specialNode', new NodeData(\"a\", { right: \"right\" }), { x: 0, y: 0 }, 0)\n    // const node2 = new ChartNode(\"2\", 'specialNode', new NodeData(\"afasfasfas\", { left: \"left\" }), { x: 200, y: 0 }, 0)\n    // const connector = new ChartConnector(`1-2`, 'straight', \"1\", \"2\", '', 's_right', \"t_left\")\n    // return [node1, node2, connector]\n};\n\nconst setxLevel = (\n    levelMap: Map<number, Array<ChartNode>>,\n    nodeMap: Map<number, NodeEntity>,\n) => {\n    /*\n    Create x_level for all nodes and create edges occuring in path\n    */\n    const processedNodes = new Array<string>();\n\n    for (let i = maxLevel; i >= minLevel; i--) {\n        const currentLevelChartNodes = levelMap.get(i);\n\n        if (currentLevelChartNodes !== undefined) {\n            for (const node of currentLevelChartNodes) {\n                if (!processedNodes.includes(node.id)) {\n                    processedNodes.push(node.id);\n                }\n                const currentNode = NodeEntity.getNode(\n                    parseInt(node.id),\n                    nodeMap,\n                );\n\n                if (i !== maxLevel) {\n                    let avgXlevel = 0;\n                    const parentsCurrentNode = currentNode._parents;\n                    parentsCurrentNode.map((parent_id) => {\n                        const n = chartNodeMap.get(parent_id);\n                        if (n !== undefined) {\n                            avgXlevel += n.xLevel;\n                        }\n                    });\n                    if (parentsCurrentNode.length !== 0)\n                        node.xLevel = avgXlevel / parentsCurrentNode.length;\n                }\n                updatePartner(currentNode, processedNodes, i);\n\n                createEdgeInPath(currentNode._path, processedNodes);\n                if (currentNode._partnerPath) {\n                    createEdgeInPath(currentNode._partnerPath, processedNodes);\n                }\n            }\n        }\n    }\n};\nconst updatePartner = (\n    curNode: NodeEntity,\n    processedNodes: string[],\n    level: number,\n) => {\n    const isSpouseOrCohabitant = curNode._cohabitant || curNode._spouse;\n    const isUndividedSpouse = curNode._undividedEstateSpouse;\n    if (!partnerBubbleLevelMap.has(level)) {\n        partnerBubbleLevelMap.set(level, new Array<number>());\n    }\n    const partnerBubbleArray = partnerBubbleLevelMap.get(level);\n\n    if (isSpouseOrCohabitant && isUndividedSpouse) {\n        const curChartNode = getChartNode(`${curNode._id}`);\n        const partnerNodeID = curNode._spouse\n            ? curNode._spouse\n            : curNode._cohabitant;\n        const undividedSpouseId = curNode._undividedEstateSpouse;\n        if (!processedNodes.includes(`${partnerNodeID}`)) {\n            processedNodes.push(`${partnerNodeID}`);\n        }\n        if (!processedNodes.includes(`${undividedSpouseId}`)) {\n            processedNodes.push(`${undividedSpouseId}`);\n        }\n\n        const partnerChartNode = getChartNode(`${partnerNodeID}`);\n        const undividedChartNode = getChartNode(`${undividedSpouseId}`);\n\n        if (!partnerChartNode.data.pos) {\n            partnerChartNode.data.pos = {};\n        }\n        if (!curChartNode.data.pos) {\n            curChartNode.data.pos = {};\n        }\n\n        if (partnerBubbleArray && partnerNodeID && undividedSpouseId) {\n            partnerBubbleArray.push(\n                partnerNodeID,\n                curNode._id,\n                undividedSpouseId,\n            );\n        }\n        if (!partnerChartNode.data.pos) {\n            partnerChartNode.data.pos = {};\n        }\n        if (!undividedChartNode.data.pos) {\n            undividedChartNode.data.pos = {};\n        }\n        if (!curChartNode.data.pos) {\n            curChartNode.data.pos = {};\n        }\n        partnerChartNode.xLevel = curChartNode.xLevel + 0.01;\n        partnerChartNode.data.pos.right = 'right';\n\n        undividedChartNode.xLevel = curChartNode.xLevel - 0.01;\n        undividedChartNode.data.pos.left = 'left';\n        curChartNode.data.pos.left = 'left';\n        curChartNode.data.pos.right = 'right';\n\n        if (\n            connectorArray.filter((connector) => {\n                return connector.id === `e${partnerNodeID}-${curNode._id}`;\n            }).length === 0\n        ) {\n            const newConnector = new ChartConnector(\n                `e${partnerNodeID}-${curNode._id}`,\n                'straight',\n                `${partnerNodeID}`,\n                `${curNode._id}`,\n                '',\n                's_right',\n                't_left',\n            );\n            connectorArray.push(newConnector);\n        }\n        if (\n            connectorArray.filter((connector) => {\n                return connector.id === `e${curNode._id}-${undividedSpouseId}`;\n            }).length === 0\n        ) {\n            const newConnector = new ChartConnector(\n                `e${curNode._id}-${undividedSpouseId}`,\n                'straight',\n                `${curNode._id}`,\n                `${undividedSpouseId}`,\n                '',\n                's_right',\n                't_left',\n            );\n            connectorArray.push(newConnector);\n        }\n    } else if (isSpouseOrCohabitant || isUndividedSpouse) {\n        const curChartNode = getChartNode(`${curNode._id}`);\n        const partnerNodeID = curNode._spouse\n            ? curNode._spouse\n            : curNode._cohabitant\n            ? curNode._cohabitant\n            : curNode._undividedEstateSpouse\n            ? curNode._undividedEstateSpouse\n            : null;\n        const partnerChartNode = getChartNode(`${partnerNodeID}`);\n        if (!partnerChartNode.data.pos) {\n            partnerChartNode.data.pos = {};\n        }\n        if (!curChartNode.data.pos) {\n            curChartNode.data.pos = {};\n        }\n        if (partnerBubbleArray && partnerNodeID) {\n            partnerBubbleArray.push(curNode._id, partnerNodeID);\n        }\n        partnerChartNode.xLevel = curChartNode.xLevel - 0.01;\n        partnerChartNode.data.pos.left = 'left';\n        curChartNode.data.pos.right = 'right';\n        if (\n            connectorArray.filter((connector) => {\n                return connector.id === `e${partnerNodeID}-${curNode._id}`;\n            }).length === 0\n        ) {\n            const newConnector = new ChartConnector(\n                `e${curNode._id}-${partnerNodeID}`,\n                'straight',\n                `${curNode._id}`,\n                `${partnerNodeID}`,\n                '',\n                's_right',\n                't_left',\n            );\n            connectorArray.push(newConnector);\n        }\n    } else {\n        //edge case\n        console.log('Unreachable');\n    }\n};\nconst getLevelMap = (data: any): Map<number, Array<ChartNode>> => {\n    /*\n    Creates a map of nodes according to levels. top-down.\n    */\n    const levelMap = new Map<number, Array<ChartNode>>();\n    // eslint-disable-next-line\n    data.nodeMap.forEach(function (node: NodeEntity, key: number) {\n        const nodeDetails = Person.getPerson(node._id, data.personsMap);\n\n        if (node._level > maxLevel) {\n            maxLevel = node._level;\n        }\n        if (node._level < minLevel) {\n            minLevel = node._level;\n        }\n        if (!levelMap.has(node._level)) {\n            levelMap.set(node._level, new Array<ChartNode>());\n        }\n        const nodeLabel = nodeDetails._deceased\n            ? `\\u2020 ${nodeDetails._personName}`\n            : nodeDetails._personName;\n        const newNode = new ChartNode(\n            node._id.toString(),\n            'specialNode',\n            new NodeData(nodeLabel),\n            { x: 0, y: 0 },\n            0,\n        );\n        levelMap.get(node._level)?.push(newNode);\n        chartNodeMap.set(node._id, newNode);\n    });\n    return levelMap;\n};\n\nconst setNodePosition = (\n    levelMap: Map<number, Array<ChartNode>>,\n    nodeMap: any,\n) => {\n    let ypos = 0;\n    for (let i = maxLevel; i >= minLevel; i--) {\n        const currentLevelChartNodes = levelMap.get(i);\n        // let xpos = 0;\n        if (currentLevelChartNodes !== undefined) {\n            const sortedLevelChartNode = currentLevelChartNodes.sort((a, b) =>\n                a.xLevel > b.xLevel ? -1 : 1,\n            );\n            // create bubbles\n            const bubbles = createLevelBubble(\n                sortedLevelChartNode,\n                partnerBubbleLevelMap.get(i),\n                nodeMap,\n            );\n\n            processBubbles(bubbles, ypos);\n        }\n        ypos += yDiff;\n    }\n};\nconst processBubbles = (bubbles: Array<Bubble>, ypos: number) => {\n    let xleft = 0;\n    const xgap = xDiff - nodeSize;\n    let previousXRight = -10000000;\n\n    for (const bubble of bubbles) {\n        //\n        const n = bubble.elements.length;\n        if (bubble.parent) {\n            // find relative pos with parent\n\n            const parentChartNode = getChartNode(bubble.parent.toString());\n            let relativeXleft =\n                parentChartNode.position.x +\n                nodeSize / 2 -\n                (n * nodeSize + (n - 1) * xgap) / 2;\n            const relativeXRight =\n                parentChartNode.position.x +\n                nodeSize / 2 +\n                (n * nodeSize + (n - 1) * xgap) / 2;\n\n            if (previousXRight > relativeXleft) {\n                relativeXleft = previousXRight;\n            }\n            previousXRight = relativeXRight + xgap;\n            for (const eleID of bubble.elements) {\n                const element = getChartNode(eleID.toString());\n                element.position = { x: relativeXleft, y: ypos };\n                relativeXleft += xDiff;\n                xleft = relativeXleft;\n            }\n        } else {\n            // x will start from xleft\n            const relativeXRight = xleft + n * xDiff;\n            previousXRight = relativeXRight;\n            for (const eleID of bubble.elements) {\n                const element = getChartNode(eleID.toString());\n                element.position = { x: xleft, y: ypos };\n                xleft += xDiff;\n            }\n        }\n    }\n};\nconst createLevelBubble = (\n    chartNodes: Array<ChartNode>,\n    partnerBubble: Array<number> | undefined,\n    nodeMap: any,\n) => {\n    const bubbles = new Array<Bubble>();\n    let isPartnerProcessed = false;\n    for (const chartNode of chartNodes) {\n        const node = NodeEntity.getNode(parseInt(chartNode.id), nodeMap);\n        // check in partnerMap\n\n        if (partnerBubble && partnerBubble.includes(node._id)) {\n            if (isPartnerProcessed) {\n                continue;\n            }\n            isPartnerProcessed = true;\n            let partnerParent: number | undefined;\n            let isExistingBubble = false;\n            for (const partner of partnerBubble) {\n                const partnerNode = NodeEntity.getNode(partner, nodeMap);\n                const existingBubbles = bubbles.filter((bubble) => {\n                    if (bubble.parent) {\n                        return partnerNode._parents.includes(bubble.parent);\n                    }\n                    return false;\n                });\n                if (existingBubbles.length !== 0) {\n                    // return that there is an existing bubble which will include bubble\n                    existingBubbles[0].elements =\n                        existingBubbles[0].elements.concat(partnerBubble);\n                    isExistingBubble = true;\n                    break;\n                } else {\n                    if (partnerNode._parents.length !== 0)\n                        partnerParent = partnerNode._parents[0];\n                }\n            }\n            if (!isExistingBubble)\n                bubbles.push(new Bubble(partnerBubble, partnerParent));\n        } else {\n            const existingBubble = bubbles.filter((bubble) => {\n                if (bubble.parent) {\n                    return node._parents.includes(bubble.parent);\n                }\n                return false;\n            });\n            let bubble: Bubble;\n            if (existingBubble.length !== 0) {\n                bubble = existingBubble[0];\n                bubble.elements.push(node._id);\n            } else {\n                if (node._parents.length !== 0)\n                    bubble = new Bubble([node._id], node._parents[0]);\n                else bubble = new Bubble([node._id]);\n                bubbles.push(bubble);\n            }\n        }\n    }\n    return bubbles;\n};\nconst getChartNodeConnectorArray = (\n    nodeMap: Map<number, NodeEntity>,\n): Array<ChartNode | ChartConnector> => {\n    const finalArray = new Array<ChartNode | ChartConnector>();\n    // eslint-disable-next-line\n    chartNodeMap.forEach((value, key) => {\n        if (NodeEntity.getNode(parseInt(value.id), nodeMap)._path.length !== 0)\n            finalArray.push(value);\n    });\n    return finalArray.concat(connectorArray);\n};\n\nconst setxLevelForMaxLevel = (nodeArray: Array<ChartNode>) => {\n    const xlevelDefault = xLevelArray[nodeArray.length - 1];\n    for (let i = 0; i < nodeArray.length; i++) {\n        nodeArray[i].xLevel = xlevelDefault[i];\n    }\n};\nconst getChartNode = (id: string) => {\n    const chartNode: ChartNode | undefined = chartNodeMap.get(parseInt(id));\n    if (chartNode == undefined) {\n        throw new Error('Person not found with given id:' + id);\n    }\n    return chartNode;\n};\n\nconst createEdgeInPath = (\n    currentNodePath: [number, number][],\n    processedNodes: string[],\n): void => {\n    /*\n    identify source and target point for connector at nodes. \n    create new connector and push in connectorArray\n    */\n    for (let j = currentNodePath.length - 2; j >= 0; j--) {\n        if (\n            currentNodePath[j][0] === ParentChildSelector.testator &&\n            (currentNodePath[j + 1][0] === ParentChildSelector.spouse ||\n                currentNodePath[j + 1][0] === ParentChildSelector.cohabitant ||\n                currentNodePath[j + 1][0] ===\n                    ParentChildSelector.undividedSpouse)\n        ) {\n            break;\n        }\n        processedNodes.push(currentNodePath[j][1].toString());\n        let source = '',\n            target = '';\n        if (\n            currentNodePath[j + 1][0] <= currentNodePath[j][0] ||\n            (currentNodePath[j + 1][0] === ParentChildSelector.child &&\n                currentNodePath[j][0] === ParentChildSelector.testator)\n        ) {\n            source = currentNodePath[j][1].toString();\n            target = currentNodePath[j + 1][1].toString();\n        } else {\n            source = currentNodePath[j + 1][1].toString();\n            target = currentNodePath[j][1].toString();\n        }\n        const sourceNode = getChartNode(source);\n        if (!sourceNode.data.pos) {\n            sourceNode.data.pos = {};\n        }\n        sourceNode.data.pos.bottom = 'bottom';\n        const targetNode = getChartNode(target);\n        if (!targetNode.data.pos) {\n            targetNode.data.pos = {};\n        }\n        targetNode.data.pos.top = 'top';\n\n        if (\n            connectorArray.filter((connector) => {\n                return connector.id === `e${source}-${target}`;\n            }).length === 0\n        ) {\n            const newConnector = new ChartConnector(\n                `e${source}-${target}`,\n                'straight',\n                source,\n                target,\n                '',\n                's_bottom',\n                't_top',\n            );\n            connectorArray.push(newConnector);\n        }\n    }\n};\n","export default function chartSelector(state) {\n  return {\n    nodeMap: state.nodeMap,\n    personsMap: state.personsMap,\n    testator: state.testator,\n  };\n}\n\nexport function messageSelector(state) {\n  return {\n    messages: state.messages,\n  };\n}\n","class ChartNode {\n  id: string;\n  type: string;\n  data: NodeData;\n  position: { x: number; y: number };\n  xLevel: number;\n  draggable = false;\n  connectable = false;\n  constructor(\n    id: string,\n    type: string,\n    data: NodeData,\n    position: { x: number; y: number },\n    xLevel: number\n  ) {\n    this.id = id;\n    this.type = type;\n    this.data = data;\n    this.position = position;\n    this.xLevel = xLevel;\n  }\n}\nexport class NodeData {\n  label = \"\";\n  showDialog: boolean;\n  pos: {\n    left?: null | string;\n    right?: null | string;\n    top?: null | string;\n    bottom?: null | string;\n  };\n\n  constructor(label: string, data?: any) {\n    this.label = label;\n    this.pos = data;\n    this.showDialog = false;\n  }\n}\nexport default ChartNode;\n","class ChartConnector {\n  id: string;\n  type = \"smoothstep\";\n  source: string;\n  target: string;\n  label: string;\n  animated = false;\n  // arrowHeadType = \"arrowclosed\";\n  sourceHandle: string;\n  targetHandle: string;\n\n  constructor(\n    id: string,\n    type: string,\n    source: string,\n    target: string,\n    label: string,\n    sourceHandle = \"\",\n    targetHandle = \"\"\n  ) {\n    this.id = id;\n    this.type = type;\n    this.source = source;\n    this.target = target;\n    this.label = label;\n    this.sourceHandle = sourceHandle;\n    this.targetHandle = targetHandle;\n  }\n}\n\nexport default ChartConnector;\n","export class Bubble {\n  parent: number | undefined;\n  elements: Array<number>;\n  constructor(elements: Array<number>, parent?: number) {\n    this.elements = elements;\n    this.parent = parent;\n  }\n}\n","import { Handle, Position } from 'react-flow-renderer';\nimport { Textfit } from 'react-textfit';\n\nenum HandleType {\n    source = 'source',\n    target = 'target',\n}\n\nconst customHandleData = [\n    {\n        type: 'source',\n        position: Position.Right,\n        id: 's_right',\n        style: { top: '50%', background: '#555' },\n    },\n    {\n        type: 'source',\n        position: Position.Bottom,\n        id: 's_bottom',\n        style: { left: '50%', background: '#555' },\n    },\n    {\n        type: 'target',\n        position: Position.Left,\n        id: 't_left',\n        style: { top: '50%', background: '#555' },\n    },\n    {\n        type: 'target',\n        position: Position.Top,\n        id: 't_top',\n        style: { left: '50%', background: '#555' },\n    },\n];\n\nconst condition = false;\nconst inheritanceDisplay = condition ? 'block' : 'none';\n\nconst partnerNodeStyles = {\n    OuterDiv: {\n        background: '#fff',\n        color: '#000',\n        width: '7rem',\n        // height: \"1.8rem\",\n        borderRadius: '3px',\n        borderColor: 'midnightblue',\n        borderStyle: 'solid',\n        borderWidth: '1px',\n        letterSpacing: '0.5px',\n    },\n    innerDiv1: {\n        width: '6.8rem',\n        display: 'contents',\n        height: `${condition ? '100%' : '2 / 3'}%`,\n        padding: '5%',\n    },\n    innerDiv2: {\n        display: inheritanceDisplay,\n        borderTop: 'black solid 1px',\n        padding: '0 2px',\n        letterSpacing: 0,\n    },\n    textFitStyle: {\n        margin: 'auto',\n        textAlign: 'center',\n        fontSize: '90%',\n        paddingBottom: '0.2rem',\n    },\n    subtitle: {\n        fontSize: '0.5rem',\n        margin: 0,\n        whiteSpace: 'nowrap' as const,\n    },\n};\n\nconst CustomNode = (totalData: any) => {\n    const data = totalData.data;\n\n    const isConnectable = data.isConnectable;\n    // eslint-disable-next-line\n    const handles = customHandleData.map((v, k) => {\n        if (check(data.pos, v.position)) {\n            return (\n                <Handle\n                    key={v.id}\n                    type={\n                        v.type === 'source'\n                            ? HandleType.source\n                            : HandleType.target\n                    }\n                    position={v.position}\n                    id={v.id}\n                    style={v.style}\n                    isConnectable={isConnectable}\n                />\n            );\n        }\n    });\n    const labelString = deceasedFormatter(data.label);\n    return (\n        <div>\n            <div\n                id={`detail_${totalData.id}`}\n                style={partnerNodeStyles.OuterDiv}\n            >\n                <div style={partnerNodeStyles.innerDiv1}>\n                    <Textfit\n                        style={partnerNodeStyles.textFitStyle}\n                        max={20}\n                        mode=\"single\"\n                        forceSingleModeWidth={false}\n                    >\n                        {labelString}\n                    </Textfit>\n                </div>\n                <div style={partnerNodeStyles.innerDiv2}>\n                    <p style={partnerNodeStyles.subtitle}>Amount: NOK </p>\n                </div>\n                {/* <Typography align=\"center\" variant=\"subtitle2\" style={{ textTransform: \"uppercase\", fontFamily: \"Helvetica\", padding: \"0 5px\" }}></Typography> */}\n                {handles}\n            </div>\n            {/* <Popper style={{ position: \"absolute\", display: data.showDialog ? \"block\" : \"none\" }}\n        open={data.showDialog}\n        anchorEl={document.getElementById(`detail_${totalData.id}`)}\n      >{`Hi popover ${data.label}`}</Popper> */}\n        </div>\n    );\n};\nconst check = (data: any, pos: string): boolean => {\n    if (\n        data &&\n        (data.left === pos ||\n            data.right === pos ||\n            data.top === pos ||\n            data.bottom === pos)\n    )\n        return true;\n\n    return false;\n};\n\nconst deceasedFormatter = (personString: string) => {\n    // const tempArray = personString.split(\"\");\n\n    // if (tempArray.length === 2) {\n    //   const spanElement = document.createElement(\"span\");\n    //   spanElement.innerHTML = `tempArray[0] <p style=\"color: red\">tempArray[1]</p>`\n    //   return spanElement\n    // }\n    return personString;\n};\n\nexport default CustomNode;\n","import { Subject, Subscription } from 'rxjs';\n\nconst chatBotDataSubject = new Subject();\nconst chatbotMessageSubscriptionList = new Array<Subscription>()\nexport const componentCommunicatorService = {\n\n    sendChatbotMessage: (message: any) => chatBotDataSubject.next(message),\n\n\n    getChatbotMessage: () => chatBotDataSubject.asObservable(),\n\n    addSubscription: (subscription: Subscription) => chatbotMessageSubscriptionList.push(subscription),\n\n\n    clearAllSubscription: () => {\n        chatbotMessageSubscriptionList.forEach((subscription: Subscription) => {\n            subscription.unsubscribe();\n        })\n    },\n\n\n};","import ReactFlow, {\n    Background,\n    BackgroundVariant,\n    Controls,\n} from 'react-flow-renderer';\nimport { processData } from './ProcessDataForChart';\nimport { useEffect, useRef, useState } from 'react';\nimport { useZoomPanHelper, useUpdateNodeInternals } from 'react-flow-renderer';\nimport CustomNode from './CustomNode';\nimport ChartNode from './Classes/ChartNode';\nimport ChartConnector from './Classes/ChartConnector';\nimport { componentCommunicatorService } from '../../ChatbotComponent/services/ComponentCommunicatorService';\n\n// import { CustomDetailDialog } from \"./Classes/CustomDetailDialog\";\n\nconst flowStyles = {\n    height: '100%',\n    width: '100%',\n    borderTopLeftRadius: '1rem',\n    borderTopRightRadius: '1rem',\n    borderBottomLeftRadius: '0.3rem',\n    borderBottomRightRadius: '0.3rem',\n};\nlet isHandleChange = true;\nconst OrgChartTree = () => {\n    // const result = useSelector(chartSelector);\n    const [result, setResult] = useState({\n        nodeMap: new Map(),\n        personMap: new Map(),\n        testator: null,\n    });\n    const [chartContent, setChartContent] = useState([]);\n    const componentWillUnmount = useRef(false);\n    const updateNodeInternals = useUpdateNodeInternals();\n\n    const getNodeData = () =>\n        chartContent.forEach((chartData: ChartNode | ChartConnector) => {\n            //\n            if (chartData instanceof ChartNode) {\n                updateNodeInternals(chartData.id);\n            }\n        });\n    useEffect(() => {\n        return () => {\n            componentWillUnmount.current = true;\n        };\n    }, []);\n    useEffect(() => {\n        componentCommunicatorService.clearAllSubscription();\n        const subscription = componentCommunicatorService\n            .getChatbotMessage()\n            .subscribe((data: any) => setResult(data));\n        componentCommunicatorService.addSubscription(subscription);\n        if (componentWillUnmount.current) {\n            componentCommunicatorService.clearAllSubscription();\n        }\n    }, [1]);\n    useEffect(() => {\n        setTimeout(() => {\n            getNodeData();\n        }, 500);\n    }, [chartContent]);\n    useEffect(() => {\n        setChartContent(processData(result));\n        isHandleChange = true;\n    }, [result]);\n    const { fitView } = useZoomPanHelper();\n    const nodeTypes = {\n        specialNode: CustomNode,\n    };\n\n    useEffect(() => {\n        if (isHandleChange) {\n            setTimeout(() => {\n                fitView();\n            }, 100);\n        }\n    });\n\n    return (\n        // <div\n        //     id=\"ChartContainer\"\n        //     // style={{ height: '100%', paddingTop: '3rem' }}\n        // >\n        <ReactFlow\n            elements={chartContent}\n            style={flowStyles}\n            nodeTypes={nodeTypes}\n            nodesConnectable={false}\n            paneMoveable={false}\n            selectNodesOnDrag={false}\n            elementsSelectable={false}\n            nodesDraggable={false}\n        >\n            <Background variant={BackgroundVariant.Lines} gap={1} size={2} />\n            <Controls />\n        </ReactFlow>\n        // </div>\n    );\n};\n\nexport default OrgChartTree;\n","var _path;\nvar _excluded = [\"title\", \"titleId\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport * as React from \"react\";\nfunction SvgChatButtonLogo(_ref, svgRef) {\n  var title = _ref.title,\n    titleId = _ref.titleId,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    \"data-name\": \"Layer 1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 122.88 119.35\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"chatbot\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M57.49,29.2V23.53a14.41,14.41,0,0,1-2-.93A12.18,12.18,0,0,1,50.44,7.5a12.39,12.39,0,0,1,2.64-3.95A12.21,12.21,0,0,1,57,.92,12,12,0,0,1,61.66,0,12.14,12.14,0,0,1,72.88,7.5a12.14,12.14,0,0,1,0,9.27,12.08,12.08,0,0,1-2.64,3.94l-.06.06a12.74,12.74,0,0,1-2.36,1.83,11.26,11.26,0,0,1-2,.93V29.2H94.3a15.47,15.47,0,0,1,15.42,15.43v2.29H115a7.93,7.93,0,0,1,7.9,7.91V73.2A7.93,7.93,0,0,1,115,81.11h-5.25v2.07A15.48,15.48,0,0,1,94.3,98.61H55.23L31.81,118.72a2.58,2.58,0,0,1-3.65-.29,2.63,2.63,0,0,1-.63-1.85l1.25-18h-.21A15.45,15.45,0,0,1,13.16,83.18V81.11H7.91A7.93,7.93,0,0,1,0,73.2V54.83a7.93,7.93,0,0,1,7.9-7.91h5.26v-2.3A15.45,15.45,0,0,1,28.57,29.2H57.49ZM82.74,47.32a9.36,9.36,0,1,1-9.36,9.36,9.36,9.36,0,0,1,9.36-9.36Zm-42.58,0a9.36,9.36,0,1,1-9.36,9.36,9.36,9.36,0,0,1,9.36-9.36Zm6.38,31.36a2.28,2.28,0,0,1-.38-.38,2.18,2.18,0,0,1-.52-1.36,2.21,2.21,0,0,1,.46-1.39,2.4,2.4,0,0,1,.39-.39,3.22,3.22,0,0,1,3.88-.08A22.36,22.36,0,0,0,56,78.32a14.86,14.86,0,0,0,5.47,1A16.18,16.18,0,0,0,67,78.22,25.39,25.39,0,0,0,72.75,75a3.24,3.24,0,0,1,3.89.18,3,3,0,0,1,.37.41,2.22,2.22,0,0,1,.42,1.4,2.33,2.33,0,0,1-.58,1.35,2.29,2.29,0,0,1-.43.38,30.59,30.59,0,0,1-7.33,4,22.28,22.28,0,0,1-7.53,1.43A21.22,21.22,0,0,1,54,82.87a27.78,27.78,0,0,1-7.41-4.16l0,0ZM94.29,34.4H28.57A10.26,10.26,0,0,0,18.35,44.63V83.18A10.26,10.26,0,0,0,28.57,93.41h3.17a2.61,2.61,0,0,1,2.41,2.77l-1,14.58L52.45,94.15a2.56,2.56,0,0,1,1.83-.75h40a10.26,10.26,0,0,0,10.22-10.23V44.62A10.24,10.24,0,0,0,94.29,34.4Z\"\n  })));\n}\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgChatButtonLogo);\nexport default __webpack_public_path__ + \"static/media/chat_button_logo.6fc97b77026ad50b1225b3f11fd4a35b.svg\";\nexport { ForwardRef as ReactComponent };","import { useEffect, useRef } from 'react';\nimport { Grid, Typography } from '@mui/material';\nimport { Chatbot } from 'react-chatbot-kit';\nimport Config from '../Components/InheritanceCalculatorComponents/ChatbotComponent/Config.js';\nimport MessageParser from '../Components/InheritanceCalculatorComponents/ChatbotComponent/MessageParser';\nimport ActionProvider from '../Components/InheritanceCalculatorComponents/ChatbotComponent/ActionProvider';\nimport OrgChartTree from '../Components/InheritanceCalculatorComponents/OtherComponent/FamilyChart/ChartComponent';\nimport '../Components/InheritanceCalculatorComponents/OtherComponent/ChatbotToggleButton/ChatbotToggleButton.scss';\nimport botIcon from '../assets/images/chat_button_logo.svg';\nimport { ReactFlowProvider } from 'react-flow-renderer';\nimport { messageService } from '../Components/InheritanceCalculatorComponents/ChatbotComponent/services/ChatbotCommunicator.tsx';\nimport { componentCommunicatorService } from '../Components/InheritanceCalculatorComponents/ChatbotComponent/services/ComponentCommunicatorService.tsx';\n\nconst InheritanceCalculatorPage = () => {\n    let prev = 'block';\n    useEffect(() => {\n        messageService.clearAllExternalSubscription();\n        const subscription = messageService\n            .getMessageOutChatbot()\n            .subscribe(({ detail }) => {\n                componentCommunicatorService.sendChatbotMessage(detail);\n            });\n        messageService.addExternalSubscription(subscription);\n        setWarningDiv();\n        addListenerToChatInputField();\n    }, [1]);\n    const toggleBot = () => {\n        const divChatBot = document.getElementsByClassName(\n            'react-chatbot-kit-chat-container',\n        )[0];\n        if (prev === 'block') {\n            divChatBot.style.display = 'none';\n            prev = 'none';\n        } else {\n            divChatBot.style.display = 'block';\n            prev = 'block';\n        }\n    };\n    return (\n        <Grid\n            container\n            direction=\"column\"\n            id=\"InheritanceCalculatorMain\"\n            justifyContent=\"center\"\n        >\n            {/* <Grid item marginY=\"1rem\">\n                <Typography variant=\"h3\" align=\"center\">\n                    Inheritance Calculator\n                </Typography>\n            </Grid> */}\n            <Grid\n                item\n                container\n                direction=\"row\"\n                justifyContent=\"space-between\"\n                alignItems=\"flex-end\"\n                marginTop=\"4rem\"\n            >\n                <Grid\n                    item\n                    xs={12}\n                    sm={10}\n                    md={7}\n                    style={{\n                        height: '80vh',\n                    }}\n                    className=\"orgChartContainer\"\n                >\n                    <ReactFlowProvider>\n                        <OrgChartTree />\n                    </ReactFlowProvider>\n                </Grid>\n                {/* { */}\n                <Grid item xs={10} sm={8} md={4} className=\"chatbotContainer\">\n                    <Chatbot\n                        config={Config}\n                        actionProvider={ActionProvider}\n                        messageParser={MessageParser}\n                    />\n\n                    {/* } */}\n                    <button className=\"ChatbotToggleButton\" onClick={toggleBot}>\n                        <img src={botIcon} />\n                    </button>\n                </Grid>\n            </Grid>\n        </Grid>\n    );\n};\n\nconst setWarningDiv = () => {\n    const newDiv = document.createElement('div');\n    newDiv.id = 'chatbot-warning-div';\n    newDiv.innerHTML = 'warning';\n    newDiv.style.cssText =\n        'background-color: red; position: absolute; bottom: 2.5rem; width: 100%; display: none;';\n\n    document\n        .getElementsByClassName('react-chatbot-kit-chat-input-form')[0]\n        .prepend(newDiv);\n\n    const container = document.querySelector(\n        '.react-chatbot-kit-chat-message-container',\n    );\n    const lastChild = container.lastChild;\n    lastChild.style.paddingBottom = '2.5rem';\n};\n\nconst addListenerToChatInputField = () => {\n    const chatInputField = document.getElementsByClassName(\n        'react-chatbot-kit-chat-input',\n    )[0];\n    chatInputField.addEventListener('input', () => {\n        const warningDiv = document.getElementById('chatbot-warning-div');\n        if (warningDiv) {\n            if (warningDiv.style.display === 'block') {\n                warningDiv.style.display = 'none';\n            }\n        }\n    });\n};\nexport default InheritanceCalculatorPage;\n"],"names":["inSubject","Subject","outSubject","internalSubscriptionList","Array","externalSubscriptionList","previousStates","revertCnt","isRevert","messageService","message","next","asObservable","subscription","push","data","stateCopy","_","filter","previousState","Object","entries","length","pop","cnt","finalState","i","InitialChatbotState","reverseCount","forEach","unsubscribe","shift","BinaryAnswerTypeYes","BinaryAnswerTypeNo","ValidationType","DefaultWarningMessage","ChatbotValidation","actionProvider","chatbotState","_this","_classCallCheck","validate","validationTypes","warningMessage","arguments","undefined","addEmptyRuleAndSortInc","_step","_iterator","_createForOfIteratorHelper","s","n","done","validationType","value","validationResult","emptyValue","validateEmpty","invalidAmount","validateAmount","onlyDigit","validateDigit","incorrectValueForBoolean","validateValueForBoolean","incorrectValueForUndividedOptions","validateValueForUndividedOptions","console","error","getWarningMessage","showWarning","messageCopy","messages","handleValidation","stateRef","hideWarning","err","e","f","match","test","_i","_ownershipTypes","values","undividedOwnershipType","includes","toUpperCase","warningDiv","document","getElementById","innerHTML","concat","style","display","newDiv","closeButton","createElement","cssText","addEventListener","remove","appendChild","valArray","sort","a","b","_createClass","key","emptyValueMessage","errorForBooleanMessage","invalidAmountMessage","onlyDigitMessage","incorrectValueForUndividedMessage","numberInputTypesObject","getReturnValueFromBooleanWidget","state","_objectSpread","yesNoClickedFlag","_jsx","FormattedMessage","id","getReturnValueFromUndividedWidget","_ownershipTypeWithFor","_ownershipTypeWithFor2","_defineProperty","FormattedMessages","ParseCurrencyStringForOutput","unformattedCurrency","Intl","NumberFormat","currency","currencyDisplay","minimumFractionDigits","maximumFractionDigits","format","Number","replace","CurrencyOutput","inputCurrency","initialCurrencyValue","beginningValue","endValue","matchesStart","matchStartResult","substring","matchesEnd","matchEndResult","removeTextFromCurrencyString","digitsBeforeSeparatorValue","separatorCount","checkSeparatorCount","_step2","digitsBeforeSymbol","_iterator2","checkDigitsBeforeSeparatorValue","useStyles","makeStyles","popover","pointerEvents","paper","padding","useTheme","spacing","backgroundColor","props","classes","_useState","useState","_useState2","_slicedToArray","anchorEl","setAnchorEl","containerRef","useRef","handlePopoverClose","open","Boolean","_jsxs","className","ref","children","LiveHelpIcon","onMouseEnter","event","currentTarget","onMouseLeave","Popover","anchorOrigin","vertical","horizontal","transformOrigin","onClose","disableRestoreFocus","container","current","text","QuestionConstants","TestatorQuestion","UndividedEstateQuestion","YesNoWidgetOptions","widget","withAvatar","loading","terminateLoading","UndividedEstateResultText","selectedOption","undividedEstateResultText","undvdSpouseOtherSuccessorQuestion","testatorOtherSuccessorQuestion","NetWealthQuestion","ShowInfoWidget","NetWealthWarning","UnderAgeQuestion","UnderAgeResultText","underAgeResultText","SpouseChoiceQuestion","SpouseQuestion","CohabitantChoiceQuestion","CohabitantQuestion","addSuccessorQuestion1","person_id","person_ID","addSuccessorQuestion2","child_id_string","children_IDs","AliveQuestion","child_id","child_ID","AliveResultText","aliveResultText","addParentsQuestion1","askSecondParentChoiceQuestion","addParentsQuestion2","parent_id_string","parents_IDs","MarriedParents1","first_parent_id","second_parent_id","parent1_ID","parent2_ID","MarriedParents2","addGrandParentsQuestion1","parent_id","addGrandParentsQuestion2","grandparent_id_string","grandParents_IDs","FinalQuestion","EmptyQuestion","DefaultText","TotalEstateNetValueQuestion","TotalEstateNetValueWarning","OwnershipTypeQuestion","OwnershipQuestionWidgetOptions","OwnershipTypeWarning","DelvisFirstQuestion","DelvisSecondQuestion","FulltSaereieQuestion","UndividedEstateSpouseQuestion","TextBeforeSucsrUndvdSpouse","addSuccessorCount","undividedChildrenTogetherCount","addSuccessorOfParentCount","existing_child_id","existing_child_ID","InheritanceConstants","DESC_COHABITANT_WITHOUT_COMMON_CHILD","DESC_NO_SPOUSE_OR_COHABITANT","DESC_COHABITANT_NO_CLOSE_RELATIVES_2","DESC_COHABITANT_NO_CLOSE_RELATIVES","DESC_SPOUSE_NO_CLOSE_RELATIVES_2","DESC_SPOUSE_NO_CLOSE_RELATIVES","G","MINIMUM_INHERITANCE_SPOUSE_VS_CHILDREN","FRACTION_INHERITANCE_SPOUSE_VS_CHILDREN","MINIMUM_INHERITANCE_SPOUSE_VS_PARENTS","FRACTION_INHERITANCE_SPOUSE_VS_PARENTS","MINIMUM_INHERITANCE_COHABITANT_VS_CHILDREN","FRACTION_INHERITANCE_COHABITANT_VS_CHILDREN","MINIMUM_INHERITANCE_COHABITANT_VS_PARENTS","FRACTION_INHERITANCE_COHABITANT_VS_PARENTS","FRACTION_PLIKTDEL","LINE_MAXIMUM_PLIKTDEL","LAW_LINKS","CODE_PARAGRAPHS","combine_duplicates","inheritance_fraction_list","duplicateArrayPersonMap","Map","combinedArray","inheritance_fraction","has","person","tempInheritanceFractionList","get","set","duplicatedMapArray","keys","currentValue","frac","reduce","accumulator","item","chains","arr","curr","split_evenly_between_lines","person_list","maximum_distance","allow_parents","split_fraction_list","_step3","split_frac","_iterator3","_loop","personDetail","getPerson","personsMap","personNode","getNode","nodeMap","_deceased","get_class_and_distance_closest_surviving_relative","v","_step6","temp_list","_parents","level_sum","_iterator6","interm_temp_list","_step7","_iterator7","_step8","temp_split_fraction_list","_iterator8","_personName","_step9","_children","temp_fraction_list","_iterator9","map","temp_list_item","_ret","_step4","_iterator4","_step5","_iterator5","cache","createIntlCache","intl","createIntl","locale","Norsk","ReportCalculationBase","inheritanceType","will","survivor","survivor_type","class_closest","distance_closest","old_surviving_reference_paragraphs","surviving_reference_paragraphs","minimum_surviving_inheritance","surviving_fraction","descriptive_text","survivor_inheritance_sum","genealogy_inheritance_sum","splits_with_chains","genealogy_inheritance","genealogy_splits","netWealth","initializeInheritance","log","initializeInheritanceVariablesCommon","initializePliktInheritance","_get_class_and_distan","testator","_get_class_and_distan2","has_surviving_spouse","_spouse","formatMessage","initializeUndividedInheritance","computeMethod","inheritanceOption","_get_class_and_distan3","_get_class_and_distan4","has_surviving_cohabitant","_cohabitant","computeGenealogyInheritance","Math","min","max","compute_default_genealogy_splits_with_chains","genealogy_split","computeGenealogyPliktInheritance","personObject","firstParentSpouse","_underAge","grandParent_splits","num","resultGrandParentSplit","grandParent_split","this","_id","InheritanceCalculation","_ReportCalculationBas","_inherits","_super","_createSuper","call","styles","StyleSheet","page","color","fontFamily","flexDirection","paddingLeft","paddingRight","paddingBottom","section","margin","header","fontSize","marginBottom","textAlign","heading","textDecoration","subheading","paragraphHeading","paragraph","pageNumber","position","bottom","left","right","boldValue","fontWeight","italicValue","fontStyle","urlStyle","tableHeaderRow","borderWidth","tableDataRow","marginTop","redText","imageView","image","Bold","Text","Italic","currencyFormatNO","currencyValue","useGrouping","add_legal_reference","code_paragraph","lovdataLink","addLovdataLink","code_paragraph_code","hyperlinkText","add_hyperlink","url_text","Link","src","unravel_chain_to_string","chain","splice","link","unravel_chains_to_string","chains_unraveled","unravelOutput","ind","unraveled_chain","getGenealogyInheritanceText","finalGenealogyInheritanceText","obj","random","toString","getGenealogyText","legalReference1","legalReference2","View","getParagraph","helpText","legalReferenceText","genealogyText","genealogyInheritanceSum","legal_reference_text","genealogyInheritanceText","Genealogy","inheritanceMode","useContext","UserContext","inheritanceCalculation","genealogyParagraph","GenealogyUtils","wrap","pliktdelsarvCalculation","genealogyPliktParagraph","GenealogyPliktUtils","getPliktIntroString","person_name","net_wealth_NOK","available_for_will","IntroductionPage","calculatedValues","currencyFormatted","testatorName","IntroductionUtils","pliktIntroText","IntroductionPliktUtils","TableElement","summaryVal","summaryValue","Table","TableHeader","TableCell","TableBody","DataTableCell","getContent","r","survivorName","survivorType","belopAmount","SummaryUtils","summaryValues","getSummaryValues","table","emptyTableCase","survivor_name","gen_inherit","summaryCell","Summary","summaryTable","summaryPliktTable","getInheritanceDescriptiveText","valueType","inheritanceSpecificTextIf","pliktSpecificTextIf","inheritanceSpecificTextElse","pliktSpecificTextElse","inheritanceDescriptiveText","legalReferenceTextArray","code_paragraphs","add_legal_references","pliktSpecificText","indexOf","SurvivingPartner","survivingPartnerParagraph","SurvivingPartnerUtils","FirstSection","belop_amount","UndividedEstateCalculation","undividedResult","undividedCalculation","undividedEstate","undividedEstateChoice","addUndividedEstateRelatives","add_undivided_estate_relatives","addUndividedEstateSummary","add_undivided_estate_summary","break","UndividedRelativeText","returnValue","endSentence","Error","unraveledText","genealogy_inheritance_unit","getUndividedRelativeText","UndividedSummaryTable","getUndividedSummaryTable","SecondSection","undividedStateElement","ThirdSection","getUskifteText","getTestamentText","getavkortingText","lovdata_link","getBarnText","uskifteText","testamentText","avkortingText","barnText","GeneralReservations","generalReservationsText","generalReservationsUtils","NationalInsurance","NationalInsuranceText","getNationalInsuranceString","FourthSection","Footer","render","_ref","totalPages","fixed","Header","FifthSection","url","setUrl","node","querySelector","domtoimage","_classList","_classList2","classList","contains","then","dataUrl","catch","Image","createContext","Document","Page","size","Provider","inputData","PliktdelsarvCalculation","UndividedCalculation","Person","personid","_undividedEstateSpouse","_childrenRearing","set_spouse","spouse","add_for_both","hasSurvivingSpouse","set_cohabitant","cohabitant","personMap","add_child","child","isPartner","temp_person","children_array","_partnerPath","_toConsumableArray","_path","ParentChildSelector","_level","getLevel","handleSuccessorCnt","res","successorCount","parseInt","_childCount","parentID","curPerson","currId","currNode","NodeEntity","getParentId","parent","successorProcessArray","handleNoSuccessorCase","handleClosingStep","questionType","itr_id","createEmptyNode","_partnerNode","currentPartnerNode","_processChildNodePos","t","successor_flag","QuestionType","personName","newSuccessorQuestion","createChatBotMessage","addMessageToBotState","allChildrenID","getParentChildrenIDStrings","handleSuccessorInput","childID","getChildUnprocessedNode","_Person$getPerson","temp_child","personId","aliveQuestion","childItrPos","currentParentID","currentParent","isCurrentParentID","currentId","currentParentDetail","handleChildAliveOption","childDetail","stepID","ChatStepTypes","getGenerationCount","handleSecondParentExists","parent_flag","allParentsID","temp_person_detail","newParentQuestion","handleParentsInput","predecessor","createNewPerson","temp_parent","isParentPresent","find","add_parent","handleParentAliveOption","temp_parent_detail","handleMarriedParents","askFinalQuestion","undividedEstateChoiceResponse","undivided_flag","totalEstateNetValueQuestion","netWealthQuestion","undividedOwnershipResponse","ownershipResponse","customOwnershipResponse","createClientMessage","React","modifiedChoiceResponse","undividedEstateSeparateWealth","totalEstateValue","ownershipType","undividedEstateSpouseQuestion","underAgeQuestion","delvisFirstQuestion","fulltSaereieQuestion","ownershipTypeWarning","ownershipTypeQuestion","askTestatorOtherChildrenQuestion","computeInheritances","FinalDocument","isSecondParent","handleClosestSurvivingRelativeChildren","handleClosestSurvivingRelativeParents","isTwoParent","testatorDetail","newSuccessorUndvdSpouseQuestion","secondParentChoiceQuestion","handleUndividedStep","deceasedParentsArray","handleClosestSurvivingRelativeGrandParens","handleAskUnderAgeQuestion","temp_class_testator","isUndividedParent","temp_class","eitherParentsDeceased","p_id","parent1Detail","parent2Detail","marriedParentsQn","testatorNode","handleGrandParentFirst","grandparentName","handleAskForNextGrandParent","surviving_successor_distance","possible_distances","temp","apply","distance","alternatives","_alternatives$","closest_alternative_class","closest_alternative_distance","personID","newPerson","generateNextID","newNode","createTestator","pdfDownloadLink","PDFDownloadLink","fileName","blob","createCustomMessage","payload","blockInputAtFinalStep","handleFinalQuestion","collection","name","join","step","inputField","getElementsByClassName","sendInputBtn","setAttribute","clearDisabledInput","prevStep","removeAttribute","handleUnderAge","cohabitantChoiceQuestion","spouseChoiceQuestion","handleSpouseOption","spouseQuestion","handleCohabitantChoice","cohabitantQuestion","commonMethods","curState","chatbotValidator","undividedEstateQuestion","handleTestator","toLowerCase","evaluateBooleanMessage","totalEstateValueResponse","totalEstateValueQuestion","currencyIntResponse","currencyStringResponse","currencyJSX","currencyCustom","totalEstateWarning","response","temp_first","delvisSecondQuestion","netWealthWarning","delvisFirstResponse","temp_last","delvisSecondResponse","delvisFulltResponse","handleSuccessor","handleNetWealth","newSpouse","assign","setPathforPartner","handleSpouseInput","newCohabitant","handleCohabitantInput","convertedMessage","chosenValue","returnKeyFromEnteredNumberText","slice","newUndividedSpouse","textBeforeSucsrUndvdSpouse","undividedSpouseId","newSuccessorTogetherQuestion","handleUndvdEstateSpouse","focusWritingArea","inputBoxElement","focus","handleMessage","isClicked","isClickedUndiv","setState","func","clientMessage","handleWidgetFunctions","prevState","trim","returnState","buttonElements","currentElement","disabled","disableButtons","alert","onClickHandler","thisButton","target","nextButton","nextElementSibling","prevButton","previousElementSibling","otherButton","background","handleOptions","option","_objectWithoutProperties","_excluded","onClick","label","Box","justifyContent","alignItems","component","sx","parentElement","hasChildNodes","_allCurrentButtons","childNodes","childEl","ChatHeader","setOpen","handleCloseNo","restartBot","resetChatbot","flexGrow","AppBar","Toolbar","Typography","variant","Tooltip","title","Button","revertLastState","_lastButtonDiv$nextEl","_lastButtonDiv$nextEl2","_secondLastButtonDiv$","_secondLastButtonDiv$2","_secondLastButtonDiv$3","buttonElementArray","querySelectorAll","lastButtonDiv","secondLastButtonDiv","lastPaddingDiv","btn","clearBooleanOptions","UndoIcon","width","RestartAlt","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","FileDownloadOutlinedIcon","botName","lang","customStyles","botMessageBox","chatButton","ChatbotState","initialMessages","customComponents","customMessages","custom","CustomFinalMessage","widgets","widgetName","widgetFunc","OptionSelector","InfoMessageWidget","UndividedEstateWidget","MessageParser","xDiff","yDiff","partnerBubbleLevelMap","ActionProvider","setStateFunc","checkstate","isStarted","glb_state","GRANDCHILDREN_PATH_LIMIT","isArray","firstSpouse_id","secondSpouse_id","check","delay","self","setInterval","detail","clearInterval","setTimeout","chartSelector","initialQuestion","undoButton","Promise","resolve","tempMessages","_this2","subscribe","lastState","revertCount","localStorage","getItem","setItem","revertState","ChartNode","type","xLevel","draggable","connectable","NodeData","showDialog","pos","ChartConnector","source","sourceHandle","targetHandle","animated","Bubble","elements","maxLevel","minLevel","xLevelArray","chartNodeMap","connectorArray","nodeSize","setxLevel","levelMap","processedNodes","currentLevelChartNodes","currentNode","avgXlevel","parentsCurrentNode","updatePartner","createEdgeInPath","curNode","level","isSpouseOrCohabitant","isUndividedSpouse","partnerBubbleArray","curChartNode","getChartNode","partnerNodeID","partnerChartNode","undividedChartNode","connector","newConnector","getLevelMap","_levelMap$get","nodeDetails","nodeLabel","x","y","setNodePosition","ypos","sortedLevelChartNode","bubbles","createLevelBubble","processBubbles","xleft","xgap","previousXRight","bubble","parentChartNode","relativeXleft","relativeXRight","eleID","chartNodes","partnerBubble","isPartnerProcessed","_loop2","chartNode","partnerParent","isExistingBubble","_loop3","partner","partnerNode","existingBubbles","existingBubble","getChartNodeConnectorArray","finalArray","setxLevelForMaxLevel","nodeArray","xlevelDefault","currentNodePath","_loop4","j","sourceNode","targetNode","top","HandleType","customHandleData","Position","partnerNodeStyles","OuterDiv","borderRadius","borderColor","borderStyle","letterSpacing","innerDiv1","height","innerDiv2","borderTop","textFitStyle","subtitle","whiteSpace","deceasedFormatter","personString","totalData","isConnectable","handles","k","Handle","labelString","Textfit","mode","forceSingleModeWidth","chatBotDataSubject","chatbotMessageSubscriptionList","componentCommunicatorService","flowStyles","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","isHandleChange","result","setResult","_useState3","_useState4","chartContent","setChartContent","componentWillUnmount","updateNodeInternals","useUpdateNodeInternals","useEffect","chartData","maxLevelData","processData","fitView","useZoomPanHelper","nodeTypes","specialNode","CustomNode","ReactFlow","nodesConnectable","paneMoveable","selectNodesOnDrag","elementsSelectable","nodesDraggable","Background","BackgroundVariant","gap","Controls","setWarningDiv","prepend","lastChild","addListenerToChatInputField","prev","Grid","direction","xs","sm","md","ReactFlowProvider","OrgChartTree","Chatbot","config","Config","messageParser","divChatBot","botIcon"],"sourceRoot":""}